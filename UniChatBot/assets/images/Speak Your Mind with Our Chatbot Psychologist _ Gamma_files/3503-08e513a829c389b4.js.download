"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3503],{63426:function(e,t,n){n.d(t,{r:function(){return tX}});var r=n(7099),o=n(55452),i=n(20010),s=n(56915),a=n(48273),c=n(40110),l=n(80353),d=n(11919),u=n(45650),f=n(49929),p=n(97261),h=n(2784),m=n(3360),x=n(12741),g=n(20412),v=n(60577),j=n(87254),b=n(2167),y=n(71354),C=n(50390),O=n(81927),w=n(94659),k=n(53738),S=n(91012),I=n(72360),E=n(66724),P=n(18751),D=n(28811),A=n(3002),T=n(1243),R=n(56695),_=n(89727),L=n(36188),M=n(5945),z="gray.700",N=n(95235),Z=n(82269),G=n(48322),F=n(52322),U=["error","refetch"];function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var B=function(e){var t=e.error,n=e.refetch,r=(0,Z.Z)(e,U);return(0,F.jsx)(k.xu,V(V({px:6,py:4},r),{},{children:(0,F.jsxs)(I.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,F.jsx)(G.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,F.jsx)(E.C,{mt:4,mb:2,fontSize:"md",children:(0,F.jsx)(o.cC,{id:"uNQm3r"})}),(0,F.jsx)(P.X,{maxWidth:"md",children:t.message}),(0,F.jsx)(u.z,{mt:4,onClick:function(){return n()},children:(0,F.jsx)(o.cC,{id:"6gRgw8"})})]})}))},H=n(19664),q=n(97269),K=n(92619),Y=n(85982),J=n(64827),X=function(){return j.ag._({id:"QbrUIo"})},Q=function(){return j.ag._({id:"FbBkvL"})},$=function(e){var t=e.isAnalyticsLoading,n=e.hasError,r=e.view,i=e.setView,s=e.description;return n?(0,F.jsx)(K.x,{children:(0,F.jsx)(o.cC,{id:"ZlwDi6"})}):(0,F.jsxs)(d.k,{direction:"column",flex:1,children:[(0,F.jsx)(K.x,{children:t?(0,F.jsx)(ee,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(o.cC,{id:"ZlwDi6"}),(0,F.jsxs)(w.g,{align:"stretch",spacing:4,children:[(0,F.jsx)(S.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:s}),(0,F.jsxs)(Y.E,{children:[(0,F.jsx)(Y.U,{children:(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:q.M,"aria-label":X()}),variant:"ghost",fontWeight:"600",bg:"deckView"===r?"trueblue.50":"transparent",color:"deckView"===r?"trueblue.500":z,onClick:function(){return i("deckView")},children:X()})}),(0,F.jsx)(Y.U,{children:(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:H.AG,"aria-label":Q()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===r?"trueblue.50":"transparent",color:"cardEngagement"===r?"trueblue.500":z,onClick:function(){return i("cardEngagement")},children:Q()})})]})]})]})}),(0,F.jsx)(J.o,{})]})},ee=function(){return(0,F.jsxs)(w.g,{align:"stretch",spacing:4,children:[(0,F.jsx)(O.O,{h:12,width:"30%"}),(0,F.jsx)(O.O,{h:4,width:"80%"})]})},et=n(74373),en=n(68871),er=n(8283),eo=n(25232),ei=n(36157),es=n(17349),ea=n(98621),ec=n.n(ea),el=n(68964),ed=function(e){var t=e.degree,n=e.alpha,r=e.startColor,o=void 0===r?"#ECC94B":r,i=e.endColor,s=void 0===i?"#38A169":i;if(Number.isNaN(t))return ec()("#e5e0df").toHex8String();var a=ec()(o).toHsl(),c=ec()(s).toHsl();return ec()({h:(0,el.t7)(a.h,c.h,t),s:(0,el.t7)(a.s,c.s,t),l:(0,el.t7)(a.l,c.l,t),a:void 0===n?1:n}).toHex8String()},eu=function(e,t){return e.reduce(function(e,n){return e[n.cardId]=n[t],e},{})},ef=function e(t,n){var r,o=0;for(var i in t)o+=(null!==(r=n[i])&&void 0!==r?r:0)+e(t[i],n);return o},ep=function(e,t){var n,r=0;for(var o in e)r=Math.max((null!==(n=t[o])&&void 0!==n?n:0)+ef(e[o],t),r);return r},eh=n(81333),em=n(56623),ex=n(51068),eg=n(67784),ev=n(93319),ej=n(67887),eb=n(49747),ey=n(62642),eC=n(29600),eO=n(21875),ew=n(15767),ek=n(23769),eS=n(13813),eI=n(16844),eE=n(62349),eP=n.n(eE);function eD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eT=function(e){var t=e.cardsViewed,n=e.totalCards,r=ed({degree:t/n}),i=n>0;return(0,F.jsxs)(er.U,{spacing:3,children:[(0,F.jsxs)(d.k,{flex:1,position:"relative",children:[(0,F.jsx)(eI.E,{h:4,flex:1,borderRadius:"sm",value:t,max:i?n:void 0,bg:"gray.200",sx:{"> div":{bg:r}}}),i&&t===n&&(0,F.jsx)(e_,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,F.jsx)(S.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:i?"".concat(t,"/").concat(n):(0,F.jsx)(o.cC,{id:"8Va3Pt"})})]})},eR=function(e){var t=e.cardCount,n=(0,h.useMemo)(function(){return eP()(1,t)},[t]);return(0,F.jsxs)(er.U,{spacing:3,filter:"blur(3px)",children:[(0,F.jsx)(d.k,{flex:1,position:"relative",children:(0,F.jsx)(eI.E,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,F.jsxs)(S.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},e_=function(e){var t=(0,ek.Z)({},e);return(0,F.jsx)(k.Cd,eA(eA({bg:"green.500",size:"18px",border:"2px solid white",color:"white"},t),{},{children:(0,F.jsx)(f.G,{icon:eS.LE,"aria-label":j.ag._({id:"y886Ns"}),size:"xs"})}))};function eL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eL(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ez=function(e){var t,n=e.cards,r=e.isColorized,o=void 0!==r&&r,i=e.scaleToMax,s=void 0!==i&&i,a=e.includeChildren,c=e.showViewersPercent,l=void 0!==c&&c,d=e.leftLabel,u=e.rightLabel,f=e.tooltipLabel,m=e.cardLookupTable,g=e.onAnalyticsPanelClose,v=(t=a?ep(n,m):Math.max.apply(Math,(0,x.Z)(Object.values(m))),function(e){return(0,el.t7)(0,100,e/t)}),j=(0,h.useCallback)(function(e){return v(e)},[v]);return(0,F.jsxs)(k.xu,{mt:6,mb:4,children:[(0,F.jsxs)(er.U,{mb:3,children:[(0,F.jsx)(er.U,{children:(0,F.jsx)(p.NZ,{children:d})}),(0,F.jsx)(ev.L,{}),(0,F.jsx)(er.U,{children:(0,F.jsx)(p.kH,{placement:"top",label:f,children:(0,F.jsx)(er.U,{children:(0,F.jsx)(p.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:u})})})})]}),(0,F.jsx)(k.xu,{width:"100%",children:Object.entries(n).map(function(e){var t,n=(0,eh.Z)(e,2),r=n[0],i=n[1];return(0,F.jsx)(eN,{id:r,childCards:i,percentage:null!==(t=m[r])&&void 0!==t?t:0,calculatePercentageScale:j,isColorized:o,cardLookupTable:m,scaleToMax:s,includeChildren:a,showViewersPercent:l,onAnalyticsPanelClose:g},r)})})]})},eN=function e(t){var n=t.id,r=t.cardLookupTable,i=t.childCards,s=t.percentage,a=t.calculatePercentageScale,c=t.isColorized,l=t.scaleToMax,u=t.includeChildren,m=t.showViewersPercent,x=t.onAnalyticsPanelClose,g=(0,eo.ye)("screenshotsEnabled"),v=(0,h.useState)(!1),j=v[0],b=v[1],C=(0,ew.Ux)({placement:"top",gutter:12,enterDelay:200}),O=C.referenceRef,w=C.popperRef,I=C.isHovering,E=C.getPopperProps,P=C.onMouseOver,D=C.onMouseOut,A=(0,h.useCallback)(function(){b(!j)},[j]),T=(0,h.useCallback)(function(){(0,eO.D)({cardId:n}),x()},[n,x]),R=(0,eC.c)(n),_=(0,eC.T)({cardId:n}).title,L=Object.values(i).length>0,M=0===s,z=u?s+ef(i,r):s,N=j?z:0,Z=l?a(z):Math.min(100,N),G=j?s:z,U=l?a(G):Math.min(100,G),W={startColor:"#F6AD55",endColor:"#68D391"},V=c?ed(eM({degree:Z/100},W)):"trueblue.50",B=c?ed(eM({degree:U/100},W)):"trueblue.100";return(0,F.jsxs)(y.K,{children:[(0,F.jsxs)(d.k,{direction:"column",onMouseOver:P,onMouseOut:D,children:[(0,F.jsxs)(d.k,{ref:O,h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,F.jsxs)(er.U,{pos:"absolute",zIndex:1,children:[L&&(0,F.jsx)(ej.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,F.jsx)(f.G,{icon:eg._t}),transform:j?"rotate(90deg)":"",onClick:A,_focus:{shadow:"none"}}),!L&&(0,F.jsx)(d.k,{w:6,justifyContent:"center",alignItems:"center",children:M?(0,F.jsx)(p.kH,{label:(0,F.jsx)(o.cC,{id:"s+PDNe"}),children:(0,F.jsx)(k.xu,{color:"blackAlpha.500",children:(0,F.jsx)(f.G,{icon:ex.Aq,size:"sm"})})}):(0,F.jsx)(k.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,F.jsx)(f.G,{icon:em.nZ,size:"sm"})})}),(0,F.jsx)(S.x,{color:M?"blackAlpha.500":void 0,noOfLines:1,children:_||(0,F.jsx)(o.cC,{id:"wja8aL"})})]}),(0,F.jsxs)(k.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,F.jsx)(k.xu,{position:"absolute",h:"100%",bg:M?"blackAlpha.200":V,w:"".concat(Z,"%")}),(0,F.jsx)(k.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:M?"blackAlpha.300":B,w:"".concat(U,"%")})]}),c&&100===s&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ev.L,{}),(0,F.jsx)(e_,{alignSelf:"center",zIndex:1})]})]}),I&&(0,F.jsx)(p.qh,eM({ref:w,src:g?null==R?void 0:R.previewUrl:ey.Z.src,fallbackSrc:ey.Z.src,shouldShow:I,onClick:T,tooltip:(0,F.jsx)(o.cC,{id:"3YmIR6"}),label:m?(0,F.jsx)(o.cC,{id:"wmqtMZ",values:{percentage:s}}):void 0},E()))]}),(0,F.jsx)(k.xu,{pl:8,children:L&&Object.entries(i).map(function(t){var n,o=(0,eh.Z)(t,2),i=o[0],s=o[1];return(0,F.jsx)(eb.U,{in:j,children:(0,F.jsx)(e,{id:i,childCards:s,percentage:null!==(n=r[i])&&void 0!==n?n:0,cardLookupTable:r,calculatePercentageScale:a,scaleToMax:l,isColorized:c,includeChildren:u,showViewersPercent:m,onAnalyticsPanelClose:x})},i)})})]})},eZ=function(){return(0,F.jsx)(y.K,{spacing:2,children:(0,F.jsx)(o.cC,{id:"QXJTby",components:{0:(0,F.jsx)(S.x,{}),1:(0,F.jsx)(S.x,{}),2:(0,F.jsx)(S.x,{})}})})},eG=function(e){var t=e.timeInMS;return void 0===t?(0,F.jsx)(F.Fragment,{}):(0,F.jsx)(o.cC,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},eF=function(e){var t=e.docId,n=e.viewerFilter,r=e.currentViewerFilterCount,i=e.onAnalyticsPanelClose,s=(0,ei.qr)().getState(),a=(0,es.X9)(s),c=(0,D.IrH)({variables:{docId:t}}),l=c.data,d=c.error,p=c.loading,m=c.refetch,x=(0,h.useState)("viewTimePercent"),g=x[0],v=x[1],j="viewTimePercent"===g?{chartDescription:(0,F.jsx)(o.cC,{id:"dpTE1c",values:{viewerCount:r}}),leftLabel:(0,F.jsx)(o.cC,{id:"ml51m3"}),rightLabel:(0,F.jsx)(o.cC,{id:"8R7bfR"})}:{chartDescription:(0,F.jsx)(o.cC,{id:"b2VMTo",values:{viewerCount:r}}),leftLabel:(0,F.jsx)(o.cC,{id:"kTgCTO"}),rightLabel:(0,F.jsx)(o.cC,{id:"AKDcmS"})},b=j.chartDescription,y=j.rightLabel,C=j.leftLabel,O="viewersOnly"===n?"viewers":"everyone",w=(0,eo.ye)("cardViewedThreshold"),S=(0,h.useMemo)(function(){var e;return(null==l?void 0:null===(e=l.docCardsStats)||void 0===e?void 0:e[O])||[]},[null==l?void 0:l.docCardsStats,O]),I=(0,h.useMemo)(function(){return eu(S,g)},[S,g]),E=(0,h.useCallback)(function(){return v("viewTimePercent")},[]),P=(0,h.useCallback)(function(){return v("viewersPercent")},[]);return(0,F.jsxs)(k.xu,{children:[(0,F.jsxs)(er.U,{my:4,children:[(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:en.SZ,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===g?"trueblue.50":"transparent",color:"viewTimePercent"===g?"trueblue.500":z,onClick:E,children:(0,F.jsx)(o.cC,{id:"XyvAeS"})}),(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:et.jG,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===g?"trueblue.50":"transparent",color:"viewersPercent"===g?"trueblue.500":z,onClick:P,children:(0,F.jsx)(o.cC,{id:"vXtpAZ"})})]}),(0,F.jsx)(eW,{description:b}),d&&(0,F.jsx)(B,{error:d,refetch:m}),p&&!d&&(0,F.jsx)(eU,{}),!p&&!d&&(0,F.jsx)(ez,{cards:a.tree,cardLookupTable:I,scaleToMax:"viewTimePercent"===g,isColorized:"viewersPercent"===g,includeChildren:"viewTimePercent"===g,showViewersPercent:"viewersPercent"===g,rightLabel:y,leftLabel:C,tooltipLabel:"viewTimePercent"===g?(0,F.jsx)(eZ,{}):(0,F.jsx)(eG,{timeInMS:w}),onAnalyticsPanelClose:i})]})},eU=function(e){var t=e.includeDescription;return(0,F.jsx)(d.k,{direction:"column",mt:6,mb:4,children:(0,F.jsxs)(w.g,{align:"stretch",children:[void 0!==t&&t&&(0,F.jsx)(O.O,{h:5,mb:3,w:"70%"}),(0,x.Z)([,,,,,]).map(function(e,t){return(0,F.jsx)(O.O,{h:8},t)})]})})},eW=function(e){var t=e.description;return(0,F.jsx)(S.x,{color:z,children:t})},eV=n(89364),eB=n(73851),eH=n(36258),eq=n(19875),eK=n(77525),eY=n(74642),eJ=n(35319),eX=n(27912),eQ=n(12221),e$=n(13061),e0=n(65903),e1=n.n(e0),e2=n(829),e5=n.n(e2),e3=n(95828),e6=n(63730),e4=["name","profileImg","email","isCreator","isContributor","isAnonymous"];function e8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e8(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e8(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e9=function(e){var t=e.uniqueViewers,n=e.docCreatedDate,r=(0,eo.ye)("cardViewedThreshold");return(0,F.jsx)(eB.h,{children:(0,F.jsxs)(eH.Tr,{children:[(0,F.jsx)(te,{label:(0,F.jsx)(o.cC,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,F.jsx)(o.cC,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,F.jsx)(te,{label:(0,F.jsx)(o.cC,{id:"pRGfP3"}),width:"35%"}),(0,F.jsx)(te,{label:(0,F.jsx)(o.cC,{id:"QfqHuz"}),tooltip:(0,F.jsx)(eG,{timeInMS:r}),width:"25%"})]})})},te=function(e){var t=e.label,n=e.width,r=e.tooltip,o=(0,F.jsx)(eq.Th,{w:n,children:(0,F.jsx)(S.x,{display:"inline",borderBottom:r?"0.125em dashed":void 0,borderBottomColor:r?"gray.400":void 0,children:t})});return r?(0,F.jsx)(p.kH,{placement:"top",label:r,children:o}):o},tt=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],tn=function(e){var t=e.viewers,n=e.currentViewerFilterCount,r=e.docCreatedDate,o=e.creatorId,i=e.contributors,s=e.cardCount,a=e.handleTableRowClick,c=e.hasIndividualAnalytics,l=(0,M.SE)().user,d=c?t:e5()(t,function(e){var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==l?void 0:l.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,F.jsx)(eK.x,{children:(0,F.jsxs)(eY.i,{colorScheme:"blackAlpha",children:[(0,F.jsx)(e9,{uniqueViewers:n,docCreatedDate:r}),(0,F.jsx)(eJ.p,{children:d.map(function(e,n){var r=e.user,d=e.lastOpened,u=e.visitorId,f=(null==r?void 0:r.id)===o,p=i.some(function(e){return e.user.id===(null==r?void 0:r.id)}),h=r?r.displayName+(r.id===(null==l?void 0:l.id)?" "+j.ag._({id:"dDUgzP"}):"")||"":j.ag._({id:"VmjbJY"}),m=d?e1()((0,e6.P9)(d)):j.ag._({id:"/JO3xr"}),x={name:h,id:(null==r?void 0:r.id)||u||"",email:null==r?void 0:r.email,isCreator:f,isContributor:p,profileImg:null==r?void 0:r.profileImageUrl,lastOpened:m},g=n===t.length-1,v=(null==r?void 0:r.id)===(null==l?void 0:l.id),b=!c&&!v;return(0,F.jsxs)(eH.Tr,{cursor:"pointer",onClick:function(){return a(x)},_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,F.jsx)(eX.Td,{borderBottom:g?"0 none":void 0,children:(0,F.jsx)(tr,{name:h,email:null==r?void 0:r.email,profileImg:null==r?void 0:r.profileImageUrl,isContributor:p,isCreator:f,isAnonymous:!r})}),(0,F.jsx)(eX.Td,{borderBottom:g?"0 none":void 0,children:b?(0,F.jsx)(S.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:tt[n%tt.length]}):(0,F.jsx)(S.x,{fontSize:"sm",children:m})}),(0,F.jsx)(eX.Td,{borderBottom:g?"0 none":void 0,children:b?(0,F.jsx)(eR,{cardCount:s}):(0,F.jsx)(eT,{cardsViewed:e.cardsViewed||0,totalCards:s||0})})]},(null==r?void 0:r.id)||u)})})]})})},tr=function(e){var t=e.name,n=e.profileImg,r=e.email,i=e.isCreator,s=void 0!==i&&i,a=e.isContributor,c=e.isAnonymous,l=(0,Z.Z)(e,e4);return(0,F.jsxs)(er.U,e7(e7({},l),{},{children:[(0,F.jsx)(eQ.q,{size:"sm",name:t,src:n}),(0,F.jsxs)(y.K,{spacing:.5,children:[(0,F.jsxs)(S.x,{children:[t,void 0!==c&&c&&(0,F.jsx)(p.Yq,{label:(0,F.jsx)(o.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}}),ml:2})]}),(0,F.jsxs)(er.U,{mt:1,children:[(0,F.jsx)(S.x,{fontSize:"sm",color:"gray.500",children:void 0===r?"":r}),(s||void 0!==a&&a)&&(0,F.jsx)(e$.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:s?(0,F.jsx)(o.cC,{id:"UE2beD"}):(0,F.jsx)(o.cC,{id:"3L51iw"})})]})]})]}))},to=function(e){var t,n,r,i,s=e.user,a=e.onBackClick,l=e.docId,d=e.onAnalyticsPanelClose,f=(0,ei.qr)().getState(),p=(0,es.X9)(f),m=(0,D.IrH)({variables:{docId:l,userId:s.id},skip:!l||!s.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),x=m.data,g=m.error,v=m.loading,j=m.refetch,y=null!==(t=null==x?void 0:null===(n=x.docCardsStats)||void 0===n?void 0:null===(r=n.everyone)||void 0===r?void 0:r.length)&&void 0!==t?t:0,C=null==x?void 0:null===(i=x.docCardsStats)||void 0===i?void 0:i.cardCount,O=(0,h.useMemo)(function(){var e;return(null==x?void 0:null===(e=x.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==x?void 0:x.docCardsStats]),w=(0,h.useMemo)(function(){return eu(O,"viewTimePercent")},[O]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(K.x,{children:(0,F.jsx)(u.z,{"aria-label":"Back",leftIcon:(0,F.jsx)(eV.R,{}),variant:"ghost",onClick:a,children:(0,F.jsx)(o.cC,{id:"iH8pgl"})})}),(0,F.jsx)(J.o,{}),(0,F.jsx)(c.i,{}),(0,F.jsx)(b.f,{children:(0,F.jsxs)(k.xu,{children:[(0,F.jsx)(ti,{user:s,showLastOpened:!0}),C&&(0,F.jsx)(eW,{description:(0,F.jsx)(o.cC,{id:"YJOrjl",values:{cardsViewed:y,totalCards:C}})}),v&&!g&&(0,F.jsx)(eU,{includeDescription:!0}),g&&(0,F.jsx)(B,{error:g,refetch:j}),!g&&!v&&(0,F.jsx)(ez,{cards:p.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,F.jsx)(o.cC,{id:"ml51m3"}),rightLabel:(0,F.jsx)(o.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,F.jsx)(eZ,{}),onAnalyticsPanelClose:d})]})})]})},ti=function(e){var t=e.user,n=e.showLastOpened;return(0,F.jsxs)(er.U,{align:"center",my:6,children:[(0,F.jsx)(tr,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,F.jsxs)(w.g,{align:"flex-start",spacing:0,children:[(0,F.jsx)(p.NZ,{children:(0,F.jsx)(o.cC,{id:"pRGfP3"})}),(0,F.jsx)(S.x,{children:t.lastOpened})]})]})},ts=n(87567),ta=n(47299),tc=n(81295),tl=n(26673),td=n(9088),tu=n(30893),tf=n(40771),tp=n(63849),th=n(2575),tm=function(e,t,n){return"everyone"===e?j.ag._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?j.ag._({id:"r/tA4Y",values:{viewersOnly:n}}):j.ag._({id:"V9JX7d"})},tx={everyone:tc.Nd,viewersOnly:ta.Md,accessLinkOnly:ts.uW},tg=function(e){var t=e.selected,n=e.handleMenuItemChange,r=e.everyoneCount,i=e.viewersOnlyCount;return(0,F.jsxs)(td.v,{children:[(0,F.jsx)(tu.j,{leftIcon:(0,F.jsx)(f.G,{size:"xs",icon:tx[t]}),as:u.z,size:"md",rightIcon:(0,F.jsx)(f.G,{size:"xs",icon:tl.pt}),children:tm(t,r,i)}),(0,F.jsx)(tf.q,{zIndex:2,maxW:"380px",children:(0,F.jsxs)(tp._,{defaultValue:t,value:t,onChange:function(e){Array.isArray(e)||n(e)},children:[(0,F.jsx)(th.i,{value:"everyone",isDisabled:0===r,children:(0,F.jsxs)(d.k,{align:"center",children:[(0,F.jsx)(f.G,{icon:tx.everyone,size:"xs"}),(0,F.jsxs)(k.xu,{ml:3,children:[(0,F.jsx)(S.x,{children:tm("everyone",r,i)}),(0,F.jsx)(S.x,{fontSize:"sm",color:"gray.500",children:(0,F.jsx)(o.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}})})]})]})}),(0,F.jsx)(th.i,{value:"viewersOnly",isDisabled:0===i,children:(0,F.jsxs)(d.k,{align:"center",children:[(0,F.jsx)(f.G,{icon:tx.viewersOnly,size:"xs"}),(0,F.jsxs)(k.xu,{ml:3,children:[(0,F.jsx)(S.x,{children:tm("viewersOnly",r,i)}),(0,F.jsx)(S.x,{fontSize:"sm",color:"gray.500",children:(0,F.jsx)(o.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}})})]})]})}),!1]})})]})},tv=n(46102),tj=n(6802),tb=n(70258),ty=n(80237),tC=n(59309),tO=n(2574),tw=n(92638),tk=n(33951),tS=n(10897),tI=n(14582),tE=n(75715),tP=n(96492),tD=n(14141),tA=n(40837),tT=["chartTitle","TooltipInner","showZero","shouldRoundYValues","showMaxAndMiddle","data","barColor","customTooltipStyles","onClick"];function tR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tR(Object(n),!0).forEach(function(t){(0,N.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tL={top:55,right:20,bottom:40,left:24},tM=function(e){return Math.round(e).toString()},tz={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1.5)",paddingLeft:"var(--chakra-space-1.5)",paddingTop:"var(--chakra-space-0.5)",paddingBottom:"var(--chakra-space-0.5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},tN="var(--chakra-colors-gray-500)",tZ="var(--chakra-colors-gray-200)",tG=function(e){var t,n=e.width,r=e.height,o=e.margin,i=void 0===o?tL:o,s=e.chartData,a=e.TooltipInner,c=e.showZero,l=e.shouldRoundYValues,d=e.showMaxAndMiddle,u=e.barColor,f=e.customTooltipStyles,p=e.onClick,m=void 0===p?function(){}:p,g=(0,tP.Z)(),v=g.showTooltip,j=g.tooltipOpen,b=g.tooltipLeft,y=g.tooltipTop,C=g.tooltipData,O=g.hideTooltip,w=(0,h.useRef)(),S=(0,h.useRef)();(0,h.useEffect)(function(){return function(){w.current&&clearTimeout(w.current),S.current&&clearTimeout(S.current)}},[]);var I=s.map(function(e){return e.y}),E=Math.max.apply(Math,(0,x.Z)(I)),P=[E,Math.round(E/2)],D=(t=d?P:I,Math.max.apply(Math,(0,x.Z)(t.map(function(e){return(0,tE.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0})))),A=i.left+D,T=n-A-i.right,R=r-i.top-i.bottom,_=t_(t_(t_({},tD.j),tz),f),L=(0,h.useMemo)(function(){return(0,tw.Z)({range:[0,T],domain:s.map(function(e){return e.x}),padding:.3})},[T,s]),M=(0,h.useMemo)(function(){return(0,tk.Z)({range:[R,0],round:!0,domain:[0,E]})},[R,E]),z=c?M(Math.min.apply(Math,(0,x.Z)(I.filter(function(e){return 0!==e})))):R,N=c&&R-z>6;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(k.xu,{children:(0,F.jsxs)("svg",{width:n,height:r,children:[(0,F.jsx)("rect",{x:0,y:0,rx:4,width:n,height:r,fill:"var(--chakra-colors-gray-100)"}),(0,F.jsx)(tC.Z,{top:i.top,left:A,children:s.map(function(e){var t,n,r=e.y,o=e.x,i="bar-".concat(o,"-").concat(r),s=L.bandwidth(),a=R-(null!==(t=M(r))&&void 0!==t?t:0),l=N&&0===a?6:a,d=null!==(n=L(o))&&void 0!==n?n:0,f=R-l;return(0,F.jsxs)(tC.Z,{children:[(0,F.jsx)(tS.Z,{x:d,y:f,width:s,height:l,radius:5,topLeft:!0,topRight:!0,fill:c&&0===r?tZ:u,onMouseLeave:function(){w.current=window.setTimeout(function(){O()},300)},onMouseMove:function(t){w.current&&clearTimeout(w.current);var n=(0,ty.Z)(t);v({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:function(t){return m(t,e)}}),(0,F.jsx)(tI.Z,{x:d,y:0,width:s,height:Math.max(0,R-l),opacity:0,onMouseLeave:function(){S.current=window.setTimeout(function(){O()},300)},onMouseMove:function(t){S.current&&clearTimeout(S.current);var n=(0,ty.Z)(t);v({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},i)})}),(0,F.jsx)(tj.Z,{top:i.top,left:A,scale:M,stroke:tZ,strokeWidth:2,tickValues:d?P:void 0,numTicks:d?void 0:2,hideZero:!0,tickFormat:l?tM:void 0,tickLength:6,tickStroke:tZ,tickLabelProps:function(){return{fill:tN,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4}}}),(0,F.jsx)(tb.Z,{top:R+i.top,left:A,scale:L,stroke:tZ,numTicks:4,tickStroke:tZ,tickLabelProps:function(){return{fill:tN,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}},strokeWidth:2,tickLength:6})]})}),j&&C&&(0,F.jsx)(tA.Z,{top:y,left:b,style:_,children:(0,F.jsx)(a,{x:C.x,y:C.y})})]})},tF=function(e){var t=e.chartTitle,n=e.TooltipInner,r=e.showZero,o=void 0===r||r,i=e.shouldRoundYValues,s=void 0===i||i,a=e.showMaxAndMiddle,c=void 0===a||a,l=e.data,d=e.barColor,u=void 0===d?"var(--chakra-colors-trueblue-200)":d,f=e.customTooltipStyles,p=e.onClick,h=void 0===p?function(){}:p,m=(0,Z.Z)(e,tT);return(0,F.jsxs)(k.xu,t_(t_({position:"relative",height:"300px"},m),{},{children:[(0,F.jsx)(S.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,F.jsx)(tO.Z,{children:function(e){var t=e.width,r=e.height;return t<10?null:(0,F.jsx)(tG,{width:t,height:r,showZero:o,chartData:l,barColor:u,customTooltipStyles:f,onClick:h,TooltipInner:n,shouldRoundYValues:s,showMaxAndMiddle:c})}})]}))},tU=function(e,t){var n="LLL d",r=new Date;r.setDate(r.getDate()-t+1);for(var o=[],i=0;i<t;i++)!function(t){var i=new Date(r);i.setDate(i.getDate()+t);var s=(0,tv.Z)(i,{representation:"date"}),a=e.find(function(e){return e.date===s});a?o.push({x:(0,A.p6)(a.date,n),y:a.uniqueVisitors?a.uniqueVisitors:0}):o.push({x:(0,A.p6)(s,n),y:0})}(i);return o},tW=function(e){var t=tU(e.viewData,e.dayCount);return(0,F.jsx)(tF,{data:t,my:3,chartTitle:(0,F.jsx)(o.cC,{id:"mSEibf"}),TooltipInner:tV})},tV=function(e){var t=e.x,n=e.y;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(S.x,{children:t}),(0,F.jsx)(S.x,{children:(0,F.jsx)(o.cC,{id:"6MKtHx",values:{y:n}})})]})},tB=function(e,t,n){if(!n)return 0;var r,o,i,s=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,a=null!==(o=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==o?o:0;return"everyone"===t?s:"viewersOnly"===t?Math.max(0,s-a):0},tH=function(e){var t,n,r,i=e.doc,s=e.handleSharePanelOpen,a=e.onAnalyticsPanelClose,l=(0,D.xls)({variables:{memoId:i.id},skip:!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),f=l.loading,p=l.data,m=l.error,x=l.refetch,g=(0,M.SE)().user,v=(0,h.useState)("deckView"),O=v[0],w=v[1],k=(0,h.useState)(null),S=k[0],I=k[1],E=(0,h.useState)("everyone"),P=E[0],z=E[1],N=(0,A.p6)(i.createdTime,"PPP"),Z=i.title||(0,F.jsx)(o.cC,{id:"wja8aL"}),G=(null==p?void 0:p.memoStats.viewers)||[],U=(null==p?void 0:null===(n=p.memoStats.dailyViews)||void 0===n?void 0:n.dayCount)||0,W=(t=null==p?void 0:p.memoStats)&&t.dailyViews?"everyone"===P?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===P&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],V=(0,T.Y)("individual_analytics",i.organization),H=(0,_.zc)().openUpsellModal,q=W.every(function(e){return 0===e.uniqueVisitors}),K=G.filter(function(e){var t;return"everyone"===P||!(null!==(t=i.editors)&&void 0!==t&&t.some(function(t){var n,r;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(r=t.user)||void 0===r?void 0:r.id)}))}),Y=tB(i,P,null==p?void 0:p.memoStats),J=(0,h.useCallback)(function(e){z(e)},[]),ee=(0,h.useCallback)(function(e){w(e)},[]),et=(0,h.useCallback)(function(e){if(!V&&e.id!==(null==g?void 0:g.id)){H({segmentEvent:L.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}I(e)},[H,V,g]),en=(0,h.useCallback)(function(){I(null)},[]),er=void 0!==m;return(0,F.jsxs)(F.Fragment,{children:[S&&(0,F.jsx)(to,{user:S,onBackClick:en,docId:i.id,onAnalyticsPanelClose:a}),!S&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)($,{hasError:er,isAnalyticsLoading:f,setView:ee,view:O,description:(0,F.jsx)(o.cC,{id:"uEtUah",values:{docTitle:Z,docCreatedDate:N}})}),er&&(0,F.jsx)(B,{error:m,refetch:x}),!er&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(c.i,{}),(0,F.jsxs)(b.f,{children:[f&&(0,F.jsx)(tq,{}),!f&&G.length<=1&&(0,F.jsx)(tK,{handleSharePanelOpen:s}),!f&&(0,F.jsxs)(y.K,{direction:"column",mt:4,spacing:4,children:[(0,F.jsxs)(d.k,{direction:"row",justify:"space-between",align:"center",children:[(0,F.jsx)(C.X,{as:"h2",size:"md",children:"cardEngagement"===O?Q():X()}),(0,F.jsx)(tg,{selected:P,handleMenuItemChange:J,everyoneCount:tB(i,"everyone",null==p?void 0:p.memoStats),viewersOnlyCount:tB(i,"viewersOnly",null==p?void 0:p.memoStats)})]}),"deckView"===O&&q&&(0,F.jsx)(tY,{handleSharePanelOpen:s,dayCount:U}),"deckView"===O&&!q&&(0,F.jsx)(tW,{viewData:W,dayCount:U}),"cardEngagement"===O&&(0,F.jsx)(eF,{docId:i.id,viewerFilter:P,currentViewerFilterCount:Y,onAnalyticsPanelClose:a}),(0,F.jsx)(tn,{creatorId:(null===(r=i.createdBy)||void 0===r?void 0:r.id)||"",viewers:K,currentViewerFilterCount:Y,docCreatedDate:N,contributors:i.editors||[],cardCount:(null==p?void 0:p.memoStats.cardCount)||0,handleTableRowClick:et,hasIndividualAnalytics:V}),K.length>3&&!V&&(0,F.jsx)(u.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:function(){return H({segmentEvent:L.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS})},children:(0,F.jsx)(o.cC,{id:"BKBX4n",values:{0:K.length-3}})}),!V&&(0,F.jsx)(R.m,{segmentEvent:L.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:j.ag._({id:"GYgPBy"})})]})]})]})]})]})},tq=function(){return(0,F.jsxs)(d.k,{direction:"column",py:2,children:[(0,F.jsx)(O.O,{h:10,width:"40%",mb:4}),(0,F.jsx)(O.O,{h:40,mb:4}),(0,F.jsx)(w.g,{align:"stretch",children:(0,x.Z)([,,,]).map(function(e,t){return(0,F.jsx)(O.O,{h:12},t)})})]})},tK=function(e){var t=e.handleSharePanelOpen;return(0,F.jsx)(d.k,{p:3,px:4,mt:2,bg:"gray.100",color:z,borderRadius:"base",children:(0,F.jsxs)(d.k,{align:"baseline",fontSize:"sm",children:[(0,F.jsx)(k.xu,{pr:2,children:(0,F.jsx)(f.G,{icon:v.IL,"aria-label":"user-icon",size:"sm"})}),(0,F.jsx)(S.x,{children:(0,F.jsx)(o.cC,{id:"FNMh4I",components:{0:(0,F.jsx)(S.x,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},tY=function(e){var t=e.handleSharePanelOpen,n=e.dayCount;return(0,F.jsxs)(I.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,F.jsx)(k.Cd,{size:"30px",bg:"gray.500",children:(0,F.jsx)(f.G,{icon:g.Im,color:"white"})}),(0,F.jsx)(E.C,{mt:4,mb:2,fontSize:"md",children:(0,F.jsx)(o.cC,{id:"2OzAI5"})}),n>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(P.X,{maxWidth:"sm",children:(0,F.jsx)(o.cC,{id:"qQLmo7",values:{dayCount:n}})}),(0,F.jsx)(u.z,{mt:4,onClick:t,children:(0,F.jsx)(o.cC,{id:"IXzWG0"})})]})]})},tJ=function(e){var t,n,r,i,s,a,l=e.doc,d=e.onAnalyticsPanelClose,u=(0,ei.qr)().getState(),f=(0,es.X9)(u),p=(0,M.SE)().user,m=(0,D.IrH)({variables:{docId:l.id,userId:null==p?void 0:p.id},skip:!(null!=p&&p.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),x=m.data,g=m.error,v=m.loading,j=m.refetch,y=null!==(t=null==x?void 0:null===(n=x.docCardsStats)||void 0===n?void 0:null===(r=n.everyone)||void 0===r?void 0:r.length)&&void 0!==t?t:0,C=null==x?void 0:null===(i=x.docCardsStats)||void 0===i?void 0:i.cardCount,O=(0,h.useMemo)(function(){var e;return(null==x?void 0:null===(e=x.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==x?void 0:x.docCardsStats]),w=(0,h.useMemo)(function(){return eu(O,"viewTimePercent")},[O]);if(!p)return null;var E=p.id===(null===(s=l.createdBy)||void 0===s?void 0:s.id),P=null===(a=l.editors)||void 0===a?void 0:a.some(function(e){return e.user.id===p.id}),A={name:p.displayName,id:p.id,profileImg:p.profileImageUrl,email:p.email,isContributor:P,isCreator:E};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(K.x,{children:[(0,F.jsx)(o.cC,{id:"ZlwDi6"}),(0,F.jsx)(S.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:l.title||(0,F.jsx)(o.cC,{id:"wja8aL"})})]}),(0,F.jsx)(J.o,{}),(0,F.jsx)(c.i,{}),(0,F.jsx)(b.f,{children:(0,F.jsxs)(k.xu,{children:[(0,F.jsx)(ti,{user:A}),void 0!==C&&(0,F.jsx)(eW,{description:(0,F.jsx)(o.cC,{id:"YJOrjl",values:{cardsViewed:y,totalCards:C}})}),v&&!g&&(0,F.jsx)(eU,{includeDescription:!0}),g&&(0,F.jsx)(B,{error:g,refetch:j,px:0}),!g&&!v&&(0,F.jsx)(ez,{cards:f.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,F.jsx)(o.cC,{id:"ml51m3"}),rightLabel:(0,F.jsx)(o.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,F.jsx)(eZ,{}),onAnalyticsPanelClose:d}),(0,F.jsxs)(I.b,{children:[(0,F.jsx)(G.z,{}),(0,F.jsx)(o.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:e3.N6,GAMMA_ARTIFACT_PROPER_NOUN:e3.Yc}})]})]})})]})},tX=function(e){var t=e.doc,n=e.mode,x=e.isAnalyticsPanelOpen,g=e.onAnalyticsPanelClose,v=e.onSharePanelOpen,j=(0,m.i)({base:"sm",md:"2xl",lg:"4xl"}),b=(0,h.useCallback)(function(){v&&(v(),g())},[v,g]);return(0,F.jsx)(p.Wk,{isDark:!1,children:(0,F.jsxs)(i.u_,{onClose:g,isOpen:x,size:j,blockScrollOnMount:!1,children:[(0,F.jsx)(s.Z,{}),(0,F.jsxs)(a.h,{children:["full"===n?(0,F.jsx)(tH,{doc:t,handleSharePanelOpen:b,onAnalyticsPanelClose:g}):(0,F.jsx)(tJ,{doc:t,onAnalyticsPanelClose:g}),(0,F.jsx)(c.i,{my:4}),(0,F.jsx)(l.m,{children:(0,F.jsxs)(d.k,{justifyContent:"full"===n?"space-between":"flex-end",flex:1,children:["full"===n&&(0,F.jsx)(u.z,{leftIcon:(0,F.jsx)(f.G,{icon:r.zB}),variant:"ghost",onClick:b,children:(0,F.jsx)(o.cC,{id:"IXzWG0"})}),(0,F.jsx)(u.z,{variant:"solid",onClick:g,children:(0,F.jsx)(o.cC,{id:"DPfwMq"})})]})})]})]})})}},75213:function(e,t,n){n.d(t,{U:function(){return o},V:function(){return i}});var r=n(75851),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e||"Untitled":e?"".concat(e," | Gamma"):"Gamma"},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e||(t?"":r.D)}},38797:function(e,t,n){n.d(t,{Av:function(){return S},U8:function(){return k}});var r=n(95235),o=n(393),i=n(11919),s=n(2784),a=n(43997),c=n(2104),l=n(36157),d=n(3360),u=n(70957),f=n(53738),p=n(12436),h=n.n(p),m=n(3588),x=n(52322);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(e){var t=e.setWidth,n=e.width,r=e.position,o=e.onClose,a=e.panelRef,l=e.initialWidth,d=e.isDragging,u=e.setIsDragging,p=(0,s.useMemo)(function(){return(0,m.n)()},[])>0&&"right"===r,g=(0,s.useState)(n),j=g[0],b=g[1],y=(0,s.useState)(null),C=y[0],O=y[1],w=h()(function(e){var t,n=Math.min(Math.max(t="left"===r?e.clientX:-((e.clientX-C)*1)+j,c.pn),c.ZQ);t<=c.Nh?(a.current.style.transitionProperty="width",a.current.style.transitionDuration="var(--chakra-transition-duration-normal)",n=0):n>c.pn&&(a.current.style.transitionProperty="",a.current.style.transitionDuration=""),a.current.style.width="".concat(n,"px")},30),k=function e(){u(!1),O(null);var n=a.current.style.width;"0px"===n?(o(),t(l)):t(parseInt(n.replace("px",""),10)),a.current.style.transitionProperty="",a.current.style.transitionDuration="",window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",e)};(0,s.useEffect)(function(){return C&&(window.addEventListener("mousemove",w),window.addEventListener("mouseup",k)),function(){window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",k)}},[C]);var S={};return S="left"===r?{right:-4,position:"absolute"}:p?{position:"relative"}:{left:-4,position:"absolute"},(0,x.jsx)(i.k,v(v({h:"100%",bg:p?"gray.200":d?"blackAlpha.200":"rgba(0,0,0,0)",w:p?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:p?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:function(e){e.preventDefault(),u(!0),O(e.clientX),b(n)},position:"absolute",display:["none","none","none","flex"]},S),{},{children:!p&&(0,x.jsx)(f.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:d?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})}))},b=n(40723);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var O={ifPanelHasRoomToOpen:function(e,t){return{base:t,xl:e}}},w=function(e){var t,n=e.position,f=e.panelLifecycle,p=(0,s.useRef)(),h=(0,s.useState)(!1),m=h[0],g=h[1],v=(0,a.I0)(),y=(0,l.CG)((0,b.SL)(n)),w=(0,l.CG)((0,b.Fw)(n)),k=(0,l.CG)((0,b.CO)(n)),S=(0,l.CG)((0,b.eh)(n)),I=null!==(t=null==S?void 0:S.canCollapse)&&void 0!==t&&t,E=(0,s.useCallback)(function(){v((0,b.sR)({position:n}))},[v,n]),P=(0,s.useCallback)(function(){v((0,b.Yp)({component:S}))},[S,v]),D=(0,s.useCallback)(function(e){v((0,b.UG)({width:e,position:n})),f.emit("resize",{})},[v,f,n]),A=(0,r.Z)({zIndex:Number((0,o.dQ)("zIndices","overlay"))+1,position:O.ifPanelHasRoomToOpen("relative","fixed"),height:"100%",top:0,bottom:0},n,0);w||m||(A.transitionProperty="width",A.transitionDuration="normal"),(0,s.useEffect)(function(){var e=function(e){"width"===e.propertyName&&f.emit("resize",{})};return p.current.addEventListener("transitionend",e),function(){p.current&&p.current.removeEventListener("transitionend",e)}},[f,p]);var T=(0,d.i)(O.ifPanelHasRoomToOpen(!0,!1))||!1;return(0,s.useEffect)(function(){y&&!T&&I&&E()},[T,y,E,I]),(0,x.jsxs)(i.k,C(C({ref:p},A),{},{style:{width:y||I?k:0},maxW:"100%","data-print-hidden":!0,children:[y&&"right"===n&&(0,x.jsx)(j,{isDragging:m,setIsDragging:g,position:n,width:k,setWidth:D,panelRef:p,onClose:E,initialWidth:c.Ld}),(0,x.jsx)(u.Mn.Provider,{value:f,children:S&&(y||I)&&(0,x.jsx)(S,{isDragging:m,isOpen:y,closePanel:E,openPanel:P,panelRef:p,lifecycle:f,hasRoomToOpen:T})}),y&&"left"===n&&(0,x.jsx)(j,{isDragging:m,setIsDragging:g,position:n,width:k,setWidth:D,panelRef:p,onClose:E,initialWidth:c.X9})]}))},k=(0,s.memo)(function(e){return(0,x.jsx)(w,C({position:"right"},e))});k.displayName="RightPanelContainer";var S=(0,s.memo)(function(e){return(0,x.jsx)(w,C({position:"left"},e))});S.displayName="LeftPanelContainer"},22103:function(e,t,n){n.d(t,{B:function(){return D}});var r=n(55452),o=n(87254),i=n(78116),s=n(56915),a=n(16796),c=n(64827),l=n(92619),d=n(2167),u=n(80353),f=n(45650),p=n(97261),h=n(2784),m=n(95235),x=n(82269),g=n(2046),v=n(70287),j=n(60807),b=n(53738),y=n(15767),C=n(11325),O=n(52322),w=["label","initialValue","updateValue","helperText","language"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var S=function(e){var t=e.label,r=e.initialValue,o=e.updateValue,i=e.helperText,s=e.language,a=(0,x.Z)(e,w),c=(0,h.useState)(void 0===r?"":r),l=c[0],d=c[1],u=(0,h.useState)(null),f=u[0],p=u[1],S=(0,y.Kt)(o,100),I=(0,h.useState)(),E=I[0],P=I[1];(0,h.useEffect)(function(){"css"===s?Promise.all([n.e(8917),n.e(7120),n.e(6214)]).then(n.bind(n,96214)).then(function(e){P(e.css())}):"html"===s&&Promise.all([n.e(8917),n.e(7120),n.e(6214),n.e(4100),n.e(2163)]).then(n.bind(n,22163)).then(function(e){P(e.html())})},[s]),(0,y.vm)(function(){p(null),S(l)},[l,S],[l]);var D=[E].filter(Boolean);return(0,O.jsxs)(g.NI,{isInvalid:!!f,children:[(0,O.jsx)(v.l,{children:t}),f&&(0,O.jsx)(j.J1,{children:f}),i&&(0,O.jsx)(g.Q6,{children:i}),(0,O.jsx)(b.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,O.jsx)(h.Suspense,{fallback:(0,O.jsx)("span",{}),children:(0,O.jsx)(C.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){(0,m.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({value:l,extensions:D,onChange:d},a))})})]})},I=n(36157),E=n(17349),P=n(6946),D=(0,h.memo)(function(e){var t=e.isOpen,n=e.onClose,m=e.editor,x=(0,P.A)(m),g=(0,I.CG)(E.$p).bodyStart,v=(0,h.useCallback)(function(e){null==m||m.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[m]);return(0,O.jsx)(p.Wk,{isDark:!1,children:(0,O.jsxs)(i.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,O.jsx)(s.Z,{background:"none"}),(0,O.jsxs)(a.s,{onKeyDown:x,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,O.jsx)(c.o,{}),(0,O.jsx)(l.x,{children:(0,O.jsx)(r.cC,{id:"E16GGw"})}),(0,O.jsx)(d.f,{overflowX:"hidden",children:(0,O.jsx)(S,{label:o.ag._({id:"fC5kYg"}),helperText:o.ag._({id:"0AZNtw"}),initialValue:g,updateValue:v,language:"html",height:"600px"})}),(0,O.jsx)(u.m,{children:(0,O.jsx)(f.z,{w:"100%",variant:"solid",onClick:n,children:(0,O.jsx)(r.cC,{id:"DPfwMq"})})})]})]})})});D.displayName="CustomCodeDrawer"},34972:function(e,t,n){n.d(t,{_i:function(){return _._},eT:function(){return et}});var r,o,i,s,a,c=n(95235),l=n(81333),d=n(55452),u=n(55479),f=n(5632),p=n(2784),h=n(88914),m=n(28811),x=n(35243),g=n(57848),v=n(25232),j=n(36157),b=n(5945),y=n(16467),C=n(57262),O=function(e){var t=(0,j.TL)(),n=(0,b.SE)().currentWorkspace;(0,p.useEffect)(function(){if(e)return y.VH.updateWorkspaceInLdContext(e).then(function(){t((0,C.vH)({isDocWorkspaceSet:!0}))}),function(){y.VH.updateWorkspaceInLdContext(n).then(function(){t((0,C.vH)({isDocWorkspaceSet:!1}))})}},[n,t,e])},w=n(56969),k=n(7328),S=n(57981),I=(0,S.Ps)(r||(r=(0,k.Z)(["\n  fragment DefaultCardFields on Card {\n    id\n    archived\n    docId\n    title\n    text\n    previewUrl\n    createdTime\n    updatedTime\n  }\n"])));(0,S.Ps)(o||(o=(0,k.Z)(["\n  mutation CreateCard($id: ID!, $docId: ID!) {\n    createCard(id: $id, docId: $docId) {\n      id\n    }\n  }\n"]))),(0,S.Ps)(i||(i=(0,k.Z)(["\n  ","\n  query GetCard($id: ID!, $docId: ID!) {\n    card(id: $id, docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),I),(0,S.Ps)(s||(s=(0,k.Z)(["\n  ","\n  query GetCards($docId: ID!) {\n    docCards(docId: $docId, archived: false) {\n      ...DefaultCardFields\n    }\n  }\n"])),I);var E=(0,S.Ps)(a||(a=(0,k.Z)(["\n  ","\n  subscription SubscribeToCards($docId: ID!) {\n    docCards(docId: $docId) {\n      ...DefaultCardFields\n    }\n  }\n"])),I),P=n(29407),D=n(60883),A=n(54714),T=n(21260),R=n(38404),_=n(48842),L=n(75944),M=n(35093),z=n(20010),N=n(56915),Z=n(48273),G=n(92619),F=n(64827),U=n(2167),W=n(71354),V=n(91012),B=n(80353),H=n(76648),q=n(45650),K=n(52322),Y=n(2252),J=function(e){var t,n=(null===(t=(0,j.CG)((0,M.oH)(e||"")))||void 0===t?void 0:t.status)==="running",r=(0,p.useRef)(n);r.current=n;var o=(0,p.useState)(function(){return new Y.B}),i=o[0],s=o[1],a=(0,p.useCallback)(function(){i.resolve()},[i]),c=(0,L.q)(),l=c.isOpen,d=c.onOpen,u=c.onClose;return{confirmNavigationFn:(0,p.useCallback)(function(){if(!r.current)return Promise.resolve();var e=new Y.B;return s(e),d(),e.promise},[d]),confirmNavigationModalProps:{isOpen:l,onClose:u,onConfirm:a}}},X=function(e){var t=e.isOpen,n=e.onClose,r=e.onConfirm;return(0,K.jsxs)(z.u_,{onClose:n,isOpen:t,isCentered:!0,children:[(0,K.jsx)(N.Z,{}),(0,K.jsxs)(Z.h,{children:[(0,K.jsx)(G.x,{children:(0,K.jsx)(d.cC,{id:"YeK6T+"})}),(0,K.jsx)(F.o,{}),(0,K.jsx)(U.f,{children:(0,K.jsxs)(W.K,{spacing:4,children:[(0,K.jsx)(V.x,{fontWeight:"bold",children:(0,K.jsx)(d.cC,{id:"Wr6Y7m"})}),(0,K.jsx)(V.x,{children:(0,K.jsx)(d.cC,{id:"n0Fn6S"})})]})}),(0,K.jsx)(B.m,{children:(0,K.jsxs)(H.h,{children:[(0,K.jsx)(q.z,{variant:"ghost",onClick:n,children:(0,K.jsx)(d.cC,{id:"dEgA5A"})}),(0,K.jsx)(q.z,{variant:"ghost",color:"red.600",onClick:r,children:(0,K.jsx)(d.cC,{id:"QxM8i/"})})]})})]})]})};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ee=function(e){var t=e.children,n=(0,v.ye)("docEditorForcePublicStatic"),r=(0,u.p)(),o=(0,b.we)(),i=(0,j.CG)(R.XV),s=(0,b.SE)(),a=s.user,c=s.userStatus,y=(0,p.useRef)(null),C=(0,j.TL)(),k=(0,f.useRouter)(),S=k.push,I=k.replace,L=(0,j.CG)(R.yx),M=(0,D.Pi)(),z=(0,l.Z)(M,2),N=z[0],Z=z[1],G=Z&&Z.match(D.sg),F=G?G[0]:null,U=J(F),W=U.confirmNavigationFn,V=U.confirmNavigationModalProps,B=(0,p.useState)({isUnauthorized:void 0,setCollaborativeEditorInstance:function(e){y.current=e,q(function(t){return $($({},t),{},{editor:e})})},getCollaborativeEditorInstance:function(){return y.current},confirmNavigation:W,editor:void 0}),H=B[0],q=B[1];(0,x.ts)(L),O(null==L?void 0:L.organization);var Y=(0,m.WMx)({variables:{id:F},returnPartialData:!0,nextFetchPolicy:"cache-only"}),Q=(0,l.Z)(Y,2),ee=Q[0],et=Q[1],en=et.data,er=et.loading,eo=et.called,ei=et.subscribeToMore,es=(0,b.py)("view",null==en?void 0:en.doc);(0,b.$K)(ee),(0,p.useEffect)(function(){if(ei&&H.docId&&eo)return ei({document:T.dU,variables:{id:H.docId},updateQuery:function(e,t){var n=t.subscriptionData;return n.data&&n.data.doc&&e.doc?{doc:$($($({},e.doc),n.data.doc),{},{__typename:"Doc"})}:e}})},[H.docId,ei,eo]);var ea=(0,m.WBF)({variables:{docId:F},returnPartialData:!0,nextFetchPolicy:"cache-only"}),ec=(0,l.Z)(ea,2),el=ec[0],ed=ec[1],eu=ed.data,ef=ed.called,ep=ed.subscribeToMore;return((0,g.p)(null==eu?void 0:eu.docCards,H.editor),(0,p.useEffect)(function(){if(ep&&H.docId&&ef)return ep({document:E,variables:{docId:H.docId},updateQuery:function(e,t){var n=t.subscriptionData;return n.data&&n.data.docCards?n.data:e}})},[H.docId,ep,ef]),(0,p.useEffect)(function(){if(H.docId!==F&&Z){if(!F){r({id:"invalid_doc_id_error",title:(0,K.jsx)(d.cC,{id:"742lf1"}),description:"",status:"error",position:"top",isClosable:!1,duration:null});return}ee(),el(),q(function(e){return $($({},e),{},{docId:F})})}},[H.docId,Z,F,ee,el,C,r]),(0,p.useEffect)(function(){if("loading"!==c&&eo&&!er&&Z){if(!en||!en.doc||!1===es){"loggedOut"===c&&S("/signin?redirect_to=".concat(encodeURIComponent(window.location.href))),q(function(e){return $($({},e),{},{isUnauthorized:!0})});return}var e,t,r=o.can(m.y3$.View,en.doc)&&o.cannot(m.y3$.Comment,en.doc)&&o.cannot(m.y3$.Edit,en.doc)&&o.cannot(m.y3$.Manage,en.doc),s=null===(e=en.doc.accessLinks)||void 0===e?void 0:null===(t=e.find(function(e){return e.token===h.v.SHARE_TOKEN}))||void 0===t?void 0:t.permission,a=s&&[m.y3$.Edit,m.y3$.Comment].includes(s),l=new URLSearchParams(window.location.search),d=l.get("following_id")&&l.get("follow_on_start"),u=i&&r&&!d&&!a,f=i&&n;if(u||f){C((0,R.R8)({docEditorType:A.Z.PUBLIC_STATIC}));return}if(!i&&en.doc.archived){I("/");return}q(function(e){return!1===e.isUnauthorized?e:$($({},e),{},{isUnauthorized:!1})}),C((0,R.pl)({doc:en.doc}))}},[o,es,en,er,Z,eo,i,n,c,S,C,I,a]),(0,p.useEffect)(function(){return function(){C((0,R.mc)())}},[C]),(0,p.useEffect)(function(){if(L&&F){var e="".concat(L.title?"".concat((0,P.l)(L.title),"-"):"").concat(F);Z!==e&&(0,w.lO)({pathname:"/".concat(N,"/").concat(e),emitChange:!1})}},[L,F,Z,N]),H.docId)?(0,K.jsxs)(_.r.Provider,{value:H,children:[t,(0,K.jsx)(X,$({},V))]}):(0,K.jsx)(K.Fragment,{})};function et(e){return(0,p.memo)(function(t){return(0,K.jsx)(ee,{children:(0,K.jsx)(e,$({},t))})})}},82779:function(e,t,n){n.d(t,{m:function(){return F}});var r=n(81333),o=n(55452),i=n(87254),s=n(11919),a=n(53738),c=n(94659),l=n(36895),d=n(50390),u=n(91012),f=n(97261),p=n(2784),h=n(28811),m=n(64914),x=n(66397),g=n(36157),v=n(68722),j=n(43512),b=n(17349),y=n(5945),C={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},O=n(63730),w=n(83906),k=n(9088),S=n(30893),I=n(45650),E=n(40771),P=n(63849),D=n(2575),A=n(97907),T=n(65903),R=n.n(T),_=n(52322),L=function(e){var t=e.count,n=e.onClose,r=e.commentStatusFilter,a=e.setCommentStatusFilter,c=r===h.Ux9.Open?i.ag._({id:"Kz1TxG"}):i.ag._({id:"kywJax"});return(0,_.jsxs)(s.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,_.jsx)(d.X,{size:"md",flex:1,noOfLines:1,children:(0,_.jsx)(o.cC,{id:"eiUA4k",values:{count:t}})}),(0,_.jsxs)(k.v,{closeOnSelect:!0,children:[(0,_.jsx)(S.j,{as:I.z,size:"sm",rightIcon:(0,_.jsx)(w.v,{}),mr:8,children:R()(c)}),(0,_.jsx)(E.q,{zIndex:3,children:(0,_.jsxs)(P._,{defaultValue:r,title:i.ag._({id:"0cVgUw"}),type:"radio",children:[(0,_.jsx)(D.i,{onClick:function(){return a(h.Ux9.Open)},value:"open",children:(0,_.jsx)(o.cC,{id:"1TNIig"})}),(0,_.jsx)(D.i,{onClick:function(){return a(h.Ux9.Closed)},value:"closed",children:(0,_.jsx)(o.cC,{id:"D87pha"})})]})})]}),(0,_.jsx)(A.P,{position:"absolute",top:2,right:2,onClick:n,"data-comment-feed-close-button":!0})]})},M=n(95235),z=n(16257);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){(0,M.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=function(e){var t=e.user,n=e.editor,r=(0,p.useState)(function(){var e=(0,v.W1)(n,z.Et);return e&&e.length?e[0]:(0,v.xN)(function(){return z.Et},n,"")}),o=r[0],i=r[1];(0,p.useEffect)(function(){if(o&&n)return function(){var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,o)}},[o,n]);var s=(0,v.iZ)({draftComment:o,clearDraftComment:function(){o&&(null===(r=(s=n.commands).removeDraftComments)||void 0===r||r.call(s,[o]));var e,t,r,s,a=(0,v.xN)(function(){return z.Et},n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,a),i(a)},editor:n}),a=(0,p.useCallback)(function(e){var t=e.editor;i(function(e){return e?Z(Z({},e),{},{json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}):e})},[]);return(0,_.jsx)(v.Ag,{draftComment:o,user:t,onCommentDraftUpdate:a,onCommentSave:s,commentIdToHighlight:null})},F=function(e){var t,n=e.onClose,w=e.editor,k=(0,g.CG)(b.yx),S=(0,h.$gs)().isConnected,I=(0,p.useState)(h.Ux9.Open),E=I[0],P=I[1],D=null==k?void 0:k.comments,A=null==k?void 0:null===(t=k.comments)||void 0===t?void 0:t.filter(function(e){return e.status===E}),T=(0,g.CG)(b.gh),R=(0,y.py)("comment",k)&&S,M=(0,y.SE)().user,z=(0,m.$m)(k,M),N=(0,p.useMemo)(function(){return(0,O.yd)({items:A||[],sortBy:O.Yz,latestTimeGetterFn:O.z3})},[A]);return D&&k&&w?(0,_.jsxs)(s.k,{direction:"column",h:"100%",overflowX:"hidden",className:j.G,w:"100%",children:[(0,_.jsx)(L,{commentStatusFilter:E,setCommentStatusFilter:P,count:(null==A?void 0:A.length)||0,onClose:n}),(0,_.jsxs)(s.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,_.jsx)(x.V,{label:(0,_.jsx)(o.cC,{id:"pQvCbR"}),isConnected:S,mx:6}),z&&!M&&k&&(0,_.jsx)(v.IZ,{doc:k,accessLink:z}),R&&(0,_.jsx)(a.xu,{px:6,py:2,children:(0,_.jsx)(G,{user:M,editor:w})}),!(null!=A&&A.length)&&(0,_.jsxs)(c.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,_.jsx)(a.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,_.jsx)(l.E,{src:C.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,_.jsxs)(a.xu,{children:[(0,_.jsx)(d.X,{size:"xs",mb:2,children:"open"===E?(0,_.jsx)(o.cC,{id:"W7i5f5"}):(0,_.jsx)(o.cC,{id:"mpDN1V"})}),(0,_.jsx)(u.x,{fontSize:"sm",children:(0,_.jsx)(o.cC,{id:"iB9OEi"})})]})]}),Object.entries(N).filter(function(e){return(0,r.Z)(e,2)[1].length}).map(function(e){var t=(0,r.Z)(e,2),o=t[0],a=t[1];return(0,_.jsxs)(s.k,{direction:"column",children:[(0,_.jsx)(f.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:{today:i.ag._({id:"ecUA8p"}),thisWeek:i.ag._({id:"yByRxz"}),earlier:i.ag._({id:"HPqZkW"})}[o]}),(0,_.jsx)(s.k,{direction:"column",children:a.map(function(e){return(0,_.jsx)(v.q5,{instanceType:"feed",userCanComment:R,editor:w,comment:e,selfUser:M,docId:null==k?void 0:k.id,editorMode:T,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id)})})]},o)})]})]}):null}},67004:function(e,t,n){n.d(t,{s:function(){return m}});var r=n(95235),o=n(82269),i=n(2784),s=n(31358),a=n(91437),c=n(93848),l=n(48842),d=n(82779),u=n(52322),f=["closePanel"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var m=function(e){var t=e.closePanel,n=(0,o.Z)(e,f),r=(0,l._)().editor;return(0,i.useEffect)(function(){var e=function(e){e.open&&t()};return c.pw.on(c.TI.POPUP_COMMENT_TOGGLED,e),function(){c.pw.on(c.TI.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,i.useEffect)(function(){return s.F7.on("keydown","COMMENT_FEED_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="comment-feed-panel"]')&&("Escape"===e.key&&t(),!0)})},[t]),(0,u.jsx)(a.s,h(h({},n),{},{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,u.jsx)(d.m,{onClose:t,editor:r})}))};m.panelPosition="right"},94603:function(e,t,n){n.d(t,{Rr:function(){return tH},QK:function(){return tB}});var r,o,i=n(95235),s=n(82269),a=n(11919),c=n(87202),l=n(2784),d=n(25232),u=n(31358),f=n(91437),p=n(36157),h=n(93848),m=n(17349),x=n(48842),g=n(64629),v=n(55452),j=n(71354),b=n(67887),y=n(49929),C=n(97261),O=n(65358),w=n(90090),k=n(36188),S=n(58166),I=n(86733),E=n(36895),P=n(91012),D=n(45650),A=n(72360),T=n(66724),R=n(18751),_=n(71812),L=n(52322),M=function(e){var t=e.onClose;return(0,L.jsxs)(j.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,L.jsx)(E.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,L.jsx)(_.K,{children:(0,L.jsx)(P.x,{children:(0,L.jsx)(v.cC,{id:"jVQv+Q"})})}),(0,L.jsx)(D.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,L.jsx)(y.G,{icon:I.faXmark}),onClick:t,children:(0,L.jsx)(v.cC,{id:"pqZJT2"})})]})},z=function(){return(0,L.jsxs)(A.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,L.jsx)(T.C,{children:(0,L.jsx)(v.cC,{id:"rvbk/4"})}),(0,L.jsx)(R.X,{children:(0,L.jsx)(v.cC,{id:"XNkIFY"})})]})},N=n(12677),Z=n(87254),G=n(8283),F=n(21891),U=n(25793),W=n(94659),V=n(27191),B=n(51495),H=n(67218),q=n(22550),K=n(28339),Y="40px",J=function(e){var t=e.value,n=e.onChange,r=e.onSubmit,o=e.isLoading,i=e.editor;e.resetMessages,(0,K.F1)(i);var s=i.state,a=s.selection,c=s.doc.textBetween(a.from,a.to,"\n"),d=(0,H.q)().hasEnoughCreditsToChat,u=(0,q.fg)(),f=(0,l.useRef)(null),p=(0,l.useState)(!1),h=p[0],m=p[1],x=a instanceof V.qv,g=a instanceof V.Bs,v=x&&"card"===a.node.type.name,j=a.empty||v?Z.ag._({id:"XrfE9D"}):x?Z.ag._({id:"CsUli9"}):g&&c?Z.ag._({id:"+NPPZN",values:{0:c.length>50?c.slice(0,50)+"...":c}}):Z.ag._({id:"/fY1js"}),O=(0,l.useCallback)(function(){f.current&&(f.current.style.height=Y,f.current.style.height="".concat(f.current.scrollHeight,"px"))},[]);return(0,l.useEffect)(function(){return i.on("selectionUpdate",O),function(){i.off("selectionUpdate",O)}},[i,O]),(0,l.useEffect)(function(){h?O():setTimeout(function(){m(!0),O()},400)},[h,j,O,t]),(0,L.jsxs)(G.U,{align:"end",children:[(0,L.jsx)(F.B,{size:"md",children:(0,L.jsx)(U.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:Y,minH:Y,ref:f,resize:"none",maxH:h?32:Y,bg:"white",shadow:"md",autoFocus:!0,isDisabled:!d,placeholder:j,value:t,onKeyPress:function(e){"Enter"===e.key&&t.length>0&&!o&&(e.preventDefault(),r())},onChange:function(e){return n(e.target.value)},pr:12})}),(0,L.jsx)(C.kH,{placement:"top",label:(0,L.jsxs)(W.g,{spacing:0,children:[(0,L.jsx)(P.x,{children:"Send request"}),!u&&(0,L.jsxs)(P.x,{color:"gray.400",children:[(0,L.jsx)(B.J,{type:"chatSuggestion",ml:0})," if successful"]}),(0,L.jsx)(C.f2,{shortcut:"Enter"})]}),children:(0,L.jsx)(b.h,{"aria-label":"Send message",isDisabled:!t||o,size:"sm",h:Y,w:Y,variant:"solid",icon:(0,L.jsx)(y.G,{icon:N.Fz,fixedWidth:!0}),onClick:r})})]})},X=n(60394),Q=n(31355),$=n(20406),ee=n(28526),et=n.n(ee),en=n(12483),er=n(58872),eo=n(26909),ei=n(28811),es=n(96412),ea=n(13089),ec=n(41701),el=n(90129),ed=n(29017),eu=n(48200),ef=n(53418),ep=n(86615),eh=n(16467),em=n(55304),ex=n(9433),eg=[new(function(e){(0,el.Z)(s,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(s);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function s(e){var t;return(0,es.Z)(this,s),t=o.call(this,e),(0,i.Z)((0,ec.Z)(t),"prompt",void 0),t.prompt=e.prompt,t}return(0,ea.Z)(s,[{key:"runPrompt",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.input,r=t.context,o=t.variables,i=t.trackFns,a=void 0===(s=t.retries)?2:s,e.next=3,(0,ep.I)(n,r.interactionId,{timeout:eh.VH.get("aiRequestTimeouts").basicReply});case 3:if(c=e.sent){e.next=6;break}throw Error("Couldn't get response from prompt");case 6:if(!((0,em.y)(c)||null!=c&&c.includes("```"))){e.next=11;break}if(!(a<=0)){e.next=9;break}throw new er.eo("Did not receive proper response after retries",{chatMessage:"Sorry, I am having trouble understanding. Could you try asking in a different way?",inputMessage:r.message,resp:c,interactionId:r.interactionId});case 9:return i.trackRequestRetry({interactionId:r.interactionId,retriesRemaining:a,resp:c}),e.abrupt("return",this.runPrompt({input:n,context:r,variables:o,trackFns:i,retries:a-1}));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"run",value:(r=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.context,r=t.addMessage,o=t.history,i=t.trackFns,s=t.provider,a={message:n.message},c=(0,ex.x)(o||[]),l=this.prompt.prepare({variables:a,history:c,params:{provider:s},interactionId:n.interactionId}),e.next=6,this.runPrompt({input:l,context:n,variables:a,trackFns:i,retries:1});case 6:d=e.sent,i.trackRequestComplete({taskContext:n,outputMessage:d}),r({from:"Designer",type:"text",message:d,resp:d,interactionId:n.interactionId});case 9:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),s}(ef.B))({key:"CHAT",description:"A general chat message, or a request that doesn't fit any of the previous categories",classifyExamples:["hi how are you","hdfoho;safjw","help there are bees everywhere","great job!","this looks ugly"],prompt:new eo.V({systemPromptOperation:ei.Run.BasicReplyChatSystem,userPromptOperation:ei.Run.BasicReplyChatUser,variables:["message"],params:{maxTokens:150,temperature:0}})})],ev=function(e){return eg.find(function(t){return t.key===e})},ej=function(e){return!!eg.find(function(t){return t.key===e})},eb=n(12741),ey=n(81161),eC=n(80389),eO=n(62142),ew=n(22681),ek=n(9850),eS=n.n(ek),eI=n(19159),eE=n(37057),eP=n(38105),eD=n(44719),eA=function(){function e(t){(0,es.Z)(this,e),(0,i.Z)(this,"type","insert-card"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"cardId",void 0),(0,i.Z)(this,"afterCardId",void 0),(0,i.Z)(this,"content",void 0),this.description=t.description,this.cardId=t.cardId,this.afterCardId=t.afterCardId,this.content=t.content}return(0,ea.Z)(e,[{key:"isApplied",value:function(e){return!!(0,eE.Bw)(e,this.cardId)}},{key:"getPreviewJson",value:function(e){var t=e.state.tr;this.transact(e,t);var n=eS()(t.doc.toJSON());return(0,eD.Y0)(n,this.cardId)}},{key:"apply",value:function(e){if(this.isApplied(e)){console.debug("[InsertCardModification] NOT applying modification, card already exists with cardId=".concat(this.cardId),{modification:this});return}var t=e.state.tr;this.transact(e,t),console.debug("[InsertCardModification] Applying modification",{modification:this}),e.view.dispatch(t),(0,eI.YS)({editor:e,cardId:this.cardId})}},{key:"transact",value:function(e,t){var n=(0,eE.Bw)(e,this.afterCardId);if(!n)return null;var r=(0,eD.Fr)(e,this.content),o=n.pos+n.node.nodeSize;t.insert(o,r.content.firstChild);var i=(0,eP.t)(t.doc.resolve(o),1);return t.setSelection(i),{from:o,to:o+t.doc.nodeAt(o).nodeSize}}},{key:"getContentForTracking",value:function(){return this.content}}]),e}(),eT=function(){function e(t){(0,es.Z)(this,e),(0,i.Z)(this,"type","remove-card"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"cardId",void 0),this.description=t.description,this.cardId=t.cardId}return(0,ea.Z)(e,[{key:"isApplied",value:function(e){return!(0,eE.Bw)(e,this.cardId)}},{key:"getPreviewJson",value:function(e){return null}},{key:"apply",value:function(e){var t=e.state.tr,n=(0,eE.Bw)(e,this.cardId);n&&(t.delete(n.pos,n.pos+n.node.nodeSize),console.debug("[RemoveCardModification] Applying modification",{modification:this}),e.view.dispatch(t))}},{key:"getContentForTracking",value:function(){return this.cardId}}]),e}(),eR=n(26349),e_=function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(){return(0,es.Z)(this,o),r.apply(this,arguments)}return(0,ea.Z)(o,[{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f,p,h,m,x;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editor,r=t.context,i=(o=t.response).suggestion,s=o.message,a=o.raw,i){e.next=3;break}throw new er.$D("No card content returned",{interactionId:r.interactionId,resp:a,chatMessage:s||(0,eR.az)(),inputMessage:r.message});case 3:return e.next=5,(0,ey.y)(i);case 5:return c=e.sent.content,l=eO.C2.generate(),d=(0,ew.hx)((0,ew.VA)(n)),u=(0,eC.S)({bodyContent:c.toJSON(),index:1,docFormatKey:d.key,theme:r.editorContext.theme,cardId:l}),x={from:"Designer",type:"suggestContent",resp:a,message:s||"How about this?",suggestions:[p={label:"New card",modification:f=new eA({description:"New Card",content:{type:"json",json:[u]},cardId:l,afterCardId:r.editorContext.card.cardId}),jsonContentPreview:f.getPreviewJson(n)},m={label:"Remove card",modification:h=new eT({description:"Remove card",cardId:l}),jsonContentPreview:h.getPreviewJson(n)}],interactionId:r.interactionId},console.debug("[addCard]",{insert:p,remove:m,message:s,html:i,cardLayout:u,content:c}),e.abrupt("return",{messages:[x],suggestionToApply:p});case 17:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),o}(eR.w6),eL=new eo.V({systemPromptOperation:ei.Run.AddCardSystem,userPromptOperation:ei.Run.AddCardUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:1e3}}),eM=new e_({key:"ADD_CARD",description:"Add a new card after the current one",classifyExamples:["add a new slide","add a card describing our mission","i want a new section for leadership development","make another card","on a new card compare the two options in a table"],classifyReply:"Ok, I'll start writing a new card...",prompt:eL}),ez=n(67397),eN=function(){function e(t){(0,es.Z)(this,e),(0,i.Z)(this,"type","set-card-layout"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"cardId",void 0),(0,i.Z)(this,"layout",void 0),this.description=t.description,this.cardId=t.cardId,this.layout=t.layout}return(0,ea.Z)(e,[{key:"isApplied",value:function(e){var t=(0,eE.Bw)(e,this.cardId);return t?t.node.attrs.layout===this.layout:(console.error("[SetCardLayoutModification.apply] Could not find card to update: ".concat(this.cardId,", maybe deleted")),!1)}},{key:"getPreviewJson",value:function(e){var t=e.state.tr;this.transact(e,t);var n=eS()(t.doc.toJSON()),r=(0,eD.Y0)(n,this.cardId);return console.debug("[SetCardLayoutModification.getPreviewJson] result",r),r}},{key:"apply",value:function(e){if(this.isApplied(e)){console.debug("[SetCardLayoutModification] NOT applying modification, card already has layout=".concat(this.layout),{modification:this});return}var t=e.state.tr;this.transact(e,t),console.debug("[SetCardLayoutModification] Applying modification",{modification:this}),e.view.dispatch(t),(0,eI.YS)({editor:e,cardId:this.cardId})}},{key:"transact",value:function(e,t){var n=(0,eE.Bw)(e,this.cardId);if(!n){console.error("[SetCardLayoutModification.apply] Could not find card to update: ".concat(this.cardId,", maybe deleted"));return}(0,ez.G)(e,t,n.pos,this.layout)}},{key:"getContentForTracking",value:function(){return this.layout}}]),e}(),eZ=function(){return Z.ag._({id:"ppX7+s"})},eG=new(function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(){return(0,es.Z)(this,o),r.apply(this,arguments)}return(0,ea.Z)(o,[{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editor,r=t.context,t.rangeId,i=(o=t.response).suggestion,s=o.raw,a=o.message,i){e.next=3;break}throw new er.$D("No card layout returned",{resp:s,chatMessage:eZ(),inputMessage:r.message,interactionId:r.interactionId});case 3:if((0,eE.ol)(i)){e.next=6;break}throw console.error("Invalid card layout:",i),new er.$D("Invalid card layout: ".concat(i),{resp:s,chatMessage:eZ(),inputMessage:r.message,interactionId:r.interactionId});case 6:return c=new eN({description:Z.ag._({id:"nyQWMb"}),cardId:r.editorContext.card.cardId,layout:i}),l={label:Z.ag._({id:"nyQWMb"}),modification:c,jsonContentPreview:c.getPreviewJson(n)},d=new eN({description:Z.ag._({id:"HxF6Fk"}),cardId:r.editorContext.card.cardId,layout:r.editorContext.card.attrs.layout}),u={label:Z.ag._({id:"HxF6Fk"}),modification:d,jsonContentPreview:d.getPreviewJson(n)},f={from:"Designer",type:"suggestContent",resp:s,message:a||Z.ag._({id:"pMSbe+"}),interactionId:r.interactionId,suggestions:[l,u]},e.abrupt("return",{messages:[f],suggestionToApply:l});case 12:case"end":return e.stop()}},e)})),function(e){return n.apply(this,arguments)})}]),o}(eR.w6))({key:"MOVE_ACCENT_IMAGE",description:"Move or remove the accent image of the card. Use ADD_IMAGE to add accent images.",classifyExamples:["move the sand dune to the left","remove the cover photo"],classifyReply:"Ok, I will move the accent image to the left...",getTaskTarget:function(e){return e.card},prompt:new eo.V({systemPromptOperation:ei.Run.ChangeAccentImageLayoutSystem,userPromptOperation:ei.Run.ChangeAccentImageLayoutUser,variables:["html","message"],params:{temperature:.2,maxTokens:100}}),checkEnabled:function(e){return"blank"!==e.card.attrs.layout}}),eF=new eo.V({systemPromptOperation:ei.Run.ChangeContentSystem,userPromptOperation:ei.Run.ChangeContentUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:1e3}}),eU=new eR.w6({key:"CHANGE_CONTENT",description:"Rephrase, summarize, expand, change text formatting, add content, or express ideas differently.",classifyExamples:["condense this to just the key points","say this like a pirate","make this more formal","add a box about health benefits","add more text please","make the bullets red","make the text bigger","fill in the last  column","write something about ___","add ___ to the table"],classifyReply:"Ok, I'll try making it shorter...",prompt:eF}),eW=n(62670),eV=n(81333),eB=n(40163),eH=n(31470),eq=n(11558),eK=new eo.V({systemPromptOperation:ei.Run.RateImagesSystem,userPromptOperation:ei.Run.RateImagesUser,variables:["dataset"],params:{temperature:.1,maxTokens:100}}),eY=(r=(0,$.Z)(et().mark(function e(t,n){var r,o,i;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(e,t){var n=e.description,r=e.query;return"".concat(t+1,": ").concat(n,": ").concat(r)}).join("\n"),o=eK.prepare({variables:{dataset:r},history:[]}),e.next=4,(0,ep.I)(o,n,{timeout:eh.VH.get("aiRequestTimeouts").rateImages});case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0="";case 7:return i=e.t0,e.abrupt("return",i.split("\n").map(function(e){var t=e.split("-");return Number((0,eV.Z)(t,2)[1].trim())}));case 9:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)});function eJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eJ(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eQ={GOOGLE:"google",UNSPLASH:"unsplash",GIPHY:"giphy"},e$=new(function(e){(0,el.Z)(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(i);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function i(){return(0,es.Z)(this,i),o.apply(this,arguments)}return(0,ea.Z)(i,[{key:"getResponseData",value:(n=(0,$.Z)(et().mark(function e(t,n){var r,o,i,s;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.replaceAll(this.key,"").split("\n").map(function(){var e=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split(": "),o=(r=(0,eV.Z)(n,2))[0],i=r[1].split(",").map(function(e){return e.trim()}).slice(0,2),a="google"===(s=eQ[o.trim()]||"web")?"web":s,e.next=6,(0,eB.J)({queries:i,count:eH.x.count,provider:a,prefetch:!0,options:{gammaFeature:"aiChat"}});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:return console.debug("[SuggestImagesTask][getResponseData] allResults",r=e.sent.flat()),console.debug("[SuggestImagesTask][imageRatingData]",{imagesToRate:o=r.map(function(e){var t=e.image,n=e.query,r=e.provider,o=(0,eq.C)(t,n,r);return{description:(0,eq.K)(o)||"",query:n}})}),e.prev=6,e.next=9,eY(o,n);case 9:if(console.debug("[SuggestImagesTask][imageRatingValues]",{imageRatingValues:i=e.sent}),!(i.length!==r.length)){e.next=13;break}throw Error("Image rating values length does not match allResults length");case 13:return console.debug("[SuggestImagesTask][allResultsSorted]",{allResultsSorted:s=r.map(function(e,t){return eX(eX({},e),{},{rating:i[t]})}).sort(function(e,t){return t.rating-e.rating})}),e.abrupt("return",s);case 19:e.prev=19,e.t0=e.catch(6),console.warn("[SuggestImagesTask] Error rating images. Returing unsorted results.",e.t0);case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}},e,this,[[6,19]])})),function(e,t){return n.apply(this,arguments)})},{key:"getResponseMessages",value:(r=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.context,o=(r=t.response).message,i=r.raw,s=r.suggestion){e.next=3;break}throw new er.$D("No image results were returned",{resp:i,inputMessage:n.message,chatMessage:o||"I'm sorry, I wasn't able to find any images for this.",interactionId:n.interactionId});case 3:return e.next=5,this.getResponseData(s,n.interactionId);case 5:return a={from:"Designer",type:"suggestImages",suggestions:e.sent,resp:i,interactionId:n.interactionId,message:o||"Here are some suggestions:"},e.abrupt("return",{messages:[a]});case 8:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}]),i}(eR.w6))({key:"ADD_IMAGE",description:"Add images, or replace an existing image. Do not use for moving or removing images.",classifyExamples:["add a picture of a bus","find some different images","this needs a pic","show me dolphins","find a meme of stonks","give me more images","add a background image","i need a graph of population over time"],classifyReply:"Let me look for some good bus pictures...",getTaskTarget:function(e){return e.defaultRange},prompt:new eo.V({systemPromptOperation:ei.Run.SuggestImagesSystem,userPromptOperation:ei.Run.SuggestImagesUser,variables:["html","message"],params:{temperature:.7,maxTokens:500}})}),e0=n(75248);function e1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e1(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function e5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var e3=new(function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(){return(0,es.Z)(this,o),r.apply(this,arguments)}return(0,ea.Z)(o,[{key:"getResponseData",value:function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return e5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e5(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(e.matchAll(/^\/\/\s*(.*)$\n(.*)$/gm));try{for(r.s();!(t=r.n()).done;){var o=t.value,i=o[1],s=o[2];n.push({reason:i,value:s})}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f,p;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.editor,r=t.context,o=t.rangeId,s=(i=t.response).suggestion,a=i.message,c=i.raw,s){e.next=3;break}throw new er.$D("No suggestions found in response",{interactionId:r.interactionId,inputMessage:r.message,chatMessage:a||Z.ag._({id:"7KKeOM"})});case 3:return l=this.getResponseData(s).map(function(e){var t=new e0.O(n,{description:e.reason,content:{type:"html",html:e.value},rangeId:o});return e2(e2({},e),{},{modification:t})}),d=this.determineTaskTarget(r.editorContext).html,u=new e0.O(n,{description:Z.ag._({id:"HxF6Fk"}),content:{type:"html",html:d},rangeId:o}),f={reason:Z.ag._({id:"HxF6Fk"}),value:d,modification:u},p={from:"Designer",type:"suggestText",message:a||Z.ag._({id:"3YHvwF"}),resp:c,suggestions:[].concat((0,eb.Z)(l),[f]),interactionId:r.interactionId},e.abrupt("return",{messages:[p]});case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),o}(eR.w6))({key:"SUGGEST_TEXT",description:"Open-ended request to rephrase a sentence or paragraph",classifyExamples:["write a better headline","How else could i say this?","this feels too corporate","suggest a more engaging way to say this","give me a more interesting description"],classifyReply:"Let me think of some other headlines...",getTaskTarget:function(e){return e.selectionRange},prompt:new eo.V({systemPromptOperation:ei.Run.SuggestTextSystem,userPromptOperation:ei.Run.SuggestTextUser,variables:["html","message"],params:{temperature:.7,maxTokens:1e3}}),checkEnabled:function(e){var t=e.selection,n=t instanceof V.Bs,r=t.$from.parent.eq(t.$to.parent);return n&&!t.empty&&t.to-t.from<800&&r}}),e6=function(){function e(t,n){(0,es.Z)(this,e),(0,i.Z)(this,"type","change-theme"),(0,i.Z)(this,"description",void 0),(0,i.Z)(this,"themeId",void 0),this.description=n.description,this.themeId=n.themeId}return(0,ea.Z)(e,[{key:"apply",value:function(e,t){t.setThemeWithAccentImages(this.themeId)}},{key:"isApplied",value:function(e,t){return t.isThemeApplied(this.themeId)}},{key:"getPreviewJson",value:function(){return null}},{key:"getContentForTracking",value:function(){return this.themeId}}]),e}(),e4=function(e){(0,el.Z)(i,e);var t,n,r,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(i);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function i(){return(0,es.Z)(this,i),o.apply(this,arguments)}return(0,ea.Z)(i,[{key:"getResponseMessages",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,d,u,f,p,h;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.editor,r=t.context,i=(o=t.response).raw,s=o.suggestion,a=o.message,l=(c=t.themeModificationController).currentThemeId,d=c.isValidTheme,u=null==s?void 0:s.split("\n"),e.next=5,this.getFilteredSuggestions({ids:u,idToRemove:l,editor:n,isValid:d});case 5:if(0!==(f=e.sent).length){e.next=8;break}throw new er.$D("[SuggestContentTask] No themes provided in prompt response",{resp:i,chatMessage:Z.ag._({id:"GNHk+9"}),inputMessage:r.message,interactionId:r.interactionId});case 8:return p={label:Z.ag._({id:"HxF6Fk"}),themeId:l,modification:new e6(n,{description:Z.ag._({id:"HxF6Fk"}),themeId:l}),isOriginal:!0},h={from:"Designer",type:"suggestThemes",resp:i,message:a||Z.ag._({id:"pMSbe+"}),suggestions:[].concat((0,eb.Z)(f),[p]),interactionId:r.interactionId},e.abrupt("return",{messages:[h],suggestionToApply:f[0]});case 11:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getFilteredSuggestions",value:(r=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.ids,r=t.idToRemove,o=t.editor,i=t.isValid,!(!n||0===n.length)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,Promise.all(n.map(function(e){return i(e).then(function(t){return t?e:null})}));case 5:return s=e.sent.filter(function(e){return null!==e}).filter(function(e){return e!==r}).map(function(e){var t=new e6(o,{description:Z.ag._({id:"nyQWMb"}),themeId:e});return{label:Z.ag._({id:"nyQWMb"}),themeId:e,modification:t}}),e.abrupt("return",s);case 8:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})}]),i}(eR.w6),e8=new eo.V({systemPromptOperation:ei.Run.SuggestThemeSystem,userPromptOperation:ei.Run.SuggestThemeUser,variables:["html","message","outline"],params:{temperature:.7,maxTokens:100,model:"gpt-4"}}),e7=new e4({key:"SUGGEST_THEME",description:"Suggest a theme for the deck. This task will suggest themes based on the deck content or the prompt",classifyExamples:["change the theme","give me a blue theme","change the color palette","make this a dark theme","use a more colorful theme","let's change the look and the feel","change the theme to lilac and periwinkle","i'd like it to look more cheerful and welcoming"],classifyReply:"Let me find some themes...",prompt:e8}),e9=[eG,eW.a,eU,e3,e$,eM,e7],te=function(e){return e9.find(function(t){return t.key===e})},tt=function(e){return!!e9.find(function(t){return t.key===e})},tn=function(e){(0,el.Z)(o,e);var t,n,r=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,eu.Z)(o);if(t){var r=(0,eu.Z)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,ed.Z)(this,e)});function o(e){var t;return(0,es.Z)(this,o),t=r.call(this,e),(0,i.Z)((0,ec.Z)(t),"apology",void 0),(0,i.Z)((0,ec.Z)(t),"apologyLink",void 0),t.apology=e.apology,t.apologyLink=e.apologyLink,t}return(0,ea.Z)(o,[{key:"run",value:(n=(0,$.Z)(et().mark(function e(t){var n,r,o,i;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.classificationResult,r=t.addMessage,o=t.context,i=t.trackFns,r({from:"Designer",type:"unsupported",task:n.classification,message:this.apology,learnMoreLink:this.apologyLink,resp:n.resp,interactionId:o.interactionId}),i.trackRequestComplete({taskContext:o,outputMessage:this.apology});case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),o}(ef.B),tr=new tn({key:"CHANGE_CARD_BACKGROUND",description:"Change the background of the entire section.",classifyExamples:["make the background red","put a tunnel in the background","remove the background","get rid of the image in the background"],apology:"Sorry, I can't change backgrounds yet, but you can click on a card and change the background yourself. You can also change the doc background by clicking the Theme button."}),to=new tn({key:"CHANGE_FONT",description:"Change the font family or font style.",classifyExamples:["give me a more playful font","make the headings use arial","change the font to be more readable"],apology:"Sorry, I can't change fonts yet. But you can edit them yourself by creating a custom theme.",apologyLink:"https://gamma.app/public/o2he6ual8noal7u#card-82e40n78edir2x8"}),ti=new tn({key:"RESIZE_IMAGE",description:"Change the size of an image (its dimensions), or crop an image",classifyExamples:["make the image smaller","can you make the cat bigger","crop it so it's just the face","I want the disposition of the photos for more portrait instead of landscape"],apology:"Sorry, I can't resize images yet. But you can do it yourself by clicking on the image and dragging the boxes on the corners, or pressing the crop button above the image."}),ts=new tn({key:"EXPORT",description:"Export or download the deck into a different a format.",classifyExamples:["download as ppt","make a pdf","export to google slides"],apology:"Sorry, I can't export files yet. However, you can download a PDF yourself by using the Share menu."}),ta=new tn({key:"SPLIT_CARD",description:"Split a card into multiple cards, or move content between cards.",classifyExamples:["break this into two cards","split this up as multiple slides","put the gallery on the next card"],apology:"Sorry, I can't split cards or move things between them yet. However, you can split cards yourself by typing /split inside a card."}),tc=new tn({key:"NEW_DECK",description:"Create a whole new deck",classifyExamples:["i need a presentation about [topic]","write a whole document about animal","make me a landing page about this"],apology:"To make a new deck, go back to the home screen and click New with AI."}),tl=new tn({key:"CHANGE_MULTIPLE_CARDS",description:"Make changes across multiple cards at once",classifyExamples:["I want this entire deck to be summarized","combine the cards together in one","make the whole doc sound more professional","make the deck more consistent"],apology:"Sorry, I can only change one card at a time right now."}),td=new tn({key:"ADD_VIDEO",description:"Add a video or replace an existing video",classifyExamples:["add a youtube video about scrum","find videos of cats","i need more videos"],apology:"Sorry, I can't search for videos yet. You can embed video by copying the URL and pasting it into the card directly."}),tu=new tn({key:"ADD_FOOTNOTE",description:"Add a footnote to a card, or change footnotes",classifyExamples:["add a biography for him in a footnote","put the details into footnotes"],apology:"Sorry, I haven't learned to add footnotes yet. You can make footnotes by highlighting text and clicking the footnote button in the menu."}),tf=[tr,to,ti,ts,ta,new tn({key:"MOVE_CARD",description:"Move a card to a different position in the deck",classifyExamples:["shift the slide to the top","move this card to the bottom"],apology:"Sorry, I haven't learned to move cards yet. You can move them by hovering on the table of contents on the left side of the screen and dragging them around."}),tc,tl,td,tu,new tn({key:"ADD_CHART",description:"Add a chart, diagram, or graph",classifyExamples:["put this information into a scatter plot","add a card about market share using a pie chart","i need to display this as a flow chart","create a diagram illustrating the interactions and relationships","can you change the card to have a line graph","turn this into a gantt chart","could you do this as a funnel diagram"],apology:"Sorry, Gamma doesn't support charts yet. You can paste in images of charts from other tools, or type /diagram in the editor to draw your own."}),new tn({key:"ANIMATION",description:"Add animations to a card or edit animations",classifyExamples:["animate transitions","make the text appear one by one","fade in the images","make the bullets fly in"],apology:'Sorry, Gamma doesn\'t support custom animations yet. You can animate line by line by going into Present mode and pressing S for "spotlight".'}),new tn({key:"FOLLOW_LINK",description:"Read content from an external website",classifyExamples:["go to this website and add the content to this card http://www.example.com/","here is his linkedin page now add the details https://www.linkedin.com/...","add the images from https://medium.com/posts/2022/9/6/..."],apology:"Sorry, I'm not able to open links and read the content."})],tp=function(e){return tf.find(function(t){return t.key===e})},th=new eo.V({variables:["message","taskList","ackExamples","html","cardHtml"],systemPromptOperation:ei.Run.ClassifySystem,userPromptOperation:ei.Run.ClassifyUser,params:{maxTokens:100,temperature:.2}}),tm=[].concat((0,eb.Z)(e9),(0,eb.Z)(tf),(0,eb.Z)(eg)),tx="\uD83D\uDE14 Sorry, I didn't understand your request. Could you please try asking a different way?",tg=(o=(0,$.Z)(et().mark(function e(t){var n,r,o,i,s,a,c,l,u,f,p,h;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,r=t.context,o=t.history,i=t.provider,a=(s=tb(tm,r.editorContext)).ackExamples,c=s.taskList,l=s.enabledTasks,u=ty(o),f=th.prepare({variables:{message:n,ackExamples:a,taskList:c,html:r.editorContext.defaultRange.html,cardHtml:r.editorContext.card.html},params:{provider:i},history:u}),console.debug("[AIChat classify] Getting classification",{classifyHistory:u,input:f}),e.next=7,(0,ep.I)(f,r.interactionId,{timeout:d.VH.get("aiRequestTimeouts").classify});case 7:if(h=tj(p=e.sent,l)){e.next=15;break}return console.debug("Failed classification, trying again...",{resp:p,parsedResp:h}),e.next=13,(0,ep.I)(f,r.interactionId);case 13:h=tj(p=e.sent,l);case 15:if(h){e.next=17;break}return e.abrupt("return",{type:"UNKNOWN",classification:"UNKNOWN",ack:tx,resp:p||""});case 17:return console.debug("[AIChat classify] Got classification",{resp:p,parsedResp:h}),e.abrupt("return",h);case 19:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)}),tv="Ok, I'll get right on it.",tj=function(e,t){if(e){var n,r=e.split("\n"),o=null===(n=r[0])||void 0===n?void 0:n.trim().toUpperCase();if(t.find(function(e){return e.key===o})){var i=r[1];return{classification:o.trim(),ack:i.includes(o.trim())?tv:i||("UNKNOWN"!==o?tv:tx),resp:e,type:"CLASSIFICATION"}}}},tb=function(e,t){var n=e.filter(function(e){return!t||!e.checkEnabled||e.checkEnabled(t)});return{taskList:n.map(function(e){var t;return"".concat(e.key,": ").concat(e.description,"\n").concat(null===(t=e.classifyExamples)||void 0===t?void 0:t.map(function(e){return"- ".concat(e)}).join("\n"))}).join("\n\n"),ackExamples:n.filter(function(e){return e.classifyExamples&&e.classifyExamples.length>0&&e.classifyReply}).map(function(e){return"Request:\n".concat(e.classifyExamples[0],"\nResponse:\n").concat([e.key,e.classifyReply].join("\n"))}).join("\n\n"),enabledTasks:n}},ty=function(e){return e.slice(-7).map(function(e){return"User"===e.from?{role:ei.XaP.User,content:e.message}:e.isClassification?{role:ei.XaP.Assistant,content:e.resp}:null}).filter(function(e){return!!e})},tC=n(84426),tO=n(64805),tw=n(65618),tk=n(12132),tS=n(44934),tI=n(25478),tE=n(78985),tP=n(78871),tD=n(76085),tA=function(e,t){var n=e.state.doc.slice(t.from,t.to).content;return(0,tI.c)(e,n)},tT=function(e,t){var n=e.state.selection,r=(0,tP.Ru)(n.$from,eE.KH)[0],o=r&&(0,S.NE)(r.node,r.pos);if(!r||!o)throw Error("Cant find parent card for selection ".concat(n));var i={from:r.pos,to:r.pos+r.node.nodeSize},s={from:o.pos+1,to:o.pos+o.node.nodeSize-1},a=n.$from.blockRange(n.$to),c={from:a.start,to:a.end},l={range:(0,tD.bb)(e.state,s),html:tA(e,s)},d={range:(0,tD.bb)(e.state,n),html:tA(e,n)},u={range:(0,tD.bb)(e.state,c),html:tA(e,c)},f=n instanceof V.qv&&(0,eE.KH)(n.node)||n.empty||0===d.html.trim().length||n instanceof V.qv&&n.node.isAtom,p=!n.$from.parent.eq(n.$to.parent)||0===a.$from.parentOffset&&a.$to.parentOffset===a.$to.parent.content.size,h=d,x="selectionRange";f?(h=l,x="cardContent"):p&&(h=u,x="blockRange");var g=tR(t),v=(0,m.Pu)(t.getState());return{card:{cardId:r.node.attrs.id,range:(0,tD.bb)(e.state,i),html:tA(e,i),attrs:r.node.attrs},cardContent:l,blockRange:u,selectionRange:d,defaultRange:h,selection:n,outline:g,selectedDefaultRange:x,theme:v}},tR=function(e){var t=e.getState(),n=(0,m.X9)(t),r=(0,tE.mT)(t);return Object.keys(n.tree).map(function(e){var t;return null===(t=r.find(function(t){return t.id===e}))||void 0===t?void 0:t.title}).filter(function(e){return!!e}).join("\n")},t_=n(2032),tL=function(e){var t,n=e.editor,r=e.addMessage,o=e.getMessageHistory,i=(0,l.useState)("idle"),s=i[0],a=i[1],c=(0,p.qr)(),d=(0,t_.E)(),u=(0,H.q)().hasEnoughCreditsToChat,f=(0,tw.T)(),h=(0,tk.g5)();return{sendMessage:(0,l.useCallback)((t=(0,$.Z)(et().mark(function e(t){var i,s,l,p,m,x,g,v,j,b,y,C,O;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.message,n){e.next=3;break}return e.abrupt("return");case 3:if(s=void 0,l=void 0,p=void 0,m=(0,tO.nZ)(),e.prev=7,s=tT(n,c),console.debug("[AIChat] starting interaction",l={interactionId:m,startTime:performance.now(),message:i,editorContext:s,docId:n.gammaDocId}),x=o(),r({from:"User",type:"text",message:i,interactionId:m}),d.trackRequestSent(l,h),u){e.next=16;break}return e.abrupt("return");case 16:return a("classifying"),e.next=19,tg({message:i,context:l,history:x,provider:h});case 19:if(g=e.sent,d.trackClassification({taskContext:l,classification:g.classification}),a("fetching"),console.debug("[AIChat] Starting task",{taskContext:l,classification:g.classification,history:x}),"UNKNOWN"!==g.type){e.next=28;break}r({from:"Designer",type:"text",message:g.ack,resp:g.resp,isClassification:!0,interactionId:m}),d.trackRequestComplete({taskContext:l,outputMessage:g.ack}),e.next=47;break;case 28:if(!ej(g.classification)){e.next=34;break}return v=ev(g.classification),e.next=32,v.run({editor:n,addMessage:r,context:l,classificationResult:g,history:x,trackFns:d,themeModificationController:f,provider:h});case 32:case 38:e.next=47;break;case 34:if(!tp(g.classification)){e.next=40;break}return j=tp(g.classification),e.next=38,j.run({editor:n,context:l,addMessage:r,classificationResult:g,history:x,trackFns:d,themeModificationController:f,provider:h});case 40:if(!tt(g.classification)){e.next=47;break}return r({from:"Designer",type:"text",message:g.ack||"Sure, let me see what I can do...",resp:g.resp,isClassification:!0}),b=o(),y=te(g.classification),e.next=46,y.run({editor:n,context:l,addMessage:r,classificationResult:g,history:b,trackFns:d,themeModificationController:f,provider:h});case 46:p="chatSuggestion";case 47:e.next=54;break;case 49:e.prev=49,e.t0=e.catch(7),console.log("[AIChat.sendMessage] ERROR: ".concat(e.t0.message,"}"),{err:e.t0,taskContext:l}),C="Sorry, something unexpected happened. Please try again.",e.t0 instanceof er.Og?(r({from:"Designer",type:"text",message:O=e.t0.opts.chatMessage||C,resp:e.t0.opts.resp,interactionId:m}),d.trackRequestError({errorName:e.t0.name,interactionId:m,outputMessage:O,errorMessage:e.t0.message,resp:e.t0.opts.resp})):(en.Tb(e.t0),r({from:"Designer",type:"text",message:C,interactionId:m}),d.trackRequestError({errorName:e.t0.name,interactionId:m,outputMessage:C,errorMessage:e.t0.message,errorCode:(0,tC.uc)(e.t0)[0]}));case 54:p&&(0,tS.d)(p),a("idle");case 56:case"end":return e.stop()}},e,null,[[7,49]])})),function(e){return t.apply(this,arguments)}),[n,c,o,r,d,u,f,h]),status:s}};function tM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tz=function(e){var t=e.editor,n=e.scrollSelector,r=e.onClose,o=(0,l.useState)(""),s=o[0],c=o[1],u=(0,d.ye)("openAiStatus"),f=(0,p.TL)(),h=(0,w.As)("editor"),m=(0,p.qr)(),x=(0,p.CG)(Q.AZ),I=(0,p.CG)(Q.Q_),E=(0,l.useState)(null),P=E[0],D=E[1],A=(0,l.useCallback)(function(){return(0,Q.AZ)(m.getState())},[m]),T=(0,l.useCallback)(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tM(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({timestamp:Date.now()},e);f((0,Q.Hz)({message:t}))},[f]),R=(0,l.useCallback)(function(){f((0,Q.mc)())},[f]),_=tL({addMessage:T,getMessageHistory:A,editor:t}),N=_.status,Z=_.sendMessage;(0,l.useEffect)(function(){var e=n&&document.querySelector(n);e&&requestAnimationFrame(function(){e.scrollTop=e.scrollHeight})},[n,x]);var G="idle"!==N;(0,l.useEffect)(function(){if(I.length&&!G){var e=I[0],t=e.task,n=e.id;!1===t.submit?c(t.message):Z({message:t.message}),f((0,Q.VB)({id:n}))}},[G,Z,f,I]);var F=(0,l.useCallback)(function(){if(P&&t){var e=document.querySelector('[data-card-id="'.concat(P,'"]')),n=(0,w.v4)(e,100);null!=n&&n.yAxisInView||h.scrollElementIntoView({element:e})}},[t,h,P]),U=(0,l.useCallback)(function(e){F(),Z({message:e})},[F,Z]),W=(0,l.useCallback)(function(){U(s),c("")},[U,s]);return((0,l.useEffect)(function(){if(t){var e=function(){var e=(0,S.AQ)(t,t.state.selection.from);e&&D(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),function(){t.off("selectionUpdate",e)}}},[t]),t)?"DOWN"===u?(0,L.jsx)(M,{onClose:r}):(0,L.jsxs)(a.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===u&&(0,L.jsx)(z,{}),(0,L.jsx)(X.rN,{scrollSelector:n,messages:x,editor:t,sendMessage:U,isLoading:G,onClose:r}),(0,L.jsxs)(j.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,L.jsx)(J,{editor:t,value:s,onChange:c,onSubmit:W,isLoading:G,resetMessages:R}),(0,L.jsx)(O.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:k.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,L.jsx)(C.kH,{label:(0,L.jsx)(v.cC,{id:"5eg0kp"}),placement:"top",children:(0,L.jsx)(b.h,{variant:"ghost",colorScheme:"blackAlpha",color:"currentColor","aria-label":"reset-chat",icon:(0,L.jsx)(y.G,{icon:g.Yc}),onClick:R,position:"absolute",left:4,top:1,isRound:!0})})]}):null},tN=n(23026),tZ=n(97907),tG=function(e){var t=e.onClose;return(0,L.jsx)(a.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,L.jsx)(tZ.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:t})})},tF=["closePanel"];function tU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tU(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tV="design-partner-panel-wrapper",tB=function(e){var t=e.toggleDesignPartnerPanel,n=e.isDesignPartnerPanelOpen,r=e.editor,o=(0,d.ye)("aiChat"),i=(0,p.TL)();(0,l.useEffect)(function(){return function(){i((0,Q.mc)())}},[]);var s=(0,p.CG)(m.hN);(0,l.useEffect)(function(){!s&&n&&t()},[s,n,t]),(0,l.useEffect)(function(){var e,t;r&&(null===(e=(t=r.commands).setSalOpen)||void 0===e||e.call(t,n))},[r,n]),(0,l.useEffect)(function(){if(o)return tN.T.on("toggle",function(e){t(e.config)})},[t,o]),(0,l.useEffect)(function(){if(o)return h.pw.on("queueDesignPartnerTask",function(e){i((0,Q.Lj)({task:e})),t({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",e)})},[i,o,t]),(0,l.useEffect)(function(){if(o&&s){var e=(0,c.ZP)("mod+shift+S");return u.F7.on("keydown","DESIGN_PARTNER_PANEL",function(n){return!!e(n)&&(t(),!0)})}},[t,o,s])},tH=function(e){var t=e.closePanel,n=(0,s.Z)(e,tF),r=(0,x._)().editor;return(0,l.useEffect)(function(){return u.F7.on("keydown","DESIGN_PARTNER_PANEL",function(e){return!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)})},[t]),(0,L.jsx)(f.s,tW(tW({},n),{},{bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,L.jsxs)(a.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:tV,w:"100%",children:[(0,L.jsx)(tG,{onClose:t}),(0,L.jsx)(tz,{editor:r,scrollSelector:".".concat(tV),onClose:t})]})}))};tH.panelPosition="right"},81510:function(e,t,n){n.d(t,{m:function(){return b}});var r=n(95235),o=n(55452),i=n(11919),s=n(45650),a=n(84103),c=n(36895),l=n(97261),d=n(2784),u=n(95828),f=n(22550),p=n(36188),h=n(57560),m=n(34972),x=n(61528),g=n(52322);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var b=function(e){var t=(0,m._i)().docId,n=(0,h.Yy)(),r=(0,p.z$)(),v=(0,d.useCallback)(function(){null==r||r.track(p.AA.MADE_WITH_GAMMA_CLICKED,{doc_id:t})},[r,t]),b=(0,f.dU)();return void 0===b||b?null:(0,g.jsx)(i.k,j(j(j({},(0,x.s2)()?{display:"flex",justifyContent:"center",m:6,position:"relative"}:{position:"fixed",right:[1,6],bottom:[1,4]}),e),{},{children:(0,g.jsx)(l.Wk,{isDark:n,children:(0,g.jsx)(s.z,{as:a.r,onClick:v,variant:"plain",target:"_blank",href:"https://gamma.app",textDecoration:"none !important",leftIcon:(0,g.jsx)(c.E,{src:"/_next/static/media/GammaLogoGradient.43edb67f.svg",h:"1em"}),size:"sm",children:(0,g.jsx)(o.cC,{id:"vo61Ld",values:{GAMMA_PROPER_NOUN:u.N6}})})})}))}},75393:function(e,t,n){n.d(t,{VN:function(){return f},rJ:function(){return d},us:function(){return u}});var r=n(2784),o=n(25232),i=n(36157),s=n(19159),a=n(17349),c=n(33932),l="disable-card-size-animations",d=function(){var e=(0,o.ye)("autoZoomToFit"),t=(0,i.CG)(a.Kk);return null!=t?t:e},u=function(){var e=(0,i.CG)(a.i2),t=(0,r.useRef)(),n=d(),o=!c.Pv&&n;(0,r.useEffect)(function(){var n=!t.current;t.current=e;var r=n?s.nY:s.id/4;e&&o&&setTimeout(function(){document.body.classList.add(l),f(),setTimeout(function(){document.body.classList.remove(l)},s.id/2)},r)},[e,o])},f=function(){var e=(0,i.bh)(),t=document.documentElement.clientHeight,n=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');n&&(e.dispatch((0,a.Ic)({zoomLevel:1})),setTimeout(function(){var r=n.scrollHeight,o=t/r;if(c.QX)o=Math.max(t/r,.7);else{if(o<.7)return;o=Math.floor(10*o)/10}e.dispatch((0,a.Ic)({zoomLevel:o})),console.debug("[zoomPresentModeToFit] zooming",JSON.stringify({viewportHeight:t,cardHeight:r,targetZoom:o}))}))}},82757:function(e,t,n){n.d(t,{Z:function(){return et}});var r=n(81333),o=n(55452),i=n(87254),s=n(81927),a=n(8848),c=n(24798),l=n(11919),d=n(91012),u=n(4036),f=n(53738),p=n(73848),h=n(45650),m=n(55479),x=n(78116),g=n(56915),v=n(16796),j=n(64827),b=n(92619),y=n(2167),C=n(89190),O=n(80353),w=n(76648),k=n(97261),S=n(47655),I=n(31807),E=n(65903),P=n.n(E),D=n(2784),A=n(68650),T=n(28811),R=n(95828),_=n(3002),L=n(1243),M=n(56695),z=n(36188),N=n(58124),Z=n(19159),G=n(69663);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e,t){var n=[];return!function e(r){if(t(r)&&n.push(r),r.content){var o,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}(r.content);try{for(i.s();!(o=i.n()).done;){var s=o.value;e(s)}}catch(e){i.e(e)}finally{i.f()}}}(e),n},W=n(34972),V=n(63730),B=n(75156),H=n(52322),q=function(){return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(s.O,{w:"350px",h:12}),(0,H.jsx)(a.N,{mt:3,w:64,noOfLines:1})]})},K=function(e){var t=e.createdTime,n=e.editors,r=e.isLatest,i=e.onClick,s=e.showPaywall,a=e.paywallCount;if(!n||!n.length)return(0,H.jsx)(H.Fragment,{});var p=s?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",h=(0,H.jsxs)(c.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:p,maskImage:p},border:"none",isDisabled:s,opacity:"1 !important",onClick:i,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,H.jsxs)(l.k,{w:"100%",direction:"column",children:[(0,H.jsx)(d.x,{fontSize:"sm",children:P()((0,V.P9)(t))}),(0,H.jsx)(d.x,{fontSize:"xs",flex:1,children:n[0].displayName})]}),r&&(0,H.jsx)(u.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,H.jsx)(o.cC,{id:"wL3cK8"})})]});return s?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(k.kH,{placement:"top",isDisabled:!s,label:s?(0,H.jsx)(o.cC,{id:"PYTBm5",values:{paywallCount:a}}):void 0,children:(0,H.jsx)(f.xu,{mb:4,children:h})}),(0,H.jsx)(M.m,{isNarrow:!0,segmentEvent:z.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,H.jsx)(o.cC,{id:"mVKYtH"})})]}):h},Y=function(e){var t,n=(0,L.Yt)(),r=(0,D.useMemo)(function(){if("unlimited"===n)return{items:e,paywalledItems:[]};var t=parseInt(n),r=e.filter(function(e,n){return 0===n||(0,I.Z)(e.createdTime)>=new Date(Date.now()-864e5*t)}),o=e.slice(r.length,e.length),i=o.length?o[0]:null;return{items:r.concat(i?[i]:[]),paywalledItems:o}},[n,e]),o=r.items,i=r.paywalledItems;return{groupedSnapshots:(0,D.useMemo)(function(){return(0,V.yd)({items:o,sortBy:"createdTime"})},[o]),paywalledSnapshotId:null===(t=i[0])||void 0===t?void 0:t.id,paywallCount:i.length}},J=function(e){var t=e.groupedSnapshots,n=e.paywalledSnapshotId,s=e.paywallCount,a=e.onClick,c=e.showFetchMore,l=e.onFetchMoreClick,d=e.isFetchingMore;return(0,H.jsxs)(p.t,{w:"100%",children:[Object.entries(t).filter(function(e){return(0,r.Z)(e,2)[1].length}).map(function(e){var t=(0,r.Z)(e,2),o=t[0],c=t[1];return(0,H.jsxs)(D.Fragment,{children:[(0,H.jsx)(k.NZ,{px:4,py:2,mx:0,mt:2,children:{today:i.ag._({id:"ecUA8p"}),thisWeek:i.ag._({id:"yByRxz"}),earlier:i.ag._({id:"HGg4T/"})}[o]}),c.map(function(e,t){var r=e.createdTime,o=e.editors,i=e.id;return(0,H.jsx)(K,{onClick:function(){return a(i)},isLatest:0===t,createdTime:r,editors:o,showPaywall:n===i,paywallCount:s},i)})]},o)}),c&&(0,H.jsx)(h.z,{isLoading:d,onClick:l,children:(0,H.jsx)(o.cC,{id:"yQ2kGp"})})]})},X=function(){return(0,H.jsxs)(p.t,{w:"100%",children:[(0,H.jsx)(s.O,{h:16}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2}),(0,H.jsx)(s.O,{h:16,mt:2})]})},Q=function(e){var t=e.title,n=e.createdBy,r=e.createdTime,i=e.numSnapshots;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(d.x,{mt:1,children:(0,H.jsx)(o.cC,{id:"yf//Op",values:{0:(0,_.Dw)(r),1:(0,_.Dw)(r),numSnapshots:i}})}),(0,H.jsx)(d.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,H.jsx)(o.cC,{id:"JVHTIo",values:{0:null!=n&&n.displayName?null==n?void 0:n.displayName:"Unknown",1:(0,_.p6)(r,"PPp"),title:t}})})]})},$="snapshot-editor-root",ee=function(e){var t=e.id,n=e.doc,r=e.content,o=(0,D.useMemo)(function(){if(r)return U(r,function(e){return e.type===Z.W4}).map(function(e){var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,S.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[r,n]);return(0,H.jsx)(N.fb,{reduxData:{cards:o},initialContent:r,doc:n,docId:n.id,scrollingParentSelector:".".concat($),isInsideDrawer:!0},t)},et=function(e){var t=e.isOpen,n=e.onClose,i=e.doc,s=(0,m.p)(),a=(0,W._i)().getCollaborativeEditorInstance,c=(0,D.useState)(!1),d=c[0],u=c[1],p=(0,T.pfN)({variables:{docId:i.id,first:25},skip:!i||!t,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),S=p.loading,I=p.data,E=p.called,P=p.fetchMore,L=(0,T.opq)({nextFetchPolicy:"cache-only"}),M=(0,r.Z)(L,2),z=M[0],N=M[1],Z=N.loading,F=N.data,U=(null==I?void 0:I.snapshots.edges.map(function(e){return e.node}))||[],V=Y(U),K=V.groupedSnapshots,et=V.paywalledSnapshotId,en=V.paywallCount,er=null==I?void 0:I.snapshots.pageInfo,eo=!!(!et&&E&&(null==er?void 0:er.hasNextPage)&&(null==er?void 0:er.endCursor)),ei=(0,D.useCallback)(function(){null!=er&&er.hasNextPage&&null!=er&&er.endCursor&&(u(!0),P({variables:{after:er.endCursor}}).finally(function(){u(!1)}))},[P,null==er?void 0:er.endCursor,null==er?void 0:er.hasNextPage]),es=U[0];(0,D.useEffect)(function(){null!=es&&es.id&&z({variables:{snapshotId:es.id,docId:i.id}})},[i.id,z,null==es?void 0:es.id]);var ea=(0,B.$)(null==i?void 0:i.title),ec=null==i?void 0:i.createdBy,el=null==i?void 0:i.createdTime,ed=null==F?void 0:F.snapshot,eu=ed&&ed.id===i.currentSnapshotId;return(0,H.jsx)(k.Wk,{isDark:!1,children:(0,H.jsxs)(x.d,{placement:"bottom",onClose:n,isOpen:t,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,H.jsx)(g.Z,{}),(0,H.jsxs)(v.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,H.jsx)(j.o,{}),(0,H.jsxs)(b.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[S&&(0,H.jsx)(q,{}),i&&U&&(0,H.jsx)(Q,{numSnapshots:(null==U?void 0:U.length)||0,createdBy:ec,createdTime:el,title:ea})]}),(0,H.jsx)(y.f,{p:0,h:"100%",children:(0,H.jsxs)(l.k,{direction:"row",h:"100%",children:[(0,H.jsx)(f.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,H.jsxs)(C.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[S&&(0,H.jsx)(X,{}),!S&&U&&(0,H.jsx)(J,{onClick:function(e){z({variables:{snapshotId:e,docId:i.id}})},groupedSnapshots:K,paywalledSnapshotId:et,paywallCount:en,showFetchMore:eo,onFetchMoreClick:ei,isFetchingMore:d})]})}),(0,H.jsx)(l.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:$,css:{"--editor-width":"100%"},children:(0,H.jsxs)(l.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,H.jsx)(G.Y,{}),(!ed||Z)&&(0,H.jsx)(A.AA,{}),ed&&!Z&&(0,H.jsx)(ee,{id:ed.id,doc:i,content:null==ed?void 0:ed.content.default})]})})]})}),(0,H.jsx)(O.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,H.jsxs)(w.h,{spacing:4,children:[(0,H.jsx)(h.z,{variant:"ghost",onClick:n,children:(0,H.jsx)(o.cC,{id:"dEgA5A"})}),(0,H.jsx)(k.kH,{label:eu?(0,H.jsx)(o.cC,{id:"HJo72u"}):(0,H.jsx)(o.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,H.jsx)(h.z,{variant:"solid",isDisabled:!ed||eu,onClick:function(){if(ed){var e,t=null==U?void 0:null===(e=U.find(function(e){return e.id===ed.id}))||void 0===e?void 0:e.createdTime,r=a();if(r){r.commands.setContent(ed.content.default,!0);var i=ed.content.annotationsAbsolute;i?r.commands.restoreAnnotations(i):r.commands.clearAnnotations(),n(),s({title:(0,H.jsx)(o.cC,{id:"7ovf4C"}),description:(0,H.jsx)(o.cC,{id:"DTim6X",values:{0:t?(0,_.p6)(t,"PPp"):"selected snapshot",GAMMA_ARTIFACT_PROPER_NOUN:R.Yc}}),status:"success",duration:5e3,isClosable:!0})}}},children:(0,H.jsx)(o.cC,{id:"yKu/3Y"})})})]})})]})]})})}},52099:function(e,t,n){n.d(t,{U:function(){return z}});var r=n(81333),o=n(60670),i=n(54728),s=n(51434),a=n(94301),c=n(91333),l=n(10344),d=n(49929),u=n(2784),f=n(28811),p=n(70173),h=n(93848),m=n(5945),x=n(53503),g=n(17714),v=n(15767),j=n(60883),b=n(1123),y=n(53738),C=n(71354),O=n(98841),w=n(25925),k=n(22569),S=n(52322),I=(0,O.E)(y.xu),E=function(e){var t=e.commentFeedItems,n=e.editor,r=e.doc,o=e.user;return n&&o?(0,S.jsx)(C.K,{p:2,children:(0,S.jsx)(w.M,{initial:!1,children:t.map(function(e){return(0,S.jsx)(I,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,S.jsx)(k.q,{comment:e,editor:n,selfUser:o,docId:r.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id)})})}):null},P=n(95235),D=n(55479),A=n(38140),T=n(88914);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var L=function(e){return!!e.comment&&null!==e.timeout},M=function(e){var t=e.user,n=e.docId,o=e.docComments,i=void 0===o?[]:o,s=e.pauseExiration,a=void 0!==s&&s,c=e.duration,l=void 0===c?5e3:c,d=(0,D.p)(),p=null==t?void 0:t.id,h=(0,u.useMemo)(function(){if(!p)return null;var e=new A.default(T.v.KNOCK_PUBLIC_KEY);return e.authenticate(p),e},[p]),m=(0,u.useState)({}),x=m[0],g=m[1],v=(0,u.useRef)(!0),j=(0,u.useRef)(a);j.current=a,(0,u.useEffect)(function(){return function(){v.current=!1}},[]);var b=(0,u.useCallback)(function(){return g({})},[]),y=(0,u.useCallback)(function(e){g(function(t){return Object.entries(t).reduce(function(t,n){var o=(0,r.Z)(n,2),i=o[0],s=o[1];return(!0===e?-1===s.timeout:i===e)||(t[i]=s),t},{})})},[]);return(0,u.useEffect)(function(){a||y(!0)},[y,a]),(0,u.useEffect)(function(){Object.entries(x).forEach(function(e){var t=(0,r.Z)(e,2),n=t[0],o=t[1],s=o.entry;if(null===o.timeout){var a=s.data.commentId,c=null==i?void 0:i.find(function(e){return e.id===a});if(c){var d=setTimeout(function(){v.current&&(j.current?g(function(e){var t=_({},e);return t[n].timeout=-1,t}):y(n))},l);g(function(e){return _(_({},e),{},(0,P.Z)({},n,{entry:s,comment:c,timeout:d}))})}}})},[x,i,l,y]),(0,u.useEffect)(function(){if(h&&n){var e=h.feeds.initialize(T.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();e.on("messages.new",function(t){var o=t.entries,i=(0,r.Z)(o,1)[0];i.data.docId===n&&(g(function(e){return _(_({},e),{},(0,P.Z)({},i.id,{entry:i,timeout:null}))}),e.markAsSeen(i).then(function(){console.debug("New notification marked as seen")}).catch(function(e){console.error("Unable to mark notification as seen",e)}))});var o=f.C9N.on("status",function(e){var t=e.isConnected,n=h.client();t?n.connectSocket():n.disconnectSocket()});return function(){o(),t()}}},[n,d,h]),{reset:b,comments:Object.values(x).filter(L).map(function(e){return e.comment})}},z=function(e){var t,n=e.toggleCommentsPanel,y=e.isCommentsPanelOpen,C=e.doc,O=e.mode,w=(0,m.SE)().user,k=(0,x._i)().editor,I=(0,v.XI)(),P=(0,r.Z)(I,2),D=P[0],A=P[1],T=M({user:w,docId:null==C?void 0:C.id,docComments:null==C?void 0:C.comments,pauseExiration:A}),R=T.comments,_=T.reset,L=!!(k&&C&&C.comments);(0,u.useEffect)(function(){if(L){var e=(0,j.sY)().commentId;e&&h.pw.emit(h.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})}},[L]),(0,u.useEffect)(function(){(y||O===p.q.SLIDE_VIEW)&&_()},[y,_,O]);var z=!!R.length&&!y&&O!==p.q.SLIDE_VIEW,N=(null==C?void 0:null===(t=C.comments)||void 0===t?void 0:t.filter(function(e){return e.status===f.Ux9.Open}).length)||0;return(0,S.jsxs)(i.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:z,placement:"bottom",children:[(0,S.jsx)(s.x,{children:(0,S.jsx)(b.h,{onMouseDown:g.br,onClick:n,icon:(0,S.jsx)(d.G,{icon:o.Mz}),isActive:y,"aria-label":y?"Hide comments":"Show comments",borderRadius:5,children:N})}),(0,S.jsx)(a.h,{children:C&&(0,S.jsxs)(c.y,{bg:"white",shadow:"lg",border:"none",ref:D,children:[(0,S.jsx)(l.Q,{bg:"white"}),(0,S.jsx)(E,{editor:k,user:w,commentFeedItems:R,doc:C})]})})]})}},53182:function(e,t,n){n.d(t,{u:function(){return u}});var r=n(75695),o=n(55452),i=n(11919),s=n(49929),a=n(97261),c=n(23026),l=n(1123),d=n(52322),u=function(){return(0,d.jsx)(i.k,{children:(0,d.jsx)(a.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,d.jsx)(o.cC,{id:"EVnzPs"}),children:(0,d.jsx)(l.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",onClick:function(){c.T.emit("toggle",{})},icon:(0,d.jsx)(s.G,{icon:r.KC})})})})}},20466:function(e,t,n){n.d(t,{T:function(){return eW}});var r=n(95235),o=n(60697),i=n(2885),s=n(47557),a=n(55452),c=n(78116),l=n(56915),d=n(16796),u=n(64827),f=n(92619),p=n(2167),h=n(89190),m=n(73848),x=n(24798),g=n(53738),v=n(84520),j=n(95085),b=n(49929),y=n(97261),C=n(2784),O=n(77399),w=n(36157),k=n(93848),S=n(6946),I=n(17349),E=n(88550),P=n(81333),D=n(8097),A=n(60831),T=n(69943),R=n(97968),_=n(34302),L=n(87254),M=n(71354),z=n(40110),N=n(9088),Z=n(30893),G=n(45650),F=n(40771),U=n(63849),W=n(2575),V=n(91012),B=n(4036),H=n(8283),q=n(50390),K=n(71193),Y=n(54336),J=n(11919),X=n(20934),Q=n(52322);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var et=function(e){var t=e.updateDocSetting,n=(0,w.CG)(I.US),r=n.defaultFullBleed,o=n.defaultContentWidth,s=n.presentBackdrop,c=n.cardDimensions,l=(0,X.l)(c);return(0,Q.jsxs)(M.K,{spacing:5,mt:4,divider:(0,Q.jsx)(z.i,{}),children:[(0,Q.jsx)(en,{title:L.ag._({id:"jBvtuq"}),description:L.ag._({id:"Q3Qdcd"}),icon:_.qn,control:(0,Q.jsxs)(N.v,{isLazy:!0,children:[(0,Q.jsx)(Z.j,{minW:28,as:G.z,size:"sm",variant:"plain",leftIcon:(0,Q.jsx)(b.G,{icon:l.icon,fixedWidth:!0}),rightIcon:(0,Q.jsx)(b.G,{icon:D.pt}),style:{marginLeft:"1rem"},children:l.label()}),(0,Q.jsx)(F.q,{maxW:"400px",children:(0,Q.jsx)(U._,{value:c,type:"radio",onChange:function(e){t("cardDimensions",e)},children:Object.entries(X.b).map(function(e){var t=(0,P.Z)(e,2),n=t[0],r=t[1],o=r.label,i=r.description;return(0,Q.jsxs)(W.i,{value:n,children:[(0,Q.jsxs)(V.x,{children:[o(),"fluid"===n&&(0,Q.jsxs)(Q.Fragment,{children:[" ",(0,Q.jsx)(B.C,{colorScheme:"gray",ml:1,children:(0,Q.jsx)(a.cC,{id:"ovBPCi"})})]})]}),(0,Q.jsx)(V.x,{fontSize:"xs",color:"gray.500",children:i()})]},n)})})})]})}),(0,Q.jsx)(en,{title:L.ag._({id:"lklIf1"}),description:L.ag._({id:"aJ+ISV"}),icon:R.dH,value:"lg"===o,onChange:function(e){return t("defaultContentWidth",e?"lg":void 0)}}),(0,Q.jsx)(en,{title:L.ag._({id:"lsVq2Z"}),description:L.ag._({id:"u/0NJZ"}),icon:T.r9,value:"full"===r,onChange:function(e){return t("defaultFullBleed",e?"full":void 0)}}),(0,Q.jsx)(en,{title:L.ag._({id:"7VfbQM"}),description:L.ag._({id:"XZHPlI"}),icon:i.UH,value:s,onChange:function(e){return t("presentBackdrop",e)}}),(0,Q.jsxs)(M.K,{children:[(0,Q.jsx)(V.x,{fontSize:"xs",color:"gray.600",children:(0,Q.jsx)(a.cC,{id:"ymPKi7"})}),(0,Q.jsxs)(H.U,{alignItems:"flex-start",spacing:"4",children:[(0,Q.jsx)(eo,{label:L.ag._({id:"wl99H6"}),cardDimensions:l,isWide:"lg"===o,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,Q.jsx)(eo,{label:L.ag._({id:"GWjDlt"}),cardDimensions:l,isWide:"lg"===o,showBackdrop:s&&"full"!==r,scaleCardUp:!s||"full"===r})]})]})]})},en=function(e){var t=e.title,n=e.description,r=e.icon,o=e.children,i=e.helpDescription,s=e.value,a=e.onChange,c=e.control;return(0,Q.jsxs)(H.U,{alignItems:"flex-start",spacing:2,children:[r&&(0,Q.jsx)(V.x,{fontSize:"lg",width:8,maxW:8,children:(0,Q.jsx)(b.G,{icon:r,fixedWidth:!0})}),(0,Q.jsxs)(M.K,{spacing:4,flex:1,children:[(0,Q.jsxs)(M.K,{spacing:1,children:[(0,Q.jsxs)(q.X,{size:"sm",fontWeight:"semibold",children:[t," ",i?(0,Q.jsx)(y.Yq,{label:i,ml:1}):null]}),(0,Q.jsx)(V.x,{fontSize:"xs",color:"gray.600",children:n})]}),o]}),a&&(0,Q.jsx)(K.r,{isChecked:s,onChange:function(e){return a(e.target.checked)}}),c]})},er=function(e){var t=e.hideExtraLines;return(0,Q.jsxs)(M.K,{w:"100%",py:2,px:2.5,children:[(0,Q.jsx)(g.xu,{w:20,h:1.5,bg:"gray.200"}),(0,Q.jsxs)(H.U,{flex:"1",alignItems:"flex-start",children:[(0,Q.jsx)(Y.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,Q.jsx)(g.xu,{fontSize:"lg",children:(0,Q.jsx)(b.G,{icon:A.Vm})})}),(0,Q.jsxs)(M.K,{flex:"1",spacing:"1",children:[(0,Q.jsx)(g.xu,{h:1,bg:"gray.200"}),(0,Q.jsx)(g.xu,{h:1,bg:"gray.200"}),(0,Q.jsx)(g.xu,{h:1,bg:"gray.200"}),(0,Q.jsx)(g.xu,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,Q.jsx)(g.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},eo=function(e){var t=e.cardDimensions,n=e.showBackdrop,r=e.isWide,o=e.label,i=e.scaleCardUp,s={boxShadow:"".concat(n?"sm":""),w:"".concat(r?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(i?"scale(1.15)":"none")};return(0,Q.jsxs)(M.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,Q.jsx)(J.k,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,Q.jsx)(Y.o,ee(ee({},s),{},{ratio:t.aspectRatio,children:(0,Q.jsx)(g.xu,{children:(0,Q.jsx)(er,{hideExtraLines:r})})})):(0,Q.jsx)(M.K,ee(ee({},s),{},{children:(0,Q.jsx)(er,{hideExtraLines:r})}))}),(0,Q.jsx)(V.x,{fontSize:"xs",color:"gray.700",children:o})]})},ei=n(72360),es=n(48322),ea=n(41823),ec=n(34847),el=n(50860),ed=function(e){var t=e.editor,n=(0,w.CG)(I.Pu),r=(0,w.CG)(I.XV),o=(0,C.useCallback)(function(e){null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,Q.jsx)(el.o,{editor:t,background:r,updateNestedAttributes:o,defaultMessage:(0,Q.jsxs)(ei.b,{children:[(0,Q.jsx)(es.z,{}),(0,Q.jsx)(a.cC,{id:"dyXYfJ"})]}),isDark:(0,ea.wj)(n),isValidSource:ec.Rr})},eu=n(2046),ef=n(70287),ep=n(27777),eh=n(25793),em=n(88125),ex=n(28811),eg=n(78985),ev=n(25232),ej=n(75213),eb=n(1243),ey=n(96575),eC=n(67092),eO=n(56613),ew=n(55479),ek=n(93319),eS=n(21891),eI=n(92936),eE=n(79821),eP=n(76648),eD=n(60807),eA=n(84103),eT=n(65987),eR=n(38404),e_=n(8709),eL=n(65098),eM=function(e,t){var n;return null==e?void 0:null===(n=e.routes.find(function(e){return e.docId===t}))||void 0===n?void 0:n.path},ez=function(){var e=(0,ew.p)(),t=(0,e_.AA)().openPageSetup,n=(0,ev.ye)("sites"),r=(0,w.CG)(eR.yx),o=(0,w.CG)(eL.lH),i=(0,ex.qbt)(),s=(0,P.Z)(i,2),c=s[0],l=s[1].loading,d=eM(o,null==r?void 0:r.id),u=(0,C.useState)(function(){return(0,eT.es)(d||"")}),f=u[0],p=u[1],h=(0,C.useState)(function(){return(0,eT.es)(d||"")}),m=h[0],x=h[1],v=(0,eT.gT)({routes:(null==o?void 0:o.routes)||[],path:(0,eT.fJ)(f),docId:null==r?void 0:r.id}),j=!!v,b=m!==f&&!j,y=(0,C.useCallback)(function(){p(m)},[m]),O=(0,C.useCallback)(function(){if(b){if(!(null!=o&&o.id)||!(null!=r&&r.id)){console.error("Missing site or doc");return}var t=(0,eT.fJ)(f);c({variables:{input:{siteId:o.id,docId:r.id,path:t}},refetchQueries:["GetSite"]}).then(function(){x(f),p(f)}).catch(function(t){e({status:"error",title:(0,Q.jsx)(a.cC,{id:"dl5vwx"}),description:t.message}),console.error("[UrlSlugForm] Error setting route",t.message)})}},[b,null==r?void 0:r.id,f,c,null==o?void 0:o.id,e]);return n?(0,Q.jsxs)(M.K,{pb:6,children:[(0,Q.jsx)(M.K,{direction:"row",children:(0,Q.jsxs)(V.x,{children:[(0,Q.jsx)(a.cC,{id:"dq8+qI"})," "]})}),(0,Q.jsx)(ek.L,{}),(0,Q.jsx)(M.K,{spacing:2,children:(0,Q.jsx)(H.U,{spacing:1,children:(0,Q.jsxs)(eu.NI,{as:"fieldset",isInvalid:j,children:[(0,Q.jsx)(H.U,{children:(0,Q.jsxs)(eS.B,{children:[(0,Q.jsx)(eI.Ui,{children:"/"}),(0,Q.jsx)(ep.I,{isDisabled:l,bg:"white",flex:2,value:f,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),O())},onChange:function(e){p((0,eT.pi)(e.currentTarget.value))}}),(0,Q.jsx)(eE.R,{in:b,unmountOnExit:!0,children:(0,Q.jsx)(g.xu,{ml:2,children:(0,Q.jsxs)(eP.h,{w:"100%",children:[(0,Q.jsx)(G.z,{variant:"solid",isLoading:l,isDisabled:j,onClick:O,children:(0,Q.jsx)(a.cC,{id:"tfDRzk"})}),(0,Q.jsx)(G.z,{onClick:y,children:(0,Q.jsx)(a.cC,{id:"dEgA5A"})})]})})})]})}),v?(0,Q.jsx)(eD.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,Q.jsx)(V.x,{fontSize:"xs",children:(0,Q.jsx)(a.cC,{id:"DQaTdC",components:{0:(0,Q.jsx)(eA.r,{textDecoration:"underline",onClick:function(){return t(v.docId,"preview")}})}})})}):(0,Q.jsx)(eu.Q6,{fontSize:"sm",children:(0,Q.jsx)(M.K,{alignContent:"flex-start",justifyContent:"space-between",direction:"row",w:"100%",children:(0,Q.jsx)(M.K,{spacing:1,children:(0,Q.jsx)(V.x,{color:"gray.500",children:(0,Q.jsx)(a.cC,{id:"ZMlbHK"})})})})})]})})})]}):(0,Q.jsx)(Q.Fragment,{})},eN=n(15767),eZ=function(e){var t=e.updateDocSetting,n=(0,w.CG)(I.US).metaDescription,r=(0,ev.ye)("sites"),o=(0,w.CG)(I.yx),i=(0,w.CG)(eg.cn),s=(0,w.CG)(eg.$4),c=(0,C.useState)(function(){return(null==o?void 0:o.title)||""}),l=c[0],d=c[1],u=(0,C.useState)(function(){return n||""}),f=u[0],p=u[1],h=(0,ex.D1_)(),m=(0,P.Z)(h,1)[0],x=(0,C.useCallback)(function(e){o&&m({variables:{id:o.id,title:e},refetchQueries:r?["GetSite"]:void 0})},[o,r,m]),v=(0,eN.Kt)(x,300),j=(0,C.useCallback)(function(e){d(e.target.value.substring(0,eO.S8)),v(e.target.value.substring(0,eO.S8))},[v]),b=(0,C.useCallback)(function(e){t("metaDescription",e)},[t]),y=(0,eN.Kt)(b,300),O=(0,w.CG)(eg.NN),k=null==O?void 0:O.previewUrl,S=(0,eb.dU)(null==o?void 0:o.organization),E=(0,ej.U)(l||i,S),D=(0,ej.V)(f||s,S);return(0,Q.jsxs)(M.K,{spacing:4,children:[(0,Q.jsxs)(eu.NI,{children:[(0,Q.jsxs)(H.U,{justifyContent:"center",children:[(0,Q.jsx)(ef.l,{flex:"1",children:(0,Q.jsx)(a.cC,{id:"MHrjPM"})}),(0,Q.jsx)(em.W,{length:l.length||0,idealLength:eO.si,maxLength:eO.S8})]}),(0,Q.jsx)(ep.I,{value:l,placeholder:i||L.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:function(e){"Enter"===e.key&&x(l)},onChange:j,"data-title-input":!0})]}),(0,Q.jsx)(ez,{}),(0,Q.jsxs)(eu.NI,{children:[(0,Q.jsxs)(H.U,{justifyContent:"center",children:[(0,Q.jsx)(ef.l,{flex:"1",children:(0,Q.jsx)(a.cC,{id:"Nu4oKW"})}),(0,Q.jsx)(em.W,{length:f.length||0,idealLength:eO.cl,maxLength:eO.Us})]}),(0,Q.jsx)(eh.g,{bg:"white",rows:4,value:f,placeholder:s||L.ag._({id:"2VBqT4"}),onChange:function(e){p(e.target.value.substring(0,eO.Us)),y(e.target.value.substring(0,eO.Us))}})]}),(0,Q.jsxs)(g.xu,{p:4,pt:3,bg:"gray.100",borderRadius:"md",children:[(0,Q.jsxs)(M.K,{spacing:2,mb:4,children:[(0,Q.jsx)(V.x,{size:"sm",children:(0,Q.jsx)(a.cC,{id:"h8sMnd"})}),(0,Q.jsx)(eG,{title:E,description:D,screenshotUrl:k})]}),(0,Q.jsxs)(M.K,{spacing:2,children:[(0,Q.jsx)(V.x,{size:"sm",children:(0,Q.jsx)(a.cC,{id:"d3xOlk"})}),(0,Q.jsx)(eF,{title:E,description:D,screenshotUrl:k}),(0,Q.jsx)(V.x,{fontSize:"sm",color:"gray.500",children:(0,Q.jsx)(a.cC,{id:"gkahtG"})})]})]}),(0,Q.jsx)(eC.V,{label:(0,Q.jsx)(a.cC,{id:"SDyz5I"}),segmentEvent:ey.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:o})]})},eG=function(e){var t=e.title,n=e.description,r=e.screenshotUrl;return(0,Q.jsxs)(g.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,Q.jsx)(Y.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,Q.jsx)(g.xu,{bgColor:"gray.200",bgImage:"url(".concat(r,")"),backgroundSize:"cover",position:"relative"})}),(0,Q.jsxs)(M.K,{px:4,py:3,spacing:1,children:[(0,Q.jsx)(V.x,{fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,Q.jsx)(V.x,{fontSize:"xs",noOfLines:2,children:n})]})]})},eF=function(e){var t=e.title,n=e.description;return(0,Q.jsxs)(M.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,Q.jsx)(V.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,Q.jsx)(V.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},eU=["cards","background","preview"],eW=function(e){var t=e.editor,n=(0,w.CG)(I.ke),P=(0,O.M)({id:"pageSetupDisclosure"}),D=P.isOpen,A=P.onClose,T=P.onOpen,R=(0,C.useState)(0),_=R[0],L=R[1];(0,C.useEffect)(function(){var e=function(e){L(eU.indexOf(e)),T()},t=E.T.on("openPageSetup",e),n=k.pw.on(k.TI.OPEN_PAGE_SETUP,e);return function(){t(),n()}},[T,A]);var M=(0,S.A)(t),z=(0,C.useCallback)(function(e,n){null==t||t.commands.updateNestedAttributesAtPos(0,{settings:(0,r.Z)({},e,n)})},[t]);return(0,Q.jsx)(y.Wk,{isDark:!1,children:(0,Q.jsxs)(c.d,{returnFocusOnClose:!1,isOpen:D,placement:"right",onClose:A,size:"md",blockScrollOnMount:!1,children:[(0,Q.jsx)(l.Z,{background:"none"}),(0,Q.jsxs)(d.s,{"data-testid":"page-setup-drawer",onKeyDown:M,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,Q.jsx)(u.o,{}),(0,Q.jsx)(f.x,{children:(0,Q.jsx)(a.cC,{id:"fvaOtb"})}),(0,Q.jsx)(p.f,{overflowX:"hidden",children:(0,Q.jsxs)(h.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:_,onChange:L,children:[(0,Q.jsxs)(m.t,{children:[(0,Q.jsxs)(x.O,{children:[(0,Q.jsx)(g.xu,{mr:2,children:(0,Q.jsx)(b.G,{icon:s.s2})}),(0,Q.jsx)(a.cC,{id:"Ccpbzh"})]}),(0,Q.jsxs)(x.O,{children:[(0,Q.jsx)(g.xu,{mr:2,children:(0,Q.jsx)(b.G,{icon:i.UH})}),(0,Q.jsx)(a.cC,{id:"GtJbUa"})]}),(0,Q.jsxs)(x.O,{children:[(0,Q.jsx)(g.xu,{mr:2,children:(0,Q.jsx)(b.G,{icon:o.g4})}),(0,Q.jsx)(a.cC,{id:"rdUucN"})]})]}),(0,Q.jsxs)(v.n,{children:[(0,Q.jsx)(j.x,{p:2,mt:4,children:(0,Q.jsx)(et,{editor:t,updateDocSetting:z},n)}),(0,Q.jsx)(j.x,{p:2,mt:4,children:(0,Q.jsx)(ed,{editor:t,updateDocSetting:z},n)}),(0,Q.jsx)(j.x,{p:2,mt:4,children:(0,Q.jsx)(eZ,{editor:t,updateDocSetting:z},n)})]})]})})]})]})})}},6948:function(e,t,n){n.d(t,{S:function(){return y}});var r=n(81333),o=n(55452),i=n(55479),s=n(20010),a=n(56915),c=n(48273),l=n(92619),d=n(64827),u=n(2167),f=n(27777),p=n(80353),h=n(71354),m=n(45650),x=n(2784),g=n(28811),v=n(95828),j=n(75156),b=n(52322),y=function(e){var t=e.isOpen,n=e.onClose,y=e.onSaveSuccess,C=e.docId,O=(0,i.p)(),w=(0,x.useRef)(null),k=(0,x.useState)(""),S=k[0],I=k[1],E=(0,g.D1_)(),P=(0,r.Z)(E,2),D=P[0],A=P[1].loading,T=function(){D({variables:{id:C,title:S}}).then(function(){I(function(){return""}),y()}).catch(function(e){console.error(e),O({title:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(o.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,b.jsxs)(s.u_,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:w,children:[(0,b.jsx)(a.Z,{}),(0,b.jsxs)(c.h,{children:[(0,b.jsx)(l.x,{children:(0,b.jsx)(o.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:v.Yc}})}),(0,b.jsx)(d.o,{}),(0,b.jsx)(u.f,{children:(0,b.jsx)(f.I,{ref:w,value:S,required:!0,placeholder:(0,j.$)(),onChange:function(e){return I(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&T()}})}),(0,b.jsx)(p.m,{children:(0,b.jsx)(h.K,{spacing:2,direction:"row",align:"center",children:(0,b.jsx)(m.z,{isLoading:A,isDisabled:A||!S||!S.length,onClick:function(){T()},children:(0,b.jsx)(o.cC,{id:"tfDRzk"})})})})]})]})}},85844:function(e,t,n){n.d(t,{S:function(){return k}});var r=n(12741),o=n(55452),i=n(11919),s=n(91012),a=n(53738),c=n(97261),l=n(2784),d=n(63426),u=n(95828),f=n(77399),p=n(36188),h=n(8763),m=n(66264),x=n(5430),g=n(5945),v=n(34972),j=n(59974),b=n(17714),y=n(1123),C=n(88550),O=n(6948),w=n(52322),k=function(e){var t,n,k=e.doc,S=e.showAnalytics,I=e.showSharePublic,E=e.showEmbed,P=(0,f.M)({id:"titleModalDisclosure"}),D=P.isOpen,A=P.onOpen,T=P.onClose,R=(0,f.M)({id:"analyticsModalDisclosure"}),_=R.isOpen,L=R.onClose,M=R.onOpen,z=(0,m.y)(),N=z.isSharePanelOpen,Z=z.onSharePanelOpen,G=z.onSharePanelClose,F=z.view,U=z.setView,W=(0,g.SE)(),V=W.user,B=W.currentWorkspace,H=(0,v._i)().editor,q=(0,g.py)("view",k),K=(0,g.py)("edit",k),Y=(0,g.py)("manage",k),J=(0,p.z$)();(0,l.useEffect)(function(){return C.T.on("openSharePanel",function(e){var t=e.view;Z(),U(t)})},[Z,U]);var X=(0,l.useCallback)(function(){null==J||J.track(p.AA.DOC_ANALYTICS_VIEWED,{docId:null==k?void 0:k.id,source:"share_panel",type:Y?"full":"personal"}),M()},[J,Y,null==k?void 0:k.id,M]);if(!q||!V||!k)return null;var Q=k.collaborators||[],$=k.channels||[],ee=(0,j.Hs)((0,r.Z)(Q).sort(function(e,t){return e.user.id===V.id?-1:t.user.id===V.id?1:0}).map(function(e){return e.user.id===V.id?"You":e.user.displayName||""}).concat(k.orgAccess?$.map(function(e){return e.name||""}):[])),et=(0,x.h_)(k,V),en=et?(0,x.Xp)()[et]:null,er=(0,x.Gi)(k,B);return null===en?(console.error("[SharePanel] Unknown VisibilityValue for doc",k),null):(0,w.jsxs)(i.k,{children:[(0,w.jsx)(c.kH,{label:(0,w.jsxs)(w.Fragment,{children:[er&&(0,w.jsx)(s.x,{fontWeight:"bold",children:(0,w.jsx)(o.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:u.Yc}})}),en.title(null==k?void 0:null===(t=k.organization)||void 0===t?void 0:t.name)?(0,w.jsx)(s.x,{children:en.title(null==k?void 0:null===(n=k.organization)||void 0===n?void 0:n.name)}):null,(0,w.jsx)(s.x,{fontSize:"xs",children:en.subtitle?en.subtitle(ee||""):""})]}),children:(0,w.jsx)("span",{children:(0,w.jsx)(y.h,{"data-guider-highlight":"share-button",onMouseDown:b.br,icon:(0,w.jsx)(a.xu,{children:(0,w.jsx)(h.aA,{visibility:en,isFromOtherOrg:er})}),isDisabled:!K,onClick:function(){k.title&&""!==k.title?Z():A()},children:(0,w.jsx)(o.cC,{id:"Z8lGw6"})})})}),D&&(0,w.jsx)(O.S,{onClose:T,isOpen:D,onSaveSuccess:function(){T(),Z()},docId:null==k?void 0:k.id}),(0,w.jsx)(h.WQ,{doc:k,editor:H,isSharePanelOpen:N,onSharePanelOpen:Z,onSharePanelClose:G,onAnalyticsPanelOpen:X,view:F,setView:U,showAnalytics:void 0===S||S,showSharePublic:void 0===I||I,showEmbed:void 0===E||E}),_&&(0,w.jsx)(d.r,{doc:k,onSharePanelOpen:Z,onAnalyticsPanelClose:L,isAnalyticsPanelOpen:_,mode:Y?"full":"personal"})]})}},41697:function(e,t,n){n.d(t,{w:function(){return E}});var r=n(81333),o=n(18504),i=n(55452),s=n(87254),a=n(55479),c=n(11919),l=n(91012),d=n(53738),u=n(49929),f=n(97261),p=n(2784),h=n(28811),m=n(77399),x=n(36157),g=n(36188),v=n(94467),j=n(57560),b=n(7752),y=n(76162),C=n(93848),O=n(17349),w=n(34972),k=n(1123),S=n(88550),I=n(52322),E=(0,p.memo)(function(){var e,t=(0,a.p)(),n=(0,h.$gs)().isConnected,E=(0,w._i)(),P=E.docId,D=E.getCollaborativeEditorInstance,A=(0,m.M)({id:"themeEditor"}),T=A.isOpen,R=A.onOpen,_=A.onClose,L=(0,m.M)({id:"themeStyleDrawer"}),M=L.isOpen,z=L.onOpen,N=L.onClose,Z=null===(e=D())||void 0===e?void 0:e.state.doc.toJSON(),G=(0,x.CG)(O.Pu),F=(0,b.g)(),U=(0,r.Z)(F,2),W=U[0],V=U[1],B=(0,p.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?t?V({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:e}}):V({type:"SET_THEME_EDITING",data:{theme:e}}):V({type:"NEW_BLANK_THEME"}),R()},[V,R]),H=D();(0,j.bb)(H,B);var q=(0,g.z$)(),K=(0,j.vi)({docId:P,editor:H}).updateDocThemeWithAccentImages,Y=(0,p.useCallback)(function(e){e.id!==G.id&&K(e.id).then(function(){null==q||q.track(g.AA.DOC_THEME_UPDATED,{doc_id:P,theme_id:e.id})}).catch(function(e){console.error(e),t({title:(0,I.jsx)(i.cC,{id:"Fulf8b",values:{0:e.message}}),position:"top",status:"error"})})},[q,G.id,P,t,K]);return(0,p.useEffect)(function(){var e=S.T.on("toggleThemeBlock",z),t=C.pw.on(C.TI.OPEN_THEME_DRAWER,z);return function(){e(),t()}},[z]),(0,I.jsxs)(c.k,{children:[(0,I.jsx)(f.kH,{label:n?(0,I.jsx)(i.cC,{id:"JkEyR8"}):(0,I.jsx)(i.cC,{id:"GvC+mL",components:{0:(0,I.jsx)(l.x,{}),1:(0,I.jsx)(l.x,{color:"gray.300"})}}),"aria-label":s.ag._({id:"JkEyR8"}),children:(0,I.jsx)(d.xu,{children:(0,I.jsx)(k.h,{"data-guider-highlight":"toolbar-theme-button",onClick:z,isDisabled:!n,icon:(0,I.jsx)(u.G,{icon:o.q2}),"data-testid":"toolbar-theme-button",children:(0,I.jsx)(i.cC,{id:"FEr96N"})})})}),(0,I.jsx)(y.G,{isOpen:M&&!T,onClose:N,openThemeEditor:B,setDocTheme:Y}),(0,I.jsx)(v.z,{isOpen:T,onClose:_,state:W,dispatch:V,docContent:Z,onThemeCreated:Y,disableDrawerTransition:!0})]})});E.displayName="ThemeBlock"},25015:function(e,t,n){n.d(t,{J:function(){return y},P:function(){return b}});var r=n(55452),o=n(55479),i=n(87202),s=n(2784),a=n(36157),c=n(90090),l=n(26658),d=n(37057),u=n(49950),f=n(96636),p=n(17349),h=n(78871),m=n(53503),x=n(53571),g=n(52322),v=(0,i.ZP)("mod+S"),j=(0,i.ZP)("mod+shift+O"),b=function(){var e=(0,o.p)();(0,s.useEffect)(function(){var t=function(t){v(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,g.jsx)(r.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},n=(0,x.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),function(){null==n||n(),window.removeEventListener("keydown",t)}},[e])},y=function(){var e=(0,a.qr)(),t=(0,a.TL)(),n=(0,m._i)().editor;(0,s.useEffect)(function(){if(n){var r=function(r){if(j(r)){r.preventDefault();var o=e.getState(),i=o.TipTap,s=i.cardIdMap,a=i.cardIds,c=i.memoState.expandedCards,d=(0,p.i2)(o),u=a.reduce(function(e,t){var n=!0===c[t],r=s.parents[t]||[],o=r.length>0,i=!d||r.includes(d);return o&&i&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]}),f=u.total,h=u.expanded,m=u.cardIds;t((0,p.bj)({disable:!0})),setTimeout(function(){t((0,p.bj)({disable:!1}))},100);var x=f===h;C(n,100,!x),(0,l.Nn)(m,x)}};return window.addEventListener("keydown",r),function(){window.removeEventListener("keydown",r)}}},[t,e,n])},C=function(e,t,n){for(var r=(0,c.cC)("editor"),o=void 0,i=200;i>0;i-=25){var s,a=(0,h.Je)(e,r.scrollSelector,i);if(null!==(s=a.pos)&&void 0!==s&&s.pos){var l=void 0;e.state.doc.nodeAt(a.pos.pos)?l=a.pos.pos:e.state.doc.nodeAt(a.pos.inside)&&(l=a.pos.inside),l&&(!o||l>o)&&(o=l)}}if(!o){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}var d=O(e,o,n);if(!d){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,x.wO)({element:d,requiredCookie:"cardCollapseDebug=true"});var u=+new Date,f=r.scroller.scrollTop,p=(0,x.LY)(d,r.scrollSelector),m=f-p,g=m<0?0:Math.max(m+200,0);!function e(){if(d){var n=(0,x.LY)(d,r.scrollSelector);r.scroller.scroll({top:f+(n-p-g)}),+new Date-u<t&&requestAnimationFrame(e)}}()},O=function(e,t,n){var r,o=e.state.doc.resolve(t),i=e.state.doc.nodeAt(t),s=(0,h.Sh)(e,t);if(!i){console.warn("[getElementToPin] nodeAt null for $pos",o);return}var a=(0,h.nv)(o,function(){return!0}).reverse();for(a.push({start:o.start(o.depth+1),pos:t,depth:o.depth,node:i});a.length;){var c=a.shift();if(c){var l=(0,d.KH)(c.node),p=(0,u.SA)(c.node),m=(0,f.CU)(c.node),x=l||c.node.isAtom?c.pos:c.start;if(s=(0,h.Sh)(e,x),!n&&l&&c.depth>2||p||m)break}}for(;(null===(r=s)||void 0===r?void 0:r.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s}},51587:function(e,t,n){n.d(t,{j:function(){return h}});var r=n(5632),o=n(2784),i=n(56969),s=n(36157),a=n(19159),c=n(12452),l=n(17349),d=n(70173),u=n(21875),f=n(34972),p=n(60883),h=function(){var e=(0,f._i)().editor,t=(0,r.useRouter)(),n=(0,s.qr)();(0,o.useEffect)(function(){if(e){t.beforePopState(function(e){return!e.as.startsWith("/docs/")});var r=i.fI.on("changed",function(t){var r,o=(0,p.sY)(t.url).cardId,i=n.getState(),s=(0,l.gh)(i);if(console.debug("[useHandleCardHash][handleURLChange]",{payload:t,cardId:o}),s===d.q.DOC_VIEW&&null!==(r=t.state)&&void 0!==r&&r.fromPos&&"pop"===t.method){var u=t.state,f=u.fromPos,h=u.fromPct;e.chain().scrollToPositionInCard(f,h||void 0).command(function(e){var t=e.tr;return(0,c.B0)(f)(t),!0}).run()}else{var m=(0,l.xb)(i)[0];(0,a.YS)({cardId:o||m,editor:e})}});return function(){t.beforePopState(function(){return!0}),r()}}},[e,t,n]),(0,o.useEffect)(function(){if(e){var t=(0,p.sY)(window.location.href).cardId;t&&(0,u.D)({cardId:t,method:"replace"})}},[e])}},53503:function(e,t,n){n.d(t,{dM:function(){return cC},Ur:function(){return cr},nz:function(){return c_},_i:function(){return tK._i},eT:function(){return tK.eT}});var r,o,i,s,a,c,l=n(93812),d=n(55452),u=n(87254),f=n(11919),p=n(91012),h=n(53738),m=n(34676),x=n(49929),g=n(97261),v=n(97729),j=n.n(v),b=n(2784),y=n(43997),C=n(28811),O=n(64914),w=n(25232),k=n(63705),S=n(99076),I=n(95235),E=n(81333),P=n(29106),D=n(75944),A=n(54728),T=n(51434),R=n(67887),_=n(91333),L=n(83897),M=n(96412),z=n(13089),N=n(41701),Z=n(90129),G=n(29017),F=n(48200),U=n(30733),W=n.n(U),V=n(12436),B=n.n(V),H=function(e){(0,Z.Z)(r,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=(0,F.Z)(r);if(t){var o=(0,F.Z)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(0,G.Z)(this,e)});function r(){var e;return(0,M.Z)(this,r),e=n.call(this),(0,I.Z)((0,N.Z)(e),"throttled",void 0),e.throttled=B()(function(t){e.emit("move",t)},200,{leading:!0}),document.addEventListener("mousemove",e.throttled),e}return(0,z.Z)(r,[{key:"cleanup",value:function(){document.removeEventListener("mousemove",this.throttled)}}]),r}(n(37438).v),q=W()(function(){return new H}),K=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=q(),r=(0,b.useState)(!1),o=r[0],i=r[1],s=(0,b.useRef)(t);return(0,b.useEffect)(function(){s.current=t},[t]),(0,b.useEffect)(function(){return n.on("move",function(t){s.current||i(e(t))})},[n,e]),o},Y=n(36157),J=n(17349),X=n(78739),Q=n(97526),$=n(22467),ee=n(25208),et=n(35232),en=n(63613),er=n(80891),eo=n(61374),ei=n(8283),es=n(96530),ea=n(71354),ec=n(50390),el=n(5766),ed=n(40110),eu=n(45650),ef=n(52322),ep=function(e){var t=e.label,n=e.shortcuts;return(0,ef.jsxs)(ei.U,{children:[n.map(function(e,t){return(0,ef.jsx)(es.T,{padding:1,children:e},t)}),(0,ef.jsx)(p.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},eh=function(e){var t=e.onClose;return(0,ef.jsx)(h.xu,{children:(0,ef.jsxs)(ea.K,{spacing:6,children:[(0,ef.jsxs)(ea.K,{spacing:1,children:[(0,ef.jsxs)(ei.U,{color:"gray.500",children:[(0,ef.jsx)(x.G,{icon:P.UF})," ",(0,ef.jsx)(ec.X,{size:"xs",fontWeight:"normal",children:(0,ef.jsx)(d.cC,{id:"h7MgpO"})})]}),(0,ef.jsx)(ec.X,{size:"md",children:(0,ef.jsx)(d.cC,{id:"UodEcE"})})]}),(0,ef.jsxs)(el.M,{spacing:3,columns:1,children:[(0,ef.jsx)(ep,{label:(0,ef.jsx)(d.cC,{id:"9xCxY6"}),shortcuts:[(0,ef.jsx)(x.G,{icon:eo.ac},"left"),(0,ef.jsx)(x.G,{icon:er.eF},"right")]}),(0,ef.jsx)(ep,{label:(0,ef.jsx)(d.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,ef.jsx)(ep,{label:(0,ef.jsx)(d.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,ef.jsx)(ed.i,{borderColor:"gray.300"}),(0,ef.jsx)(ep,{label:(0,ef.jsx)(d.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,ef.jsx)(ep,{label:(0,ef.jsx)(d.cC,{id:"/5i2oX"}),shortcuts:[(0,ef.jsx)(x.G,{icon:en.FP},"up"),(0,ef.jsx)(x.G,{icon:et.r5},"down")]}),(0,ef.jsx)(ep,{label:(0,ef.jsx)(d.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,ef.jsx)(eu.z,{size:"sm",variant:"solid",onClick:t,children:(0,ef.jsx)(d.cC,{id:"76gPWk"})})]})},"coach-bar")};function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eg=(0,b.memo)(function(){var e=(0,D.q)(),t=e.isOpen,n=e.onToggle,r=e.onClose,o=(0,X._)(Q.H.hasSeenCoachBar,!1),i=(0,E.Z)(o,2),s=i[0],a=i[1],c=(0,Y.CG)(J.Tf),l=(0,b.useCallback)(function(){s||a(!0),r()},[s,r,a]),d=!s||t,u=K((0,b.useCallback)(function(e){return e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150},[]));return(0,ef.jsx)(ee.H,{mr:c&&s&&!d&&!u?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,ef.jsxs)(A.J,{returnFocusOnClose:!1,isOpen:d,onClose:l,closeOnBlur:!0,children:[(0,ef.jsx)(T.x,{children:(0,ef.jsx)(R.h,{onClick:function(){t&&a(!0),n()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,ef.jsx)(x.G,{icon:P.UF})})}),(0,ef.jsx)(_.y,ex(ex({},$.Ro),{},{children:(0,ef.jsx)(L.b,{children:(0,ef.jsx)(eh,{onClose:l})})}))]})})});eg.displayName="PresentModeHelpWidget";var ev=n(95828),ej=n(1243),eb=n(88164),ey=n(38797),eC=n(70957),eO=n(40723),ew=n(81324),ek=n(57560),eS=n(58124),eI=n(74637),eE=n(94301),eP=n(35741),eD=n(82269),eA=n(20299),eT=n(46974),eR=n(48798),e_=n(85249),eL=n(20176),eM=n(36471),ez=n(1410),eN=n(46510),eZ=n(80304),eG=n(55479),eF=n(84103),eU=n(49294),eW=n(34638),eV=n(56143),eB=n(47655),eH=n(50381),eq=n.n(eH),eK=n(97705),eY=n(93506),eJ=n(98841),eX=n(25925),eQ=["children","style"];function e$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var e1={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},e2="custom"in eJ.E?eJ.E.custom(eK.m.div):(0,eJ.E)(eK.m.div),e5=(0,b.forwardRef)(function(e,t){var n,r,o=e.children,i=e.style,s=(0,eD.Z)(e,eQ),a=(0,eY.jC)("Menu",s);return(0,ef.jsx)(eK.m.div,e0(e0({ref:t,__css:{zIndex:null!==(n=e.zIndex)&&void 0!==n?n:null===(r=a.list)||void 0===r?void 0:r.zIndex},style:e0({},i)},s),{},{children:(0,ef.jsx)(eX.M,{children:(0,ef.jsx)(e2,{className:(0,m.cx)("chakra-menu__menu-list"),variants:e1,style:{transformOrigin:"top left"},initial:e1.exit,animate:e1.enter,exit:e1.exit,__css:e0({outline:0},a.list),children:o})})}))}),e3=n(17107),e6=["type"],e4=["icon","iconSpacing","command","commandSpacing","children"],e8=["className","children"],e7=["className"];function e9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e9(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tt=(0,e3.G)(function(e,t){var n=e.type,r=(0,eD.Z)(e,e6),o=(0,eY.jC)("Menu",r),i=r.as?null!=n?n:void 0:"button",s=te({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0},o.item);return(0,ef.jsx)(eK.m.button,te(te({ref:t,type:i},r),{},{__css:s,_hover:o.item._focus}))}),tn=(0,e3.G)(function(e,t){var n=e.icon,r=e.iconSpacing,o=e.command,i=e.commandSpacing,s=e.children,a=(0,eD.Z)(e,e4),c=n||o?(0,ef.jsx)("span",{style:{pointerEvents:"none",flex:1},children:s}):s;return(0,ef.jsxs)(tt,te(te({},a),{},{className:(0,m.cx)("chakra-menu__menuitem"),children:[n&&(0,ef.jsx)(tr,{fontSize:"0.8em",marginEnd:void 0===r?"0.75rem":r,children:n}),c,o&&(0,ef.jsx)(to,{marginStart:void 0===i?"0.75rem":i,children:o})]}))});tn.displayName="MenuItem";var tr=function(e){var t=e.className,n=e.children,r=(0,eD.Z)(e,e8),o=b.Children.only(n),i=b.isValidElement(o)?b.cloneElement(o,{focusable:"false","aria-hidden":!0,className:(0,m.cx)("chakra-menu__icon",o.props.className)}):null,s=(0,m.cx)("chakra-menu__icon-wrapper",t);return(0,ef.jsx)(eK.m.span,te(te({className:s},r),{},{__css:{flexShrink:0},children:i}))};tr.displayName="MenuIcon";var to=(0,e3.G)(function(e,t){var n=(0,eY.jC)("Menu",e);return(0,ef.jsx)(eK.m.span,te(te({ref:t},e),{},{__css:n.command,className:"chakra-menu__command"}))});to.displayName="MenuCommand";var ti=function(e){var t=e.className,n=(0,eD.Z)(e,e7),r=(0,eY.jC)("Menu",e);return(0,ef.jsx)(eK.m.hr,te(te({role:"separator","aria-orientation":"horizontal",className:(0,m.cx)("chakra-menu__divider",t)},n),{},{__css:r.divider}))};ti.displayName="MenuDivider";var ts=n(17714),ta=n(81065),tc=n(27442),tl=n(24466),td=["editor","openStyleDrawer","cardUrl","getPos","isNested","isFirstCard","isCollapsed","hasCardBackground","onClose","updateAttributes","previewContent"];function tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tp=(0,ef.jsx)(x.G,{icon:eZ.TX,fixedWidth:!0}),th=(0,ef.jsx)(x.G,{icon:eN.WM,fixedWidth:!0}),tm=(0,ef.jsx)(x.G,{icon:ez.O4,fixedWidth:!0}),tx=(0,ef.jsx)(x.G,{icon:eM.$,fixedWidth:!0}),tg=(0,ef.jsx)(x.G,{icon:eL.FP,fixedWidth:!0}),tv=(0,ef.jsx)(x.G,{icon:e_.oK,fixedWidth:!0}),tj=(0,ef.jsx)(x.G,{icon:eR.re,fixedWidth:!0}),tb=(0,ef.jsx)(x.G,{icon:eT.z1,fixedWidth:!0}),ty=(0,ef.jsx)(x.G,{icon:eA.UP,fixedWidth:!0}),tC=(0,b.forwardRef)(function(e,t){var n=e.editor,r=e.openStyleDrawer,o=e.cardUrl,i=e.getPos,s=e.isNested,a=e.isFirstCard,c=e.isCollapsed,l=e.hasCardBackground,h=e.onClose,m=e.updateAttributes,x=e.previewContent,g=(0,eD.Z)(e,td);console.debug("%c [<ManageCardMenu />] RENDER","background-color: limegreen");var v=(0,eG.p)(),j=(0,tl.K)(),y=(0,b.useCallback)(function(){m&&m({previewContent:null===x?"":null})},[m,x]),C=(0,b.useCallback)(function(){var e=i();if(e&&n){var t=n.state.doc.nodeAt(e),r=t&&(0,eB.getCardTitle)(t.toJSON());n.chain().deleteCard(e).focus().run();var o=u.ag._({id:"0MWv65",values:{displayTitle:r?'"'.concat(r,'"'):"card"}}),s=u.ag._({id:"9uI/rE"}),a=v({title:(0,ef.jsxs)(ei.U,{children:[(0,ef.jsx)(p.x,{noOfLines:1,children:o}),(0,ef.jsx)(eF.r,{textDecoration:"underline",onClick:function(){(0,eV.Yw)(n.state),v.close(a)},children:s})]}),status:"info",duration:3e3,position:"top"})}},[n,i,v]),O=(0,b.useCallback)(function(){var e=i();e&&(null==n||n.commands.duplicateCard(e))},[n,i]),w=(0,b.useCallback)(function(){var e=i();e&&(null==n||n.commands.unnestCard(e))},[n,i]),k=(0,b.useCallback)(function(){var e=i();e&&(null==n||n.chain().mergeCardsAtPos(e).focus().run())},[n,i]),S=(0,b.useCallback)(function(){r(0)},[r]),I=(0,b.useCallback)(function(){r(1)},[r]),E=(0,Y.CG)(J.hN),P=(0,eU.V)(o).onCopy,D=(0,eW.ff)("red.500","red.300"),A=(0,b.useCallback)(function(e){var t;if(e.target&&null!==(t=e.target)&&void 0!==t&&t.closest('[data-testid="open-share"]')){e.preventDefault();return}P(),v({title:u.ag._({id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[P,v]),T=(0,b.useCallback)(function(){var e=i();if(e&&n){var t=(0,ta.PZ)(n,e);if(!t){v({title:u.ag._({id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}eq()(t,{format:"text/html"}),v({title:u.ag._({id:"LHDpRL"}),status:"success",duration:3e3,position:"top"})}},[n,i,v]);return(0,ef.jsxs)(e5,tf(tf({},g),{},{zIndex:"popover",ref:t,onClick:h,"data-testid":"manage-card-menu",children:[(0,ef.jsx)(tn,{icon:(0,ef.jsx)(tc.x,{isLocked:!j}),onClick:A,"data-testid":"copy-card-link",children:(0,ef.jsx)(d.cC,{id:"F0YmUY"})}),(0,ef.jsx)(tn,{icon:tm,onClick:T,children:(0,ef.jsx)(d.cC,{id:"Bq0HJ4"})}),(0,ef.jsxs)(f.k,{direction:"column",display:E?"flex":"none",children:[(0,ef.jsx)(ti,{}),(0,ef.jsx)(tn,{icon:th,onClick:O,"data-testid":"duplicate-card",children:(0,ef.jsx)(d.cC,{id:"euc6Ns"})}),m&&s&&c&&(0,ef.jsx)(tn,{icon:""===x?tb:ty,onClick:y,"data-testid":"hide-preview",children:""===x?(0,ef.jsx)(d.cC,{id:"dK2evu"}):(0,ef.jsx)(d.cC,{id:"691flv"})}),r&&void 0!==l&&!c&&(0,ef.jsx)(tn,{icon:tj,onClick:S,onMouseDown:ts.br,"data-testid":"card-background",children:l?(0,ef.jsx)(d.cC,{id:"sIpTuZ"}):(0,ef.jsx)(d.cC,{id:"T6eZ9z"})}),r&&!c&&(0,ef.jsx)(tn,{icon:tp,onClick:I,onMouseDown:ts.br,"data-testid":"card-style",children:(0,ef.jsx)(d.cC,{id:"k7zVgS"})}),s?(0,ef.jsx)(tn,{icon:tv,onClick:w,"data-testid":"merge-into-parent-card",children:(0,ef.jsx)(d.cC,{id:"b+J8Wt"})}):!1!=s||a?null:(0,ef.jsx)(tn,{icon:tg,onClick:k,"data-testid":"merge-into-card-above",children:(0,ef.jsx)(d.cC,{id:"kV34zB"})}),(0,ef.jsx)(ti,{}),(0,ef.jsx)(tn,{icon:tx,color:D,onClick:C,"data-testid":"delete-card",children:(0,ef.jsx)(d.cC,{id:"cnGeoo"})})]})]}))}),tO=n(76236);function tw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tw(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tS=(0,b.memo)(function(e){var t=e.editor,n=(0,Y.CG)(tO.tk),r=n.isOpen,o=n.ref,i=n.options,s=(0,b.useState)(null),a=s[0],c=s[1],l=(0,eP.D)(o,a,{placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{boundary:"clippingParents"}},{name:"offset",options:{offset:[0,8]}}],strategy:"absolute"}).styles,d=(0,y.I0)(),u=(0,b.useCallback)(function(){d((0,tO.kG)({saveRef:!0}))},[d]),f=(0,b.useCallback)(function(){d((0,tO.kG)({saveRef:!1}))},[d]);return(0,eI.O)({ref:{current:a},handler:function(){r&&(u(),setTimeout(function(){d((0,tO.gQ)())},0))}}),(0,b.useEffect)(function(){return function(){return f()}},[]),(0,ef.jsx)(eE.h,{children:r&&i&&(0,ef.jsx)(tC,tk(tk({},i),{},{style:tk({},l.popper),onClose:f,ref:c,editor:t}))})}),tI=n(42028),tE=n(19260),tP=n(36188),tD=n(89089),tA=n(84636),tT=n.n(tA),tR=n(54073),t_=n.n(tR),tL=n(72338),tM=n(90090),tz=n(37057),tN=n(53571),tZ=n(70173),tG=function(e,t,n,r,o){var i=r-n,s=Math.max(i-Math.max(e-n,0)-Math.max(r-t,0),0),a=s/i,c=a>0&&s==t-e;return{overlap:a,viewing:o&&(c||a>.5||s>400),only:c}};function tF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var tU=function(e,t){var n=(0,tM.As)("editor"),r=(0,b.useState)(null),o=r[0],i=r[1],s=(0,b.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),a=(0,Y.CG)(J.gh),c=(0,Y.CG)(J.i2);(0,b.useEffect)(function(){s.current.presentingCardId=null!=c?c:null},[c]);var l=(0,Y.CG)(J.Q5);(0,b.useEffect)(function(){s.current.expandedCards=l},[l]),(0,b.useEffect)(function(){var e=document.querySelector(n.scrollSelector);if(e){i(e);var t=e.getBoundingClientRect().height;s.current.scrollTop=e.scrollTop,s.current.containerHeight=t}},[n.scrollSelector,s]),(0,b.useEffect)(function(){var e=t_()(function(){o&&(s.current.scrollTop=o.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),function(){return window.removeEventListener("scroll",e,!0)}},[o]),(0,b.useEffect)(function(){var e=t_()(function(){o&&(s.current.containerHeight=o.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[o]),(0,b.useEffect)(function(){if(e){if(a===tZ.q.SLIDE_VIEW){var r=setInterval(function(){t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return function(){return clearInterval(r)}}var o=setInterval(function(){if(!document.hidden){var r=s.current,o=r.scrollTop,i=r.containerHeight,a=r.expandedCards,c=o+i;tT()((0,tL.N2)(e.state.doc,tz.KH),function(e){return e.node.attrs.id}).map(function(t){var r,i=t.node.attrs.id,s=a[i];if(!s)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){var l=(0,tN.LY)(r,n.scrollSelector),d=r.offsetHeight+l;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tF(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:i},tG(o,c,l,d,s))}return null}).filter(function(e){return!!(null!=e&&e.viewing)}).forEach(function(e){t.emit("cardViewed",{cardId:e.id,interval:1e3})})}},1e3);return function(){return clearInterval(o)}}},[a,e,s,t,n.scrollSelector])},tW=function(e){var t=e.editor,n=e.backoffFactor,r=void 0===n?1:n,o=(0,tP.z$)(),i=(0,b.useState)(15e3),s=i[0],a=i[1];tU(t,tD.f);var c=(0,b.useCallback)(function(){tD.f.flush(),a(Math.min(s*r,12e4))},[r,s]);return(0,b.useEffect)(function(){if(o){tD.f.initialize(),tD.f.on("flush",function(e){for(var t=e.viewed,n=0,r=Object.entries(t);n<r.length;n++){var i=(0,E.Z)(r[n],2),s=i[0],a=i[1];o.trackDocEvent(tP.AA.CARD_VIEWED,{card_id:s,duration:a})}});var e=setInterval(function(){return c()},s);return function(){clearInterval(e),tD.f.destroy()}}},[o,s,c]),null},tV=n(5945),tB=n(13504),tH=n(75213),tq=n(54714),tK=n(34972),tY=n(38404),tJ=n(20406),tX=n(28526),tQ=n.n(tX),t$=n(78116),t0=n(56915),t1=n(16796),t2=n(64827),t5=n(2167),t3=n(80353),t6=n(76648),t4=n(58125),t8=n(30764),t7=n(68650),t9=n(94826),ne=n(75245),nt=n(41823),nn=n(11204),nr=n(78977),no=n(74358),ni=n(69663),ns=n(62288),na=n(15767);function nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var nl=b.createContext({enabled:!1,registerEditor:function(e,t){},getAllCards:function(){return[]},userMessage:"",setUserMessage:function(e){}});function nd(){return(0,b.useContext)(nl)}var nu=function(e){var t=e.children,n=(0,b.useRef)(new Map),r=(0,b.useRef)(""),o=(0,b.useRef)(function(e,t){n.current.set(e,t)}),i=(0,b.useRef)(function(){return Array.from(n.current.values()).map(function(e){var t,n;return null===(t=e.state.doc.firstChild)||void 0===t?void 0:null===(n=t.content.toJSON())||void 0===n?void 0:n[0]}).filter(Boolean)}),s=(0,b.useCallback)(function(e){r.current=e},[]);return(0,ef.jsx)(nl.Provider,{value:{enabled:!0,registerEditor:o.current,getAllCards:i.current,userMessage:r.current,setUserMessage:s},children:t})},nf=n(60282),np=n(12694),nh=n(56581),nm=n(27302),nx=n(420),ng=n(28617),nv=function(e){var t=e.cardId,n=e.onClick,r=(0,Y.CG)((0,nf.NB)(t)),o=(0,Y.CG)(J.Pu);return r?(0,ef.jsxs)(ea.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[r.variants.map(function(e){if(!e)return null;var i=e.label,s=e.card,a=e.id;return(0,ef.jsx)(nj,{theme:o,isSelected:r.selected===a,label:i,card:s,onClick:function(){n({cardId:t,variationId:a})}},a)}),r.variants.length<2&&(0,ef.jsx)(nm.M,{children:(0,ef.jsx)(nx.$,{})})]}):null},nj=function(e){var t=e.label,n=e.card,r=e.theme,o=e.isSelected,i=void 0!==o&&o,s=e.onClick,a=(0,b.useMemo)(function(){return(0,ng.vL)({docFlags:{cardLayoutsEnabled:!0}},[n])},[n]);return(0,ef.jsxs)(ea.K,{align:"start",children:[(0,ef.jsx)(f.k,{borderRadius:"md",bg:"white",shadow:i?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:void 0===s?function(){}:s,children:(0,ef.jsx)(f.k,{sx:no.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,ef.jsx)(no.m,{content:a,theme:r,isThumbnail:!0})})}),(0,ef.jsxs)(p.x,{fontSize:"sm",children:[i&&(0,ef.jsx)(nh.n,{boxSize:3,mr:2}),t]})]})};function nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nC="ai-wizard-editor-root",nO=function(e){var t=e.doc,n=e.cards,r=e.theme,o=void 0===r?ne.mU:r,i=(0,ns.R5)(o),s=(0,nt.wj)(o),a=(0,ns.wh)(i,s),c=(0,Y.TL)(),l=nd().registerEditor;return((0,b.useEffect)(function(){return function(){c((0,nf.mc)())}},[c]),t)?(0,ef.jsxs)(f.k,ny(ny({bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:nC},a),{},{children:[(0,ef.jsx)(ni.Y,{}),n.map(function(e,n){var r,o=null===(r=e.attrs)||void 0===r?void 0:r.id;return o?(0,ef.jsx)(nw,{doc:t,cardId:o,cardIndex:n,cardJSON:e,onCreate:function(e){l(o,e)}},o):null})]})):null},nw=function(e){var t=e.cardId,n=e.cardIndex,r=e.cardJSON,o=e.doc,i=e.onCreate,s=(0,Y.TL)(),a=(0,b.useState)(null),c=a[0],l=a[1],d=nd().userMessage,u=(0,np.b)({editor:c});(0,b.useEffect)(function(){c&&u({doc:c.state.doc,cardId:t,message:d})},[u,c,t,n,d]);var p=(0,b.useMemo)(function(){return(0,nn.vL)({docFlags:{cardLayoutsEnabled:!0}},[r])},[r]),h=(0,Y.CG)((0,nf.a4)(t));(0,na.vm)(function(){if(c&&h){var e=(0,tz.Bw)(c,t);e&&c.commands.command(function(t){var n=t.tr,r=t8.NB.fromJSON(c.schema,h.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,r),!0})}},[c,h,t],[h]);var m=(0,b.useCallback)(function(e){var n=e.cardId,r=e.variationId;c&&n===t&&s((0,nf.dx)({cardId:t,variantId:r}))},[s,c,t]);return null!=o&&o.id?(0,ef.jsxs)(f.k,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:no.n,my:-8,children:[(0,ef.jsx)(nv,{cardId:t,onClick:m}),(0,ef.jsx)(nr.y,{initialContent:p,onCreate:function(e){var t=e.editor;l(t),i(t)},doc:o,docId:o.id,scrollingParentSelector:".".concat(nC),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null},nk=n(77399);function nS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nS(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nE=function(e){var t=(0,nk.M)({id:"cardSuggestionDrawer"}),n=t.isOpen,r=t.onClose,o=t.onOpen,i=(0,Y.CG)(J.Pu),s=(0,b.useState)(function(){return(0,t4.xC)({reducer:Y.Ct})})[0];return(0,ef.jsx)(y.zt,{store:s,children:(0,ef.jsx)(nP,nI(nI({},e),{},{isOpen:n,onClose:r,onOpen:o,theme:i}))})},nP=(r=function(e){var t,n=e.doc,r=e.editor,o=e.theme,i=e.isOpen,s=e.onClose,a=e.onOpen,c=(0,b.useState)([]),l=c[0],u=c[1],f=(0,b.useState)(null),p=f[0],h=f[1],m=nd(),x=m.getAllCards,g=m.setUserMessage,v=(0,b.useCallback)(function(){s(),u([]),h(null)},[s]),j=(0,b.useCallback)(function(){if(v(),r){var e={type:"document",content:x()};console.log("[handleConfirm] contentToUse",e);var t=1,n=r.state.doc.nodeSize-2,o=(0,tz.Bw)(r,p);if(o){n=(t=o.pos)+o.node.nodeSize;var i=e.content.find(function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===p});if(!i){console.warn("[handleConfirm] Count not find card to use");return}e=i}r.commands.command(function(o){return o.tr.replaceRangeWith(t,n,t8.NB.fromJSON(r.schema,e)),!0})}},[v,r,p,x]),y=(0,b.useCallback)((t=(0,tJ.Z)(tQ().mark(function e(t,n,r){return tQ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(),h(n),u(t.toJSON().content[0].content.filter(function(e){var t;return null===n||(null===(t=e.attrs)||void 0===t?void 0:t.id)===n})),g(r);case 5:case"end":return e.stop()}},e)})),function(e,n,r){return t.apply(this,arguments)}),[a,g]);return(0,b.useEffect)(function(){if(r)return t9.T.on("openSuggestionEditor",function(e){var t=e.cardId,n=e.userMessage;y(r.view.state.doc,t,n)})},[r,y]),(0,ef.jsxs)(t$.d,{placement:"bottom",onClose:s,isOpen:i,trapFocus:!0,isFullHeight:!0,children:[(0,ef.jsx)(t0.Z,{}),(0,ef.jsxs)(t1.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,ef.jsx)(t2.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,ef.jsx)(t5.f,{p:0,h:"100%",children:l.length>0&&n?(0,ef.jsx)(nO,{doc:n,cards:l,theme:o}):(0,ef.jsx)(t7.AA,{})}),(0,ef.jsx)(t3.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,ef.jsxs)(t6.h,{spacing:4,children:[(0,ef.jsx)(eu.z,{variant:"ghost",onClick:s,children:(0,ef.jsx)(d.cC,{id:"dEgA5A"})}),(0,ef.jsx)(eu.z,{variant:"solid",onClick:j,children:(0,ef.jsx)(d.cC,{id:"7VpPHA"})})]})})]})]})},(0,b.memo)(function(e){return(0,ef.jsx)(nu,{children:(0,ef.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e))})})),nD=n(67004),nA=n(94603),nT=n(31145),nR=n(49626),n_=n(61751),nL=n(49747),nM=n(56133),nz=n(39097),nN=n.n(nz),nZ=n(35093),nG=n(26018),nF=n(16673),nU=n(42781),nW=n(61528),nV=n(60883),nB=n(76035),nH=n(50281),nq=n(54119),nK=n(77779),nY=n(2046),nJ=n(70287),nX=n(25793),nQ=n(14304),n$=n.n(nQ),n0=n(64805),n1=[{key:"bad",label:(0,ef.jsx)(d.cC,{id:"XSfVsn"}),ariaLabel:function(){return u.ag._({id:"XSfVsn"})},icon:nK.Kf,color:"red"},{key:"meh",label:(0,ef.jsx)(d.cC,{id:"0ASQJH"}),ariaLabel:function(){return u.ag._({id:"0ASQJH"})},icon:nq.C4,color:"yellow"},{key:"good",label:(0,ef.jsx)(d.cC,{id:"9ZYnL5"}),ariaLabel:function(){return u.ag._({id:"9ZYnL5"})},icon:nH.I3,color:"green"}],n2=function(e){var t=e.docId,n=e.isDark,r=e.interactionId,o=(0,b.useState)(null),i=o[0],s=o[1],a=(0,b.useState)(!1),c=a[0],l=a[1],u=(0,b.useState)(""),f=u[0],m=u[1],g=(0,b.useRef)(null),v=(0,eG.p)(),j=(0,b.useCallback)(function(e){s(e),(0,n0.fM)({rating:e,doc_id:t,interactionId:r}),v({title:(0,ef.jsx)(d.cC,{id:"2gZOCV"}),status:"success",position:"top",duration:1e3}),setTimeout(function(){var e;null==g||null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},200)},[t,r,v]),y=(0,b.useCallback)(function(e){e||((0,n0.XH)({feedback:n$().sanitize(f),doc_id:t,interactionId:r}),v({title:(0,ef.jsx)(d.cC,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0})),l(!0)},[t,f,r,v]);return(0,ef.jsx)(h.xu,{p:4,borderRadius:"lg",border:"1px solid",borderColor:n?"whiteAlpha.100":"gray.200",position:"relative",children:c?(0,ef.jsxs)(p.x,{color:n?"green.400":"green.600",textAlign:"center",children:[(0,ef.jsx)(x.G,{icon:nB.faCircleCheck})," ",(0,ef.jsx)(d.cC,{id:"SOk0EB"})]}):(0,ef.jsxs)(ea.K,{spacing:4,children:[(0,ef.jsxs)(ea.K,{alignItems:"center",spacing:"1",children:[(0,ef.jsx)(p.x,{fontSize:"sm",color:n?"whiteAlpha.800":"gray.500",children:(0,ef.jsx)(d.cC,{id:"TxHdBh"})}),i?(0,ef.jsxs)(p.x,{textAlign:"center",color:n?"green.400":"green.600",children:[(0,ef.jsx)(x.G,{icon:nB.faCircleCheck})," ",(0,ef.jsx)(d.cC,{id:"SOk0EB"})]}):(0,ef.jsx)(p.x,{children:(0,ef.jsx)(d.cC,{id:"cNzndx"})})]}),(0,ef.jsx)(ei.U,{fontSize:"xl",width:"100%",children:n1.map(function(e){var t=e.key,r=e.ariaLabel,o=e.label,s=e.icon,a=e.color,c=i===t;return(0,ef.jsx)(n5,{ariaLabel:r,label:o,icon:s,color:a,onClick:function(){return j(t)},isSelected:c,isDisabled:!!(i&&!c),isDark:n},t)})}),i&&(0,ef.jsxs)(nY.NI,{textAlign:"center",children:[(0,ef.jsx)(nJ.l,{fontSize:"sm",color:n?"whiteAlpha.800":"gray.500",children:"good"===i?(0,ef.jsx)(d.cC,{id:"AmM8eQ"}):(0,ef.jsx)(d.cC,{id:"8+bwIa"})}),(0,ef.jsx)(nX.g,{value:f,onChange:function(e){m(e.target.value)},placeholder:"",size:"sm",mb:"4"}),(0,ef.jsxs)(t6.h,{spacing:"4",ref:g,children:[(0,ef.jsx)(eu.z,{variant:"text",onClick:function(){y(!0)},children:(0,ef.jsx)(d.cC,{id:"6Uau97"})}),(0,ef.jsx)(eu.z,{variant:"solid",isDisabled:""===f,onClick:function(){return y(!1)},children:(0,ef.jsx)(d.cC,{id:"hQRttt"})})]})]})]})})},n5=function(e){var t=e.label,n=e.ariaLabel,r=e.icon,o=e.color,i=e.isSelected,s=e.onClick,a=e.isDisabled,c=e.isDark;return(0,ef.jsx)(g.kH,{label:t,placement:"top",children:(0,ef.jsx)(R.h,{"aria-label":n(),boxShadow:"none",bg:i?c?"".concat(o,".200"):"".concat(o,".100"):c?"whiteAlpha.300":"gray.50",_disabled:{opacity:"".concat(i?1:.5),cursor:"not-allowed"},color:i?c?"".concat(o,".600"):"".concat(o,".500"):c?"whiteAlpha.800":"gray.500",_hover:{backgroundColor:"".concat(o,".100"),color:"".concat(o,".500")},flex:1,icon:(0,ef.jsx)(p.x,{fontSize:"2xl",children:(0,ef.jsx)(x.G,{icon:r})}),isDisabled:a,variant:"plain",onClick:s})})},n3=n(56969),n6=n(97907),n4=["90%","360px"],n8=function(e){var t=e.onClose,n=e.eyebrowText,r=e.mainText,o=e.callsToAction;return(0,ef.jsxs)(h.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:n4,maxW:n4,position:"relative",children:[(0,ef.jsx)(n6.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,ef.jsxs)(ea.K,{spacing:4,children:[(0,ef.jsxs)(ea.K,{spacing:1,paddingEnd:3,children:[!(0,nW.s2)()&&(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.600",children:n}),(0,ef.jsx)(p.x,{fontSize:"md",children:r})]}),(0,ef.jsx)(h.xu,{w:"100%",children:o})]})]})},n7=function(e){var t=e.onClose,n=e.startTour;return(0,ef.jsx)(n8,{eyebrowText:(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,ef.jsx)(d.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc}})]}),mainText:(0,ef.jsx)(d.cC,{id:"ntWFEH"}),onClose:t,callsToAction:(0,ef.jsx)(eu.z,{size:"md",w:"100%",variant:"solid",onClick:function(){n(0),t()},children:(0,ef.jsx)(d.cC,{id:"VzFYDl"})})})},n9=n(77245),re=["90%","360px"],rt=function(e){var t=e.onClose,n=(0,b.useState)(!0),r=n[0],o=n[1];return(0,b.useEffect)(function(){setTimeout(function(){o(!1)},3e3)},[]),(0,ef.jsxs)(h.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:re,maxW:re,position:"relative",children:[(0,ef.jsx)(n6.P,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,ef.jsxs)(ea.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,ef.jsx)(h.xu,{color:"trueblue.300",children:(0,ef.jsx)(x.G,{icon:n9.tc,size:"2x",className:r?"fa-bounce":void 0})}),(0,ef.jsxs)(ea.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.600",children:(0,ef.jsx)(d.cC,{id:"eoDgVo"})}),(0,ef.jsx)(p.x,{fontSize:"md",children:(0,ef.jsx)(d.cC,{id:"p7dFyi"})})]})]})]})};function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ro="source",ri="desktop-tour-toast",rs="switch-from-mobile-to-desktop-toast",ra=function(e){var t,n=e.editor,r=(0,eG.p)(),o=(0,Y.CG)(tY.yx),i=(0,k.c8)().startTour,s=(0,tV.SE)(),a=s.user,c=s.setSettings,l=(0,b.useState)(!1),d=l[0],u=l[1],f=(0,b.useRef)(!1),p=!!(null!=a&&null!==(t=a.settings)&&void 0!==t&&t.needsEditorOnboarding),h=(0,Y.CG)((0,nZ.oH)(null==n?void 0:n.gammaDocId)),m=!!h&&"running"===h.status,x=!!h&&("complete"===h.status||"error"===h.status),g=(0,tM.As)("editor"),v=(0,b.useState)(null),j=v[0],y=v[1],C=(0,b.useState)(function(){return(0,nV.SJ)()[ro]===nG.VY})[0],O=(0,b.useState)(function(){return C&&(0,nW.s2)()})[0],w=C&&x;return(0,b.useEffect)(function(){n&&u(!m&&!(0,nW.s2)()&&C&&p)},[n,C,m,p]),(0,b.useEffect)(function(){setTimeout(function(){(0,n3.lO)({query:rr(rr({},(0,nV.SJ)()),{},(0,I.Z)({},ro,void 0)),emitChange:!1})})},[]),(0,b.useEffect)(function(){return d&&!r.isActive(ri)&&setTimeout(function(){r({id:ri,position:"bottom-left",render:function(e){var t=e.onClose;return n7({onClose:function(){null==c||c({remove:["needsEditorOnboarding"]}),t()},startTour:i})},isClosable:!0,duration:null})},2e3),function(){r.isActive(ri)&&r.close(ri)}},[c,d,i,r]),(0,b.useEffect)(function(){if((0,nW.s2)()){var e=document.querySelector(g.scrollSelector);if(e){y(e);var t=function(){j&&(0,nW.s2)()&&(null==j?void 0:j.scrollTop)>=(null==j?void 0:j.scrollHeight)/4&&O&&!r.isActive(rs)&&!f.current&&(f.current=!0,r({id:rs,position:"top",render:function(e){return rt({onClose:e.onClose})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",t,!0),function(){window.removeEventListener("scroll",t,!0),r.isActive(rs)&&r.close(rs)}}}},[o,j,g.scrollSelector,O,r]),{showDocWizardFooter:w}};function rc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rd=(0,b.memo)(function(e){var t,n=e.interactionId,r=(0,Y.CG)(tY.yx),o=null!=r&&!!r.theme&&(0,ne.wj)(null==r?void 0:r.theme),i=(0,b.useState)(!1),s=i[0],a=i[1],c=(0,eG.p)(),l=null==r?void 0:null===(t=r.accessLinks)||void 0===t?void 0:t[0],u=(0,b.useMemo)(function(){return(0,nV.Gn)({docTitle:null==r?void 0:r.title,docId:null==r?void 0:r.id,token:null==l?void 0:l.token,absolute:!0})},[r,null==l?void 0:l.token]),p=(0,eU.V)(u).onCopy,h=(0,b.useCallback)(function(){(0,nF.J)({docId:null==r?void 0:r.id,source:"docWizardFooter",type:"tokenUrl"}),p(),c({title:(0,ef.jsx)(d.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==r?void 0:r.id,p,c]),m=(0,b.useCallback)(function(){a(!0)},[]);return r?(0,ef.jsx)(g.Wk,{isDark:o,children:(0,ef.jsx)(f.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,nW.s2)()?void 0:"-".concat(nU.m),children:(0,ef.jsx)(nL.U,{in:!s,style:{width:"100%"},unmountOnExit:!0,children:(0,ef.jsx)(f.k,rl(rl({pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative"},o?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"}),{},{children:(0,ef.jsx)(nM.W,{maxW:"420px",children:(0,ef.jsxs)(ea.K,{spacing:8,children:[(0,ef.jsxs)(ea.K,{spacing:4,textAlign:"center",children:[(0,ef.jsx)(ec.X,{size:"md",children:(0,ef.jsx)(d.cC,{id:"bB+DHs"})}),(0,ef.jsx)(eu.z,{leftIcon:(0,ef.jsx)(x.G,{icon:n_.nN}),variant:"solid",onClick:h,children:(0,ef.jsx)(d.cC,{id:"RGCCrg"})}),(0,ef.jsx)(eu.z,{as:nN(),target:(0,nW.Q5)()?"_self":"_blank",variant:"plain",colorScheme:o?"blackAlpha":"whiteAlpha",leftIcon:(0,ef.jsx)(x.G,{icon:nR.r8}),rightIcon:(0,nW.Q5)()?void 0:(0,ef.jsx)(x.G,{icon:nT.faArrowUpRightFromSquare,size:"xs"}),href:nG.ET,children:(0,ef.jsx)(d.cC,{id:"xFxi2V"})})]}),(0,ef.jsx)(n2,{docId:r.id,isDark:o,interactionId:n}),(0,ef.jsx)(nm.M,{pt:[0,0,4],w:"100%",children:(0,ef.jsx)(eu.z,{size:"sm",onClick:m,variant:"text",colorScheme:"blackAlpha",children:(0,ef.jsx)(d.cC,{id:"vLyv1R"})})})]})})}))})})}):null});rd.displayName="DocWizardFooterInner";var ru=function(e){var t=e.editor,n=ra({editor:t}).showDocWizardFooter,r=(0,Y.CG)((0,nZ.oH)(null==t?void 0:t.gammaDocId)),o=null==r?void 0:r.id;return n&&o?(0,ef.jsx)(rd,{interactionId:o}):(0,ef.jsx)(ef.Fragment,{})},rf=n(98537),rp=n.n(rf),rh=n(13302),rm=function(e){var t=e.onCloneClick,n=e.onSignupClick,r=e.isLoggedIn;return(0,ef.jsx)(h.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:r?(0,ef.jsxs)(ei.U,{children:[(0,ef.jsxs)(p.x,{mr:1,children:[(0,ef.jsx)(d.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc},components:{0:(0,ef.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,ef.jsx)(eu.z,{variant:"solid",onClick:t,children:(0,ef.jsx)(d.cC,{id:"he3ygx"})})]}):(0,ef.jsxs)(ei.U,{children:[(0,ef.jsxs)(p.x,{mr:1,children:[(0,ef.jsx)(d.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc,GAMMA_PROPER_NOUN:ev.N6},components:{0:(0,ef.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,ef.jsx)(nN(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,ef.jsx)(eu.z,{as:eF.r,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,ef.jsx)(d.cC,{id:"e+RpCP"})})})]})})},rx=function(e){var t=!(0,nW.s2)(),n=(0,tV.SE)().user,r=(0,eG.p)(),o=(0,b.useRef)(),i=(0,rh.e)(),s=(0,b.useCallback)(function(){e&&(null===tP.co||void 0===tP.co||tP.co.track(tP.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),a=(0,b.useCallback)(function(){i({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,i]);(0,b.useEffect)(function(){return function(){o.current&&r.close(o.current)}},[r]);var c=t&&e,l=!!n;(0,na.vm)(function(){o.current&&r.close(o.current),c&&(o.current=r({position:"bottom",render:function(){return rm({onCloneClick:a,isLoggedIn:l,onSignupClick:s})},isClosable:!0,duration:null}))},[e,t,a,s,c,n,r,l],[c,l])},rg=n(73238),rv=n(10030),rj=n(81510),rb="sessionId1",ry=tL.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(t){return function(){var n=(0,Y.bh)();return e.storage.user=rp()({},e.storage.user,t),n.dispatch((0,J.MU)({sessionId:rb})),n.dispatch((0,J.Tx)({collaborators:[e.storage.user]})),!0}}}}}),rC=function(e){var t,n=e.docId,r=e.snapshotId,o=e.scrollingParentSelector,i=e.onCreate,s=(0,Y.CG)(tY.yx);rx(s);var a=(0,b.useState)(function(){return[rv.$1.configure({scrollerSelector:o}),ry,rg._g]})[0],c=(0,tV.SE)(),l=c.user,d=c.anonymousUser,u=c.isUserLoading,p=c.color,m=(0,b.useState)(),x=m[0],g=m[1],v=(0,C.EDv)({variables:{docId:n,snapshotId:r},skip:!r}),j=v.data,y=v.loading,O=v.error;(0,b.useEffect)(function(){!u&&x&&x.commands.user({id:(null==l?void 0:l.id)||d.id,color:p.value,sessionId:rb,idleSince:null,name:(null==l?void 0:l.displayName)||d.displayName||"",profileImageUrl:(null==l?void 0:l.profileImageUrl)||"",isReady:!u})},[x,l,p,u,d]);var w=j&&void 0!==j.snapshot&&!y&&s;return(0,ef.jsxs)(h.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!w||O?(0,ef.jsxs)(f.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!w&&(0,ef.jsx)(nx.$,{}),O&&(0,ef.jsxs)(nm.M,{h:"100%",children:["There was an error loading this ",ev.Yc,":"," ",O.message]})]}):(0,ef.jsx)(h.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:w?1:0,children:(0,ef.jsx)(eS.yE,{doc:s,editorId:"main",docId:n,extensions:a,onCreate:function(e){var t=e.editor;g(t),setTimeout(function(){i&&i(t)},10)},readOnly:!0,initialContent:null===(t=j.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:o})}),(0,ef.jsx)(rj.m,{})]})},rO=n(12221),rw=n(18149),rk=n.n(rw),rS=n(98621),rI=n.n(rS),rE=n(78871),rP=n(77869),rD=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,Y.TL)(),r=(0,tM.As)("editor"),o=(0,eb.nO)(),i=(0,Y.CG)(J.yn,rk()),s=(0,Y.CG)(J.k8,rk()),a=!!(null==s?void 0:s.pos);(0,b.useEffect)(function(){if(e){var t=t_()(function(){i&&n((0,J.Qx)({attached:!1}))},500,{leading:!0}),r=(0,tN.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),function(){r(),t.cancel(),document.removeEventListener("wheel",t,!0)}}},[e,n,i,a,t]);var c=(0,Y.CG)(J.ks,rk());(0,b.useEffect)(function(){if(e&&!c){var t=t_()(function(){if(!r.inProgress){var t=(0,rE.lI)(e,100,o);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,J.Us)(t))}},250,{trailing:!0,maxWait:500}),i=t_()(function(){if(!(e.state.selection instanceof rP.c)){var t=document.querySelector(r.scrollSelector||""),o=null==t?void 0:t.getBoundingClientRect(),i=e.state.selection.from,s=(0,rE.Sh)(e,i);if(!t||!o||!s){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:s});return}var a=s.getBoundingClientRect(),c=parseFloat(((e.view.coordsAtPos(i).top-a.y)/a.height).toFixed(2));n((0,J.Us)({pos:i,pct:c}))}},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",i),window.addEventListener("scroll",t,!0),function(){e.off("selectionUpdate",i),window.removeEventListener("scroll",t,!0)}}},[e,n,r,c,o])},rA=function(){var e=(0,eG.p)(),t=(0,Y.TL)();return(0,b.useCallback)(function(n){var r=n.collaborator,o=n.localIsFollowing,i=n.localIsAttached,s={attached:!0};o?i?s.following=null:e.closeAll():(s.following=r.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,ef.jsxs)(f.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,ef.jsx)(rO.q,{size:"sm",src:r.profileImageUrl,border:"solid 2px ".concat(r.color),color:rI()(r.color).isDark()?"white":"black",bg:r.color}),(0,ef.jsx)(p.x,{ml:2,children:(0,ef.jsx)(d.cC,{id:"lULvWe",values:{0:r.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(r.name,". Setting following to ").concat(s)),t((0,J.Qx)(s))},[e,t])},rT=function(e){var t=e.editor,n=e.collaborators,r=e.user,o=(0,b.useRef)(!1),i=rA(),s=new URLSearchParams(window.location.search),a=s.get("following_id"),c=s.get("follow_on_start");(0,b.useEffect)(function(){if(!o.current&&c&&(null==r?void 0:r.id)!==a&&t){var e=n.find(function(e){return e.id===a});e&&(i({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),o.current=!0)}},[a,c,t,n,r,i])},rR="sessionId1",r_=tL.hj.create({addStorage:function(){return{user:{}}},addCommands:function(){var e=this;return{user:function(t){return function(){var n=(0,Y.bh)();return e.storage.user=rp()({},e.storage.user,t),n.dispatch((0,J.MU)({sessionId:rR})),n.dispatch((0,J.Tx)({collaborators:[e.storage.user]})),!0}}}}}),rL=function(e){var t,n=e.docId,r=e.snapshotId,o=e.scrollingParentSelector,i=e.onCreate,s=e.theme,a=e.showMadeWithGammaBadge,c=(0,b.useState)(function(){return[rv.$1.configure({scrollerSelector:o}),r_,rg._g]})[0],l=(0,tV.SE)(),d=l.user,u=l.isUserLoading,p=l.anonymousUser,m=l.color,x=(0,b.useState)(),g=x[0],v=x[1],j=(0,C.EDv)({variables:{docId:n,snapshotId:r},skip:!r}),y=j.data,O=j.loading,w=j.error,k=(0,Y.CG)(tY.yx);(0,b.useEffect)(function(){!u&&g&&g.commands.user({id:(null==d?void 0:d.id)||p.id,color:m.value,sessionId:rR,idleSince:null,name:(null==d?void 0:d.displayName)||p.displayName||"",profileImageUrl:(null==d?void 0:d.profileImageUrl)||"",isReady:!u})},[g,d,m,u,p]);var S=y&&void 0!==y.snapshot&&!O&&k;return(0,ef.jsxs)(h.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!S||w?(0,ef.jsxs)(f.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!S&&(0,ef.jsx)(nx.$,{}),w&&(0,ef.jsxs)(nm.M,{h:"100%",children:["There was an error loading this ",ev.Yc,":"," ",w.message]})]}):(0,ef.jsx)(h.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:S?1:0,children:(0,ef.jsx)(eS.yE,{doc:k,editorId:"main",docId:n,theme:s||void 0,extensions:c,onCreate:function(e){var t=e.editor;v(t),setTimeout(function(){i&&i(t)},10)},readOnly:!0,initialContent:null===(t=y.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:o})}),g&&(0,ef.jsx)(tW,{editor:g,backoffFactor:2}),(void 0===a||a)&&(0,ef.jsx)(rj.m,{})]})},rM=n(16019);function rz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rz(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var rZ=(s={},(0,I.Z)(s,tZ.q.DOC_VIEW,"doc"),(0,I.Z)(s,tZ.q.SLIDE_VIEW,"present"),s),rG=function(e){var t=(0,y.I0)(),n=(0,nV.SJ)().mode,r=(0,Y.CG)(J.gh),o=(0,b.useCallback)(function(e){var t=e||r,n=(0,nV.SJ)().mode,o=rZ[t];n!==o&&(0,n3.lO)({query:rN(rN({},(0,nV.SJ)()),{},{mode:o}),emitChange:!1})},[r]);(0,rM.r)(o,[r]),(0,b.useEffect)(function(){return n3.fI.on("changed",function(){return o()})},[o]),(0,na.vm)(function(){if(e){var r=n===rZ.SLIDE_VIEW?tZ.q.SLIDE_VIEW:tZ.q.DOC_VIEW,i=(0,nV.sY)().cardId;r===tZ.q.SLIDE_VIEW&&(i?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",i),e.commands.spotlightCardById(i)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),t((0,J.PM)({mode:r})),o(r)}},[e,t,n,o],[e])},rF=n(87202),rU=n(31358),rW=n(75393),rV=n(10469),rB=n(27440),rH=n(71170),rq=n(56241),rK=n(63522),rY=n(91122),rJ=n(27231),rX=n(68093),rQ=(0,rF.ZP)("mod+Escape"),r$=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),r0=function(e,t){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=(0,tM.cC)("editor"),o=r.scroller;if(o){e.commands.turnOffSpotlight();var i=o.scrollHeight-o.offsetHeight;if("down"===t){if(!(r.isAtBottom(90)&&n&&e.commands.spotlightNextCard(!1,"top"))){var s=o.scrollTop+.5*o.offsetHeight;s>i-150&&(s=i),r.scrollTo({top:s})}}else if(!(r.isAtTop(90)&&n&&e.commands.spotlightNextCard(!0,"bottom"))){var a=o.scrollTop-.5*o.offsetHeight;a<150&&(a=0),r.scrollTo({top:a})}}},r1=function(e){var t=e.enabled,n=e.setActiveKey,r=(0,tP.z$)(),o=(0,Y.TL)(),i=(0,tK._i)().editor,s=(0,Y.CG)(rK.C),a=(0,rJ.g)(i),c=a.enabled,l=a.pos,d=(0,b.useCallback)(function(){c?null==i||i.commands.turnOffSpotlight():null==i||i.commands.spotlightNextBlock()},[null==i?void 0:i.commands,c]);return(0,b.useEffect)(function(){if(t)return rU.F7.on("keydown","NAVIGATION_CONTROLS",function(e){var t,o,a=(0,Y.bh)(),u=e.target,f=Object.keys((0,J.X9)(a.getState()).tree);if(!i||null!=u&&null!==(t=u.closest)&&void 0!==t&&t.call(u,"[data-gamma-child-tiptap-editor]")||null!=u&&null!==(o=u.closest)&&void 0!==o&&o.call(u,"input")||e.metaKey||s)return!1;switch(r$.has(e.key)&&("s"!==e.key&&(n(e.key),setTimeout(function(){n(null)},100)),e.preventDefault()),e.key){case"s":return d(),!0;case"l":case"ArrowRight":return(0,rY.p7)(),a.dispatch((0,J.Qx)({attached:!1})),null==r||r.trackDocEvent(tP.AA.PRESENT_MODE_NAVIGATED,{direction:tP.xQ.CARD_NEXT,method:tP.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextCard();case"h":case"ArrowLeft":return(0,rY.p7)(),a.dispatch((0,J.Qx)({attached:!1})),null==r||r.trackDocEvent(tP.AA.PRESENT_MODE_NAVIGATED,{direction:tP.xQ.CARD_PREV,method:tP.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextCard(!0);case"j":case"ArrowDown":case"PageDown":if((0,rY.p7)(),a.dispatch((0,J.Qx)({attached:!1})),!c){var p=(0,rg.ei)(i.state.selection);return i.commands.goToNextExpandableNode()||r0(i,"down",!p),!0}return null==r||r.trackDocEvent(tP.AA.PRESENT_MODE_NAVIGATED,{direction:tP.xQ.TELEPROMPTER_DOWN,method:tP.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextBlock();case"k":case"ArrowUp":case"PageUp":if((0,rY.p7)(),a.dispatch((0,J.Qx)({attached:!1})),!c){var h=(0,rg.ei)(i.state.selection);return i.commands.goToNextExpandableNode(!0)||r0(i,"up",!h),!0}return null==r||r.trackDocEvent(tP.AA.PRESENT_MODE_NAVIGATED,{direction:tP.xQ.TELEPROMPTER_UP,method:tP.SY.KEYBOARD,key:e.key}),i.commands.spotlightNextBlock(!0);case"r":if(f[0])return(0,rY.p7)(),i.commands.spotlightCardById(f[0]),a.dispatch((0,J.Qx)({attached:!1})),!0;return!1;case"Escape":if(rQ(e))return!1;var m=c&&l;if(i.commands.spotlightCollapseNearestExpandableNode(m?l:null))return i.commands.reHighlightExpandableNode(),!0;if(c)return i.commands.turnOffSpotlight(),!0;return a.dispatch((0,J.Qx)({attached:!1})),null==r||r.track(tP.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),i.commands.ascendUpToParentCard(!1);case"Enter":var x=c&&l;if(i.commands.expandOrCollapseExpandableNode(x?l:null))return!0;if(x){var g=i.state.doc.resolve(l).parent;if(g&&(0,rX.AH)(g))return(0,rX.xB)(g.attrs.id,!1),i.commands.spotlightNextBlock(!0),!0;return i.commands.spotlightCollapseNearestExpandableNode(l)}return!1;default:return!1}})},[i,o,r,t,d,c,l,s,n]),c},r2=function(e){var t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},r5={ArrowUp:{icon:en.FP,label:(0,ef.jsx)(d.cC,{id:"VbggDE"}),ariaLabel:function(){return u.ag._({id:"VbggDE"})},shortcuts:["","K"],key:"ArrowUp",onClick:function(){r2("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:eo.ac,label:(0,ef.jsx)(d.cC,{id:"4jciC3"}),ariaLabel:function(){return u.ag._({id:"4jciC3"})},shortcuts:["","H"],key:"ArrowLeft",onClick:function(){r2("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:et.r5,label:(0,ef.jsx)(d.cC,{id:"e3GOIZ"}),ariaLabel:function(){return u.ag._({id:"e3GOIZ"})},shortcuts:["","J"],key:"ArrowDown",onClick:function(){r2("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:er.eF,label:(0,ef.jsx)(d.cC,{id:"ZjQRVw"}),ariaLabel:function(){return u.ag._({id:"ZjQRVw"})},shortcuts:["","L"],key:"ArrowRight",onClick:function(){r2("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:rV.GT,label:(0,ef.jsx)(d.cC,{id:"Xon9jp"}),ariaLabel:function(){return u.ag._({id:"Xon9jp"})},shortcuts:["S"],key:"S",onClick:function(){r2("s")},gridPos:[1,3]}},r3=function(e){var t=e.shortcuts;return(0,ef.jsx)(p.x,{as:"span",color:"gray.400",ml:2,children:t.map(function(e,n){return(0,ef.jsxs)(b.Fragment,{children:[e,n===t.length-1?null:(0,ef.jsx)(p.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e)})})},r6=function(e){var t=e.activeKey,n=e.spotlightingByBlock;return(0,ef.jsx)(eE.h,{children:(0,ef.jsxs)(h.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,ef.jsx)(ec.X,{children:(0,ef.jsx)(d.cC,{id:"wja8aL"})}),(0,ef.jsx)(rB.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(r5).map(function(e){var r=e.gridPos,o=e.icon,i=e.label,s=e.ariaLabel,a=e.shortcuts,c=e.key,l=e.onClick,d=t===c;return(0,ef.jsx)(rH.P,{gridColumn:r[1],gridRow:r[0],children:(0,ef.jsx)(rq.u,{hasArrow:!0,placement:"top",label:(0,ef.jsxs)(p.x,{whiteSpace:"nowrap",children:[i,(0,ef.jsx)(r3,{shortcuts:a})]}),children:(0,ef.jsx)(R.h,{m:1,shadow:"base",size:"md",variant:"S"==c&&n?"solid":"plain",isActive:d||"S"===c&&n,onClick:l,onMouseDown:function(e){return e.preventDefault()},"aria-label":s(),icon:(0,ef.jsx)(x.G,{icon:o})})})},c)})})]})})},r4=n(5751),r8=n(26721),r7=n(9088),r9=n(30893),oe=n(40771),ot=n(8022),on=n(95258),or=n(63849),oo=n(2575),oi=n(17651),os=n(72466),oa=n(6185),oc=n.n(oa),ol=n(68642),od=n(27875),ou=n.n(od),of=n(20325),op=n(68964),oh={easeOutLinear:op.gA,easeOutSine:op.vh,easeOutCubic:op.w2,easeOutCirc:op.ei,easeOutQuad:op.hl,easeOutQuart:op.Y3,easeOutExpo:op.ad,bezierCustom1:oc()(.13,.97,.035,.73),bezierCustom2:oc()(.105,1.15,.15,.355)},om={UP:"up",DOWN:"down"},ox=function(e){return e?+new Date-+new Date(e):1/0},og=function(e,t){var n=(0,b.useMemo)(function(){return new ol.Lethargy(6,120,.3,150)},[]),r=t||{},o=r.easing,i=void 0===o?"easeOutCubic":o,s=r.touchpadFactor,a=void 0===s?1.5:s,c=r.triggerThreshold,l=void 0===c?1200:c,d=(0,tM.As)("editor"),u=(0,Y.CG)(J.i2),f=(0,b.useRef)(null),p=(0,b.useRef)(null),h=(0,b.useRef)(null),m=(0,b.useRef)(!1),x=(0,b.useRef)(null),g=(0,b.useRef)(null),v=(0,b.useState)(!1),j=v[0],y=v[1],C=(0,b.useState)(!1),O=C[0],w=C[1],k=(0,b.useRef)({counterTarget:0,counterCurrent:0,direction:om.DOWN}),S=(0,b.useCallback)(function(){if(f.current){var e,t=k.current.counterTarget/l*100,n=(null!=t?t:0)*2.64,r="".concat(n," ").concat(264-n),o=null===(e=f.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,i=f.current.querySelector(".chakra-progress__indicator");i&&i.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(t.toFixed(0),"%"))}},[l]),I=(0,b.useCallback)(function(){var e=h.current,t=p.current;if(t&&e){var n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(n&&r){var o=k.current.counterCurrent/l,s=(550>ox(g.current)?1:null!=o?o:0)*264,a="".concat(s," ").concat(264-s),c=Math.max(56-56*oh[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(c,"px)"),t.style.transform="translateY(-".concat(c,"px)"),r.setAttribute("stroke-dasharray",a),n.setAttribute("stroke-dasharray",a)}}},[i,l]),E=(0,b.useCallback)(function(){if(!m.current){var e;requestAnimationFrame(function t(n){var r=e?n-e:0;if(e=n,.1>Math.abs(k.current.counterTarget-k.current.counterCurrent)){k.current.counterCurrent=k.current.counterTarget,I(),m.current=!1;return}k.current.counterCurrent=(0,op.t7)(k.current.counterCurrent,k.current.counterTarget,ou()(.3*(60/(r?1e3/r:60)),.3,1)),I(),requestAnimationFrame(t)})}},[I]),P=(0,b.useCallback)(function(){k.current.counterTarget=0,y(!1),w(!1),S(),E()},[E,S]);return(0,b.useEffect)(function(){if(!u||!e)return P();var t,r,o=document.querySelector((0,of.U8)(u));if(!o)return P();var i=function(t){if(!t.target.closest("[data-comments-wrapper]")){var o=n.check(t);if(null!==h.current&&null!==p.current){var i=ox(x.current);if(!(i<500)&&(!(i<1e3)||!1!==o)){var s=ox(g.current);if(!(s<500)&&(!(s<1e3)||!1!==o)){var c=0===Math.abs(t.deltaY)?k.current.direction:t.deltaY>0?om.DOWN:om.UP;if("down"===c?d.isAtBottom():d.isAtTop()){clearTimeout(r);var u=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,f=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(u?a:1);if(c!==k.current.direction){k.current.direction=c,P();return}w(c===om.DOWN),y(c===om.UP),k.current.counterTarget+=f,k.current.direction=c,k.current.counterTarget/l>=1?(e.commands.spotlightNextCard(c===om.UP,c===om.UP?"bottom":"top"),g.current=+new Date,setTimeout(function(){P(),S()},250),setTimeout(function(){g.current=null},1e3)):r=setTimeout(P,500),E(),S()}}}}}},s=function(){x.current=+new Date,clearTimeout(t),P(),t=setTimeout(function(){x.current=null},1e3)};return o.addEventListener("scroll",s),o.addEventListener("wheel",i,{passive:!0}),S(),function(){o.removeEventListener("scroll",s),o.removeEventListener("wheel",i)}},[e,n,E,i,a,l,d,S,I,P,u]),{debugRef:f,nextCardRef:h,prevCardRef:p,showNextCard:O,showPrevCard:j}},ov=function(e){var t=e.editor,n=(0,w.ye)("debugLogging"),r=(0,b.useState)("easeOutExpo"),o=r[0],i=r[1],s=(0,b.useState)(1.5),a=s[0],c=s[1],l=(0,b.useState)(1200),d=l[0],u=l[1],f=og(t,{easing:o,touchpadFactor:a,triggerThreshold:d}),p=f.debugRef,h=f.nextCardRef,m=f.prevCardRef,x=f.showNextCard,g=f.showPrevCard,v=(0,Y.CG)(function(e){var t=(0,J.i2)(e)||"",n=(0,J.X9)(e),r=Object.keys((n.parents[t]||[]).reduce(function(e,t){return e[t]},n.tree)),o=null,i=null;return r.forEach(function(e,s){if(e===t){var a=n.parents[t];0===s?a.length&&(o={cardId:a[a.length-1],isSibling:!1}):o={cardId:r[s-1],isSibling:!0},s===r.length-1?a.length&&(i={cardId:a[a.length-1],isSibling:!1}):i={cardId:r[s+1],isSibling:!0}}}),{prevCard:o,nextCard:i}},rk()),j=v.prevCard,y=v.nextCard,C=null==y?void 0:y.cardId,O=null==j?void 0:j.cardId,k=(0,b.useMemo)(function(){var e=null,n=null;return t&&t.state.doc.descendants(function(t){return!(0,tz.KH)(t)||(t.attrs.id===O?e=t:t.attrs.id===C&&(n=t),!!(!e&&O)||!!(!n&&C))}),{prev:e,next:n}},[t,C,O]);return(0,ef.jsxs)(ef.Fragment,{children:[n&&(0,ef.jsx)(oj,{ref:p,setEasing:i,setTouchpadFactor:c,setTriggerThreshold:u}),(0,ef.jsx)(ob,{ref:m,direction:"up",node:k.prev,enabled:g,offset:16}),(0,ef.jsx)(ob,{ref:h,direction:"down",node:k.next,enabled:x,offset:24})]})},oj=b.forwardRef(function(e,t){var n=e.setEasing,r=e.setTouchpadFactor,o=e.setTriggerThreshold;return(0,ef.jsxs)(f.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,ef.jsxs)(r7.v,{closeOnSelect:!1,children:[(0,ef.jsx)(r9.j,{as:eu.z,colorScheme:"trueblue",children:"Options"}),(0,ef.jsxs)(oe.q,{minWidth:"240px",children:[(0,ef.jsx)(g.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,ef.jsxs)(p.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,ef.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,ef.jsxs)(ot.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:function(e,t){return o(t)},children:[(0,ef.jsx)(ot.zu,{}),(0,ef.jsxs)(ot.Fi,{children:[(0,ef.jsx)(ot.WQ,{}),(0,ef.jsx)(ot.Y_,{})]})]}),(0,ef.jsx)(on.R,{}),(0,ef.jsx)(g.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,ef.jsxs)(p.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,ef.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,ef.jsxs)(ot.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:function(e,t){return r(t)},children:[(0,ef.jsx)(ot.zu,{}),(0,ef.jsxs)(ot.Fi,{children:[(0,ef.jsx)(ot.WQ,{}),(0,ef.jsx)(ot.Y_,{})]})]}),(0,ef.jsx)(on.R,{}),(0,ef.jsxs)(or._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:function(e){return n(e)},children:[(0,ef.jsx)(oo.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,ef.jsx)(oo.i,{value:"easeOutSine",children:"easeOutSine"}),(0,ef.jsx)(oo.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,ef.jsx)(oo.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,ef.jsx)(oo.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,ef.jsx)(oo.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,ef.jsx)(oo.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,ef.jsx)(oo.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,ef.jsx)(oo.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,ef.jsx)(f.k,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,ef.jsx)(oi.D,{value:40,color:"trueblue.500",children:(0,ef.jsx)(os.i,{})})})]})});oj.displayName="PeekDebugger";var ob=b.forwardRef(function(e,t){var n=e.direction,r=e.enabled,o=e.node,i=e.offset,s=(0,b.useState)(!1),a=s[0],c=s[1],l=(0,b.useState)(o),d=l[0],u=l[1];(0,b.useEffect)(function(){c(!0);var e=setTimeout(function(){c(!1),u(o)},550);return function(){clearTimeout(e)}},[o]);var h=(0,b.useMemo)(function(){return d?(0,eB.getCardTitle)(d.toJSON()):""},[d]),m=!!d;return(0,ef.jsx)(f.k,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(i,"px"):"inherit",bottom:"down"===n?"".concat(i,"px"):"inherit",children:(0,ef.jsxs)(f.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:r?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,ef.jsx)(oi.D,{display:m?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,ef.jsx)(os.i,{visibility:a?"visible":"hidden",children:(0,ef.jsx)(x.G,{icon:nB.faCircleCheck,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),m||"up"!==n?m||"down"!==n?null:(0,ef.jsx)(x.G,{icon:r4.m5,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,ef.jsx)(x.G,{icon:r8.yt,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,ef.jsx)(f.k,{width:1}),(0,ef.jsx)(p.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:m?"gray.800":"gray.600",px:2,children:m?h:"down"===n?"End of presentation":"Start of presentation"})]})})});ob.displayName="PeekCardTab";var oy=n(12741),oC=function(){var e=(0,b.useState)(["",[],{}]),t=e[0],n=e[1],r=(0,Y.qr)();return(0,b.useEffect)(function(){return r.subscribe(function(){var e=r.getState(),t=(0,J.X9)(e),o=(0,J.i2)(e)||"",i=t.parents[o]||[],s={};Object.keys(t.tree).forEach(function(e){var n=[];(function e(t){Object.keys(t).forEach(function(r){n.push(r),e(t[r])})})(t.tree[e]),s[e]=n}),n([o,i,s])})},[r]),t},oO=function(){var e=oC(),t=(0,E.Z)(e,3),n=t[0],r=t[1],o=t[2],i=Object.keys(o);return(0,ef.jsx)(ei.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:n?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map(function(e,t){var s=[].concat((0,oy.Z)(r),[n])[0],a=i.indexOf(s),c=o[s],l=0,d=100;return n&&c&&-1===i.indexOf(n)&&(l=(c.indexOf(n)+1)/c.length*100,d=1/c.length*100),(0,ef.jsx)(oS,{cardId:e,state:t===a?"current":t<=a?"prev":"next",percent:l,unit:d},e)})})},ow="var(--chakra-colors-trueblue-200)",ok="var(--chakra-colors-trueblue-100)",oS=function(e){var t=e.cardId,n=e.state,r=e.percent,o=e.unit,i="linear-gradient(to right, ".concat(ow," 0% ").concat(r,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(r,"% ").concat(r+o,"%, ").concat(ok," ").concat(r+o,"% 100%)");return(0,ef.jsx)(f.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?i:"prev"===n?ow:ok},t)},oI=(0,rF.ZP)("Esc"),oE=function(e){var t=e.editor,n=e.showNavigationControls,r=(0,y.v9)(J.gh)===tZ.q.SLIDE_VIEW,o=(0,b.useState)(null),i=o[0],s=o[1],a=(0,y.v9)(J.JA),c=(0,b.useRef)(a),l=(0,y.I0)(),u=r1({enabled:r&&!a,setActiveKey:s});return(0,b.useEffect)(function(){l((0,J.e)({isEditingInSlideView:!1}))},[r,l]),c.current=a,(0,b.useEffect)(function(){return rU.F7.on("keydown","SLIDE_VIEW",function(e){return!!(c.current&&oI(e))&&(l((0,J.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)})},[l]),(0,rW.us)(),(0,ef.jsxs)(ef.Fragment,{children:[r&&(0,ef.jsx)(ov,{editor:t}),r&&(0,ef.jsx)(oO,{}),r&&(0,ef.jsx)(f.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,ef.jsxs)(f.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:a?1:0,pointerEvents:a?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:a?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,ef.jsx)(p.x,{size:"sm",mr:3,children:(0,ef.jsx)(d.cC,{id:"DjD/sG"})}),(0,ef.jsx)(eu.z,{size:"sm",variant:"solid",onClick:function(){return l((0,J.e)({isEditingInSlideView:!1}))},children:(0,ef.jsx)(d.cC,{id:"DPfwMq"})})]})}),r&&n&&(0,ef.jsx)(r6,{activeKey:i,spotlightingByBlock:u})]})},oP=n(85946),oD=n(13414),oA=n(28339),oT=n(55523),oR=n(83484),o_=n(6110),oL=n(64457),oM=n(28965);function oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oz(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oZ=function(e){var t=(0,oL.i)(e),n=t.content,r=t.selection,o=!!(null!=n&&n.content),i=(0,b.useMemo)(function(){if(!o)return[];var e,t=n.content,r=(null==t?void 0:t[0].content)||[],i=null===(e=n.content)||void 0===e?void 0:e[0].attrs;return r.map(function(e){var t;return i&&null!==(t=e.attrs)&&void 0!==t&&t.id?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal",previewJson:{type:"doc",content:[{type:"document",content:[e],attrs:i}]}}:null}).filter(function(e){return null!==e})},[n,o]),s=(0,Y.CG)(oM.ZD).map(function(e){var t=i.find(function(t){return t.cardId===e.cardId});return t?oN(oN({},e),{},{previewJson:t.previewJson}):null}).filter(function(e){return null!==e}),a=(0,Y.CG)(oM.Ae);return{isDragging:a,cards:a?s:i,selection:r,isLoaded:o}},oG=n(62642),oF=n(29600),oU=n(21875),oW=(0,b.memo)(function(e){var t=e.docJson,n=e.theme,r=(0,Y.CG)(J.yx),o=(0,b.useMemo)(function(){return{doc:r}},[r]);return(0,ef.jsx)(f.k,{sx:no.n,css:{"--editor-font-size":"0.125rem","--editor-width":"125px"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",children:(0,ef.jsx)(no.m,{content:t,theme:n,isThumbnail:!0,reduxData:o})})},function(e,t){return rk()(e.docJson,t.docJson)&&e.theme.updatedTime===t.theme.updatedTime&&e.theme.id===t.theme.id});oW.displayName="FilmstripPreviewEditor";var oV=n(582);function oB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oB(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var oq=function(e){var t=e.card,n=e.index,r=e.isFirst,o=e.isEditorFocused,i=e.currentFocusedCard,s=e.isFilmstripSelected,a=e.theme,c=e.showScreenshots,l=e.screenshotsEnabled,d=e.readOnly,u=e.shouldHide,m=e.isDragInProgress,x=e.useXsFontSize,v=t.cardId,j=t.isDragging,y=t.previewJson,C=(0,Y.TL)(),O=(0,oF.c)(v),w=null==O?void 0:O.previewUrl,k=(0,b.useMemo)(function(){return{boxShadow:s?"var(--fs-item-selected-box-shadow)":o?"var(--fs-item-focused-box-shadow)":"0 0 0 1px var(--fs-item-border-color)"}},[o,s]),S=(0,b.useCallback)(function(e){if(v){var t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!d)C((0,oV.YC)({id:v,currentFocusedCard:i}));else if(n&&!d)C((0,oV.sY)({id:v}));else{if(m)return;C((0,oV.Ti)({id:v})),C((0,J.Qx)({attached:!1}));var r=(0,nV.sY)().cardId;(0,oU.D)({cardId:v,method:r===v?"replace":"push"})}}},[d,i,C,v,m]);return(0,ef.jsx)(h.xu,{pos:"relative",className:"filmstrip-item",pt:1,mt:r?void 0:1,onClick:S,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:u?"none":void 0,children:(0,ef.jsxs)(f.k,{justifyContent:"space-between",gap:"6px",children:[(0,ef.jsx)(p.x,{transitionProperty:"common",transitionDuration:"normal",opacity:j?0:1,textAlign:"right",color:s?"var(--fs-item-selected-text-color)":"inherit",fontSize:x?"xs":"sm",w:x?6:5,children:n}),(0,ef.jsx)(h.xu,oH(oH({},k),{},{borderRadius:"md",overflow:"hidden",children:c?(0,ef.jsx)(g.qh,{src:l?w:oG.Z.src,fallbackSrc:oG.Z.src,shouldShow:!!w,w:"100px",m:1}):(0,ef.jsx)(oW,{theme:a,docJson:y})}))]})})},oK=n(16155),oY=n(9850),oJ=n.n(oY),oX=n(87936),oQ=n(62142),o$=n(85948),o0=n(38105),o1=n(47598),o2=function(e){var t=(0,Y.CG)(oV.wg),n=(0,Y.CG)(oV.zq),r=(0,Y.TL)(),o=(0,Y.qr)(),i=(0,eG.p)();(0,b.useEffect)(function(){var t=function(t){var n,r=o.getState();if(e&&(0,oK.Cf)()&&(0,J.hN)(r)){var s=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");if(s){var a=(0,o$.T)(s,e.schema).content.content.filter(function(e){return(0,tz.KH)(e)});if(a.length){var c=(0,tz.Bw)(e,(0,oV.zq)(r)),l=c?c.pos+c.node.nodeSize:e.state.doc.content.size-1,u=a.map(function(e){return(0,o1.h)(oJ()(e.toJSON()))}).map(function(e){return(0,oQ.Zs)(e)});e.chain().insertContentAt(l,u,{updateSelection:!1}).command(function(e){var t=e.tr,n=(0,o0.t)(t.doc.resolve(l));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),t.preventDefault(),i({title:(0,ef.jsx)(d.cC,{id:"3viq5b",values:{0:a.length,1:a.length}}),status:"success",duration:3e3,position:"top"})}}}};return document.addEventListener("paste",t),function(){document.removeEventListener("paste",t)}},[e,o,i]);var s=(0,b.useCallback)(function(n,r){if(e){var o,s=(0,tz.Lz)(e,t);if(s.length){var a=t8.HY.from(s),c=(0,ta.G8)(a,e.schema);if(!c){i({title:(0,ef.jsx)(d.cC,{id:"fFgBN7",values:{errorMessage:r}}),status:"error",duration:3e3,position:"top"});return}null===(o=document.getSelection())||void 0===o||o.removeAllRanges(),eq()(c,{format:"text/html"}),i({title:(0,ef.jsx)(d.cC,{id:"8p/xVT",values:{0:s.length,1:n.one,2:n.other}}),status:"success",duration:3e3,position:"top"})}}},[e,t,i]);return{handleCopy:(0,b.useCallback)(function(){s({one:"Copied card.",other:"Copied ".concat(t.length," cards.")},"Error copying card.")},[s,t]),handleDelete:(0,b.useCallback)(function(){if(e){r((0,oV.jf)());var n="";if(1===t.length){var o=(0,tz.Bw)(e,t[0]);o&&(n=(0,eB.getCardTitle)(o.node.toJSON()))}e.commands.deleteCardsById(t);var s=n?'"'.concat(n,'"'):u.ag._({id:"FyJPFh"}),a=i({title:(0,ef.jsxs)(ei.U,{children:[(0,ef.jsx)(p.x,{noOfLines:1,children:(0,ef.jsx)(d.cC,{id:"OJTPnC",values:{0:t.length,1:t.length,displayTitle:s}})}),(0,ef.jsx)(eF.r,{textDecoration:"underline",onClick:function(){(0,eV.Yw)(e.state),i.close(a)},children:(0,ef.jsx)(d.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})}},[e,r,t,i]),handleCut:(0,b.useCallback)(function(){e&&(s({one:"Cut card.",other:"Cut ".concat(t.length," cards")},"Error cutting card."),r((0,oV.jf)()),e.commands.deleteCardsById(t))},[e,s,r,t]),handleDuplicate:(0,b.useCallback)(function(){if(e){var r=(0,tz.Lz)(e,t);if(r.length){var o=(0,tz.Bw)(e,n),s=o?o.pos+o.node.nodeSize:e.state.doc.content.size-1,a=r.map(function(e){return(0,o1.h)(oJ()(e.toJSON()))}).map(function(e){return(0,oQ.Zs)(e)});e.chain().insertContentAt(s,a,{updateSelection:!1}).command(function(e){var t=e.tr,n=(0,o0.t)(t.doc.resolve(s));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),i({title:(0,ef.jsx)(d.cC,{id:"ClnFsQ",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})}}},[e,n,i,t])}},o5=function(e){var t=e.isFocused,n=e.readOnly,r=e.firstFocusedCardId,o=e.editor,i=e.isDragging,s=o2(o),a=s.handleCopy,c=s.handleDelete,l=s.handleCut,d=s.handleDuplicate,u=(0,Y.TL)();(0,b.useEffect)(function(){return oX.F7.on("keydown","FILMSTRIP",function(e){if(!t)return!1;switch(e.key){case"Escape":if(i)return u((0,oM.vL)()),!0;return!1;case"Backspace":case"Delete":if(!n)return c(),!0;return!1;case"a":case"A":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),u((0,oV.td)({currentFocusedCard:r})),!0;return!1;case"c":case"C":if(!n&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"d":case"D":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d(),!0;return!1;case"x":case"X":if(!n&&(e.ctrlKey||e.metaKey))return l(),!0;return!1;case"ArrowDown":return u((0,oV.ut)({direction:"down",withShift:!n&&e.shiftKey,currentFocusedCard:r})),!0;case"ArrowUp":return u((0,oV.ut)({direction:"up",withShift:!n&&e.shiftKey,currentFocusedCard:r})),!0;default:return!1}})},[u,r,t,i,c,a,d,l,n])},o3=n(30453),o6=function(){var e=(0,o3.o)(),t=(0,b.useRef)(null),n=(0,b.useRef)(),r=(0,b.useRef)(),o=(0,b.useRef)(),i=(0,b.useCallback)(function(e){if(o.current){var t=o8(o.current),i=e.target;if(t&&i&&void 0!==n.current&&void 0!==r.current){var s=i.scrollTop-n.current;t.y=r.current-s}}},[]),s=(0,b.useCallback)(function(e,n){var r,o=t.current;if(o){var i=o.getBoundingClientRect(),s=n.point.y,a=null===(r=e.target)||void 0===r?void 0:r.closest("[draggable]"),c=null==a?void 0:a.parentElement;c&&(s<i.top+25&&(a!==c.firstElementChild||o.scrollTop>0)?o.scrollTop-=5:s>i.bottom-25&&(a!==c.lastElementChild||o.scrollTop<o.scrollHeight)&&(o.scrollTop+=5))}},[]),a=(0,b.useCallback)(function(){var i=t.current,s=o4(e);if(i&&s){o.current=s,n.current=i.scrollTop;var a=o8(s);a&&(r.current=a.y)}},[e]),c=(0,b.useCallback)(function(){n.current=void 0,r.current=void 0,o.current=void 0},[]);return{scrollerRef:t,onScroll:i,dragControls:e,onDrag:s,onDragStart:a,onDragEnd:c}},o4=function(e){try{return Array.from(e.componentControls).find(function(e){return e.isDragging})}catch(e){console.error("[caught] findDraggingElementControls",e);return}},o8=function(e){try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}};function o7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o7(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ie=(0,eJ.E)(f.k),it=(0,eJ.E)(h.xu),ir="data-".concat(oA.dh),io=function(e){var t=e.handleClose,n=e.editor,r=e.readOnly,o=(0,b.useState)(!1),i=o[0],s=o[1],a=(0,b.useRef)(null),c=oZ(n),l=c.cards,d=c.isDragging,u=c.selection,p=c.isLoaded,m=(0,b.useMemo)(function(){return(0,oK.HU)(u,n)},[n,u]).id,g=(0,Y.TL)(),v=(0,Y.CG)(oV.wg),j=(0,Y.CG)(oM.pe),y=(0,Y.CG)(oM.u9),C=(0,b.useRef)(d),O=o6(),k=O.scrollerRef,S=O.onScroll,E=O.dragControls,P=O.onDrag,D=O.onDragStart,A=O.onDragEnd,T=(0,b.useCallback)(function(e){return function(){if(C.current=!0,D(),a.current){var t=a.current.getBoundingClientRect().height;a.current.style.height="".concat(t,"px")}var n=v.includes(e)?v:[e];g((0,oV.WF)({selectedCardIdsToDrag:n})),g((0,oM.CA)({cardIds:l.map(function(e){return e.cardId}),leaderCardId:e,selectedCardIds:n}))}},[l,g,v,D]),R=(0,b.useCallback)(function(){n&&(g((0,oM.vL)()),n.commands.rearrangeCardsById(l.map(function(e){return e.cardId}),y),A())},[l,g,n,y,A]),_=(0,b.useCallback)(function(){a.current&&(a.current.style.height="auto"),C.current=!1},[]);o5({isFocused:i,readOnly:r,firstFocusedCardId:m,editor:n,isDragging:d}),(0,eI.O)({ref:a,handler:function(){g((0,oV.Mt)())}});var L=(0,w.ye)("filmstripWithScreenshots"),M=(0,w.ye)("screenshotsEnabled"),z=(0,Y.CG)(J.Pu),N=(0,eW.ff)("whiteAlpha.600","whiteAlpha.100"),Z=(0,eW.ff)("#F9FAFBDD","gray.900"),G=(0,eW.ff)("gray.800","gray.200"),F=(0,eW.ff)("blackAlpha.400","whiteAlpha.500"),U=(0,eW.ff)("trueblue.500","trueblue.200"),W=(0,eW.If)().colorMode,V=(0,b.useMemo)(function(){var e;return{"--fs-item-border-color":(e="dark"===W)?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)"}},[W]),B=(0,b.useMemo)(function(){return l.length>=100},[l.length]);return(0,ef.jsx)(ie,o9(o9({position:"absolute"},oT.wp),{},{transition:{duration:.2,delay:.2},direction:"column",left:2,top:12,bottom:2,justifyContent:"center",color:G,zIndex:oT.Xr,_hover:{".filmstrip-nubbin":{opacity:1}},children:(0,b.createElement)(f.k,o9(o9({},(0,I.Z)({},ir,!0)),{},{className:oT.sN,key:oT.sN,tabIndex:0,_focus:{outline:"none"},onFocus:function(){s(!0),null==n||n.commands.blur()},onBlur:function(e){var t;a.current&&null!==(t=a.current)&&void 0!==t&&t.contains(e.relatedTarget)||s(!1)},borderRadius:"md",bg:Z,borderWidth:"1px",borderColor:N,shadow:"lg",maxHeight:"100%",alignSelf:"flex-start",ref:a}),(0,ef.jsx)(it,{layoutScroll:!0,scrollbarGutter:"stable",overflowY:"auto",position:"relative",sx:o9({"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:F,borderRadius:"full"}},V),ref:k,onScroll:S,p:2,pl:1,children:(0,ef.jsx)(o_.t.Group,{onReorder:function(e){var t=e.map(function(e){return e.cardId});g((0,oM.k)({reorderedCardIds:t}))},values:l,axis:"y",children:n&&p&&l.map(function(e,t){var o=e.cardId,i=e.displayBehavior,s=v.includes(o);return(0,ef.jsx)(o_.t.Item,{value:e,onDragStart:T(o),onDragEnd:R,onDragTransitionEnd:_,className:"reorder-item",dragControls:E,onDrag:P,style:{position:"relative",listStyle:"none"},children:(0,ef.jsx)(oq,{readOnly:r,card:e,index:d&&void 0!==j[o]?j[o]:t+1,isFirst:0===t,useXsFontSize:B,shouldHide:"hidden"===i,theme:z,isDragInProgress:C.current,isEditorFocused:m===o&&n.isFocused,isFilmstripSelected:!!s,currentFocusedCard:m,showScreenshots:L,screenshotsEnabled:M})},o)})})}),(0,ef.jsx)(oD.TX,{children:"Close filmstrip"}),(0,ef.jsx)(h.xu,{as:eu.z,variant:"unstyled",position:"absolute",right:0,top:"50%",transform:"translate(calc(100% - 1px), -50%)",onClick:t,h:14,size:"sm",borderWidth:"1px",borderColor:N,borderLeft:"none",bg:Z,borderRadius:"0px 8px 8px 0px",opacity:0,transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",_hover:{color:U},className:"filmstrip-nubbin",children:(0,ef.jsx)(x.G,{icon:oR.A3,transform:"grow-2"})}))}))};function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ia=(0,eJ.E)(eu.z),ic=(0,b.memo)(function(){var e=(0,tK._i)().editor,t=(0,D.q)({defaultIsOpen:!0}),n=t.isOpen,r=t.onClose,o=t.onOpen,i=(0,Y.CG)(J.gh)===tZ.q.SLIDE_VIEW,s=(0,oA.Br)("comment"),a=(0,oA.Br)("edit"),c=(0,ek.Yy)();return!i&&s?(0,ef.jsx)(g.Wk,{isDark:c,children:(0,ef.jsx)(eX.M,{children:n?(0,ef.jsx)(io,{handleClose:r,editor:e,readOnly:!a},"filmstrip"):(0,ef.jsxs)(ia,is(is({},oT.wp),{},{transition:{duration:.2},isolation:"isolate",zIndex:oT.Xr,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-4))",borderRadius:"xl","data-guider-highlight":"filmstrip-opener",h:"var(--trigger-height)",w:8,onClick:o,children:[(0,ef.jsx)(oD.TX,{children:(0,ef.jsx)(d.cC,{id:"7ShgZt"})}),(0,ef.jsx)(x.G,{icon:oP.Cj})]}),"filmstrip-opener")})}):null});ic.displayName="Filmstrip";var il=n(32292),id=n(1472),iu=n(93319),ip=n(91128),ih=n(33837),im=n(65987),ix=function(e){var t,n=e.doc,r=(0,b.useState)(!1),o=r[0],i=r[1],s=null==n?void 0:n.id,a=null==n?void 0:null===(t=n.organization)||void 0===t?void 0:t.id,c=(0,tV.py)("manage",n),l=(0,C.bBo)({variables:{workspaceId:a},skip:!a||!c}).data,u=(0,im.uK)({doc:n,sites:null==l?void 0:l.sites}),f=(0,im.D5)({site:u,docId:s}),p=(0,ih.q)({doc:n,site:u,path:f}).publishAndDeploy,h=(0,b.useCallback)((0,tJ.Z)(tQ().mark(function e(){return tQ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,p();case 3:i(!1);case 4:case"end":return e.stop()}},e)})),[p]);return u?(0,ef.jsx)(eu.z,{size:"sm",variant:"solid",fontWeight:"400",leftIcon:(0,ef.jsx)(x.G,{icon:ip.A$}),onClick:h,isLoading:o,children:(0,ef.jsx)(d.cC,{id:"EEYbdt"})}):null},ig=n(3360),iv=n(92743),ij=n(63426),ib=n(88550),iy=n(1123),iC=n(6948),iO=(0,b.memo)(function(e){var t=e.doc,n=(0,b.useCallback)(function(){return ib.T.emit("openSharePanel",{view:"invite"})},[]),r=(0,nk.M)({id:"analyticsModalDisclosure"}),o=r.isOpen,i=r.onClose,s=r.onOpen,a=(0,nk.M)({id:"titleModalDisclosure"}),c=a.isOpen,l=a.onOpen,p=a.onClose,h=(0,tP.z$)(),m=(0,tV.SE)().user,v=(0,tV.py)("manage",t)&&!!m,j=(0,b.useCallback)(function(){t&&(t.title&&""!==t.title?n():l())},[t,n,l]),y=(0,b.useCallback)(function(e){return function(){null==h||h.track(tP.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),s()}},[h,null==t?void 0:t.id,s]);return v&&t?(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(f.k,{children:(0,ef.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,ef.jsx)(d.cC,{id:"YaUqUV"}),children:(0,ef.jsx)(iy.r,{"data-guider-highlight":"view-analytics-button","aria-label":u.ag._({id:"YaUqUV"}),onMouseDown:ts.br,onClick:y("toolbar_analytics_block"),icon:(0,ef.jsx)(x.G,{icon:iv.M})})})}),c&&(0,ef.jsx)(iC.S,{onClose:p,isOpen:c,onSaveSuccess:function(){p(),n()},docId:null==t?void 0:t.id}),o&&(0,ef.jsx)(ij.r,{doc:t,onSharePanelOpen:j,onAnalyticsPanelClose:i,isAnalyticsPanelOpen:o,mode:"full"})]}):null}),iw=n(24657),ik=n(67784),iS=n(94370),iI=n(67755),iE=n(67925),iP=n(73716),iD=n(10920),iA=n(15756),iT=n(81410),iR=n(5632),i_=n(1153);function iL(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iL(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var iz=(0,eJ.E)(f.k),iN=function(e){var t=e.doc;return(0,ef.jsx)(iz,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,ef.jsx)(eX.M,{initial:!1,children:(0,ef.jsx)(iW,{doc:t})})})},iZ=(0,b.memo)(function(e){var t=e.doc,n=(0,tK._i)().editor,r=(0,C.$gs)().isConnected,o=(0,eG.p)(),i=(0,b.useRef)(null),s=(0,b.useRef)(null),a=(0,C.D1_)(),c=(0,E.Z)(a,2),l=c[0],f=c[1].loading,p=(0,b.useState)(null),m=p[0],x=p[1],v=(0,b.useState)(!1),j=v[0],y=v[1],O=(0,b.useState)(!1),w=O[0],k=O[1],S=(0,tV.py)("edit",t),I=(0,b.useCallback)(function(){if(!n)return"";var e=(0,tL.N2)(n.state.doc,tz.KH),t=(0,E.Z)(e,1)[0];return t&&(0,eB.getCardTitle)(t.node.toJSON())||""},[n]);(0,b.useEffect)(function(){!t||j||f||(x(t.title||""),k(!!t.titleEdited))},[t,j,f]);var P=function(){i.current.style.width=s.current.offsetWidth+0+"px"},D=(0,eW.ff)("gray.800","gray.200");return(0,ef.jsx)(g.kH,{label:S?r?(0,ef.jsx)(d.cC,{id:"2wxgft"}):(0,ef.jsx)(d.cC,{id:"Cb+Bgk"}):null,"aria-label":u.ag._({id:"2wxgft"}),children:(0,ef.jsxs)(iI.C,{value:m||"",placeholder:m||I(),isDisabled:f||!S||!r,isPreviewFocusable:S,maxW:300,width:"100%",fontWeight:"normal",onCancel:function(){P(),y(!1)},onFocus:function(){P(),t&&!f&&y(!0)},onChange:function(e){P(),j&&(x(e),k(!!e))},onSubmit:function(){if(t&&!f){y(!1);var e=m||I();l({variables:{id:t.id,title:e,titleEdited:w}}).catch(function(e){console.error(e),o({title:(0,ef.jsx)(d.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})}},children:[(0,ef.jsx)(iE.w,{px:1,py:.5,display:j?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:w?D:"inherit"}),(0,ef.jsx)(iP.V,{ref:i,px:1,py:.5,color:w?D:"inherit",maxW:300,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,ef.jsx)(h.xu,{ref:s,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:n$().sanitize((m||"").replace(/\s/g,"&nbsp;"))}})]})})});iZ.displayName="EditableDocTitle";var iG=function(e){var t=e.cardId,n=e.isEllipsis,r=e.value,o=e.onClick,i=(0,oF.c)(t);if(n)return(0,ef.jsx)(x.G,{icon:iS.cN});if(!t&&!r)return null;var s=r||(null==i?void 0:i.title)||"";return(0,ef.jsx)(p.x,{noOfLines:1,onClick:o,maxW:180,fontWeight:"normal",children:s})},iF=function(e){var t=e.isPresentModeFlat;return function(e){var n=(0,J.gh)(e),r=(0,J.i2)(e)||"",o=(0,J.X9)(e).parents[r]||[];if("DOC_VIEW"===n||t)return[{isHome:!0},{isDocTitle:!0}];var i=o[0],s=o[o.length-1];return[{isHome:!0},o.length>1?{cardId:i}:null,o.length>2?{isEllipsis:!0}:null,o.length>0?{cardId:s}:null,{cardId:r}]}},iU=function(){var e=(0,w.ye)("presentModeFlat");return(0,Y.CG)(iF({isPresentModeFlat:e}),function(e,t){return JSON.stringify(e)===JSON.stringify(t)})},iW=(0,b.memo)(function(e){var t=e.doc,n=iU(),r=(0,i_.X)(Q.H.lastHomeUrl,"/"),o=(0,E.Z)(r,1)[0],i=(0,w.ye)("offline"),s=(0,tV.SE)().user,a=(0,C.$gs)().isConnected,c=(0,tK._i)().confirmNavigation,m=(0,iR.useRouter)().push,v=(0,ig.i)({base:"xs",sm:"sm"}),j=(0,eW.ff)("gray.500","gray.400"),b=(0,eW.ff)("gray.800","gray.100");return(0,ef.jsxs)(ei.U,{spacing:0,as:eu.z,textAlign:"left",px:0,_hover:{color:b},h:8,children:[(0,ef.jsx)(iD.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:v,spacing:["4px","8px"],variant:"plainButton",separator:(0,ef.jsx)(h.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,ef.jsx)(x.G,{icon:ik._t})}),children:n.map(function(e,r){if(!e)return null;var i=r===n.length-1,a=e.cardId,l=e.isEllipsis,d=e.isDocTitle,u=e.isHome,f=e.value,p=u?"home":l?"ellipsis":a||f||r;if(u&&!s)return null;var h={as:nN(),href:o||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,ef.jsx)(iA.g,{children:(0,ef.jsx)(iz,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,ef.jsx)(iT.A,iM(iM({isCurrentPage:i,pointerEvents:i&&!d?"none":"inherit",color:i?j:"inherit"},u?iM({},h):{}),{},{children:d?(0,ef.jsx)(iZ,{doc:t}):u?(0,ef.jsx)(eF.r,{href:h.href,onClick:function(e){e.preventDefault(),c().then(function(){m(h.href)})},mr:1,children:(0,ef.jsx)(x.G,{size:"1x",icon:iw.J9})}):(0,ef.jsx)(iG,{cardId:a,value:f,isEllipsis:l,onClick:function(){a&&(0,oU.D)({cardId:a,method:"push"})}})}))},p)},p)})}),!a&&(0,ef.jsx)(g.kH,{label:(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(p.x,{mr:2,children:(0,ef.jsx)(d.cC,{id:"ysdDIA"})}),i&&(0,ef.jsx)(p.x,{color:"gray.300",children:(0,ef.jsx)(d.cC,{id:"+QNhGE"})})]}),"aria-label":u.ag._({id:"IcHxhR"}),children:(0,ef.jsx)(f.k,{color:"gray.300",alignItems:"center",pr:3,children:(0,ef.jsx)(x.G,{icon:l.bK})})})]})});iW.displayName="BreadcrumbGroup";var iV=n(76547),iB=n(82642),iH=n(30807),iq=n(80040),iK=n(28957),iY=function(){var e=(0,tV.SE)(),t=e.user,n=e.anonymousUser,r=(0,y.I0)(),o=(0,eG.p)(),i=(0,tK._i)().editor,s=(0,y.v9)((0,J._h)((null==t?void 0:t.id)||n.id)),c=s.collaborators,l=s.followers;rT({editor:i,collaborators:c,user:t});var h=(0,y.v9)(J.Ok),m=(0,y.v9)(J.e0),x=(0,y.v9)(J.yn),v=(0,y.v9)(J.gs),j=(0,y.v9)(J.JA);(0,b.useEffect)(function(){h.forEach(function(e){o({duration:2e3,position:"bottom",render:function(){return(0,ef.jsxs)(f.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,ef.jsx)(rO.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:rI()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,ef.jsx)(p.x,{ml:2,children:(0,ef.jsx)(d.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[h,o]),(0,b.useEffect)(function(){var e=!x&&v&&!j;if(i&&e){o.closeAll();var t=o({id:"detached-toast",render:function(){return(0,ef.jsxs)(f.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,ef.jsx)(p.x,{size:"sm",mr:6,children:(0,ef.jsx)(d.cC,{id:"PjodLp"})}),(0,ef.jsxs)(t6.h,{size:"sm",alignItems:"center",children:[(0,ef.jsx)(eu.z,{onClick:function(){r((0,J.Qx)({attached:!0}))},variant:"solid",children:(0,ef.jsx)(d.cC,{id:"f/C2ic"})}),(0,ef.jsx)(g.kH,{label:(0,ef.jsx)(d.cC,{id:"5JWVnj"}),children:(0,ef.jsx)(R.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":u.ag._({id:"5JWVnj"}),icon:(0,ef.jsx)(iB.T,{}),onClick:function(){r((0,J.Qx)({attached:!1,following:null}))}})})]})]})},position:"bottom",duration:null});return function(){o.close(t)}}},[i,x,v,j,o,r]),(0,b.useEffect)(function(){v||!i||i.isDestroyed||r((0,J.Qx)({following:null}))},[i,v,r]);var C=(0,ig.i)({base:4,md:6,xl:8})||6,O=C/(l.length?2:1),w=C/(c.length?2:1);return(0,ef.jsx)(f.k,{children:(0,ef.jsxs)(ei.U,{divider:(0,ef.jsx)(iH.c,{borderColor:"gray.200"}),children:[l.length&&(0,ef.jsx)(iJ,{type:a.FOLLOWERS,collaborators:l,max:w,isEveryone:0===c.length,localCollaborator:m,localIsAttached:x}),c.length&&(0,ef.jsx)(iJ,{type:a.COLLABORATORS,collaborators:c,max:O,isEveryone:0===l.length,localCollaborator:m,localIsAttached:x})]})})};(o=a||(a={})).FOLLOWERS="FOLLOWERS",o.COLLABORATORS="COLLABORATORS";var iJ=function(e){var t=e.collaborators,n=e.localCollaborator,r=e.localIsAttached,o=e.type,i=e.max,s=e.isEveryone,c=rA(),l=o===a.FOLLOWERS,h=t.length>i,m=h?t.slice(0,i-1):t,x=h?t.length-i+1:0,v=function(e){var t=e.localIsFollowing,n=e.collaborator;l||c({localIsFollowing:t,localIsAttached:r,collaborator:n})};return(0,ef.jsx)(iK.S,{children:(0,ef.jsxs)(iq.H,{size:"sm",spacing:l?-2:0,children:[l&&(0,ef.jsx)(iX,{isEveryone:s}),m.map(function(e,t){var o,i=(null==n?void 0:null===(o=n.memoState)||void 0===o?void 0:o.following)===e.sessionId,s=!!e.idleSince,a=!l&&(h||m.length-1!==t);return(0,ef.jsx)(g.Vw,{ignoreFallback:!0,name:e.name,label:(0,ef.jsxs)(f.k,{direction:"column",justify:"center",align:"center",children:[(0,ef.jsx)(p.x,{children:e.name}),(0,ef.jsx)(p.x,{fontSize:"xs",children:l?(0,ef.jsx)(d.cC,{id:"iRohzP"}):i&&r?(0,ef.jsx)(d.cC,{id:"1QTvS5"}):(0,ef.jsx)(d.cC,{id:"2Ldadb"})})]}),pointerEvents:s?"none":"auto",opacity:s?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:i&&r,bg:e.color,shadow:"base",color:rI()(e.color).isDark()?"white":"black",cursor:l?"":"pointer",boxProps:a?{marginEnd:-2}:{},onClick:function(){return v({localIsFollowing:i,collaborator:e})}},e.sessionId)}),x>0&&(0,ef.jsxs)(g.Z9,{tooltipLabel:u.ag._({id:"25VyZX"}),onClick:function(e){var r,o=t.find(function(t){return t.id===e.id});v({localIsFollowing:!!(o&&(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===o.sessionId),collaborator:o})},avatars:t,count:x,disabled:l,children:[(0,ef.jsx)(p.x,{px:2,children:l?(0,ef.jsx)(d.cC,{id:"vliZud",values:{0:t.length}}):(0,ef.jsx)(d.cC,{id:"sC4bhw",values:{0:t.length}})}),!l&&(0,ef.jsx)(p.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,ef.jsx)(d.cC,{id:"miJbY4"})}),(0,ef.jsx)(on.R,{})]})]})})},iX=function(e){var t=e.isEveryone,n=(0,b.useState)(!1),r=n[0],o=n[1],i=(0,b.useState)(!1),s=i[0],a=i[1],c=(0,b.useState)(!1),l=c[0],u=c[1];return((0,b.useEffect)(function(){!r&&t&&(a(!0),o(!0),setTimeout(function(){a(!1)},3e3))},[t,r]),t)?(0,ef.jsx)(h.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,ef.jsx)(g.kH,{label:(0,ef.jsx)(d.cC,{id:"w7dTyp"}),isOpen:l||s,children:(0,ef.jsx)(h.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},children:(0,ef.jsx)(x.G,{icon:iV.Md})})})}):(0,ef.jsx)(h.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,ef.jsx)(x.G,{icon:iV.Md})})},iQ=n(52099),i$=n(53182),i0=n(57895),i1=n(68871),i2=n(90282),i5=n(24799),i3=n(1672),i6=n(10649),i4=n(86378),i8=n(82904),i7=n(4036),i9=n(82282),se=n(31807),st=n(66397),sn=n(53776),sr=n(20010),so=n(48273),si=n(76360),ss=n(75342),sa=n(27777),sc=function(e){var t=e.onAddDomain,n=e.isAddingDomain,r=(0,b.useState)(""),o=r[0],i=r[1],s=(0,im.m6)(o);return(0,ef.jsx)(si.Z,{my:2,variant:"filled",children:(0,ef.jsx)(ss.e,{fontSize:"sm",children:(0,ef.jsxs)(ea.K,{spacing:5,children:[(0,ef.jsx)(p.x,{fontSize:"xl",fontWeight:"bold",children:(0,ef.jsx)(d.cC,{id:"MPZogu",values:{GAMMA_PROPER_NOUN:ev.N6}})}),(0,ef.jsxs)(nY.NI,{children:[(0,ef.jsx)(nJ.l,{children:(0,ef.jsx)(d.cC,{id:"49uOXe"})}),(0,ef.jsxs)(ei.U,{children:[(0,ef.jsx)(sa.I,{bg:"white",placeholder:"www.yourdomain.com",value:o,onChange:function(e){return i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&s&&(e.preventDefault(),t(o))}}),(0,ef.jsx)(ea.K,{children:(0,ef.jsx)(g.kH,{label:(0,ef.jsx)(d.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:s,children:(0,ef.jsx)(eu.z,{isDisabled:!s,variant:"solid",onClick:function(){return t(o)},isLoading:n,children:(0,ef.jsx)(d.cC,{id:"SbL5Je"})})})})]})]})]})})})},sl=n(48453),sd=n(86554),su=n(21891),sf=n(92936),sp=n(60807),sh=n(72360),sm=n(48322),sx=n(35837),sg=n(93848),sv=function(e){var t=e.path,n=e.pathError,r=e.conflictingRoute,o=e.onPathUpdate,i=e.isPathInputDisabled,s=e.onClose;return(0,ef.jsxs)(ea.K,{pb:6,children:[(0,ef.jsx)(ea.K,{direction:"row",children:(0,ef.jsxs)(p.x,{children:[(0,ef.jsx)(d.cC,{id:"dq8+qI"}),":"," "]})}),(0,ef.jsx)(iu.L,{}),(0,ef.jsx)(ea.K,{spacing:2,children:(0,ef.jsx)(ei.U,{spacing:1,children:(0,ef.jsxs)(nY.NI,{as:"fieldset",isInvalid:void 0!==n&&n,children:[(0,ef.jsx)(ei.U,{children:(0,ef.jsxs)(su.B,{children:[(0,ef.jsx)(sf.Ui,{children:"/"}),(0,ef.jsx)(sa.I,{isDisabled:i,bg:"white",flex:2,value:t,onChange:function(e){o((0,im.pi)(e.currentTarget.value))}})]})}),(0,ef.jsxs)(ea.K,{spacing:4,children:[(0,ef.jsx)(nY.Q6,{fontSize:"sm",children:(0,ef.jsxs)(ea.K,{alignContent:"flex-start",justifyContent:"space-between",direction:"row",w:"100%",children:[(0,ef.jsx)(ea.K,{spacing:1,children:(0,ef.jsx)(p.x,{color:"gray.500",children:(0,ef.jsx)(d.cC,{id:"ZMlbHK"})})}),r&&(0,ef.jsx)(sp.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,ef.jsx)(p.x,{fontSize:"xs",children:(0,ef.jsx)(d.cC,{id:"DQaTdC",components:{0:(0,ef.jsx)(eF.r,{textDecoration:"underline",href:(0,nV.Gn)({docId:r.docId}),target:"_blank"})}})})})]})}),(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.500",mt:4,children:(0,ef.jsx)(d.cC,{id:"g4cZni",components:{0:(0,ef.jsx)(eu.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:function(){s(),sg.pw.emit(sg.TI.OPEN_PAGE_SETUP,"preview")}})}})}),(0,ef.jsxs)(sh.b,{colorScheme:"gray",bg:"blackAlpha.100",children:[(0,ef.jsx)(sm.z,{}),(0,ef.jsxs)(ea.K,{children:[(0,ef.jsx)(p.x,{fontWeight:"bold",fontSize:"sm",children:(0,ef.jsx)(d.cC,{id:"E29kJ/"})}),(0,ef.jsxs)(sx.QI,{pl:"4",spacing:"1",fontSize:"xs",children:[(0,ef.jsxs)(sx.HC,{children:[(0,ef.jsx)(d.cC,{id:"tB9qsK",values:{GAMMA_PROPER_NOUN:ev.N6}})," ",(0,ef.jsx)(g.Yq,{label:u.ag._({id:"9sEGjz"})})]}),(0,ef.jsx)(sx.HC,{children:(0,ef.jsx)(d.cC,{id:"8Ijq31"})}),(0,ef.jsx)(sx.HC,{children:(0,ef.jsx)(d.cC,{id:"0rExAx"})})]})]})]})]})]})})})]})},sj=n(92619),sb=function(e){var t=e.onClose,n=e.onConfirm,r=(0,b.useCallback)(function(){t(),n()},[t,n]);return(0,ef.jsxs)(sr.u_,{onClose:t,isOpen:!0,children:[(0,ef.jsx)(t0.Z,{}),(0,ef.jsxs)(so.h,{children:[(0,ef.jsx)(sj.x,{children:(0,ef.jsx)(d.cC,{id:"dqU8B8"})}),(0,ef.jsx)(t2.o,{}),(0,ef.jsx)(t5.f,{children:(0,ef.jsxs)(ea.K,{spacing:4,children:[(0,ef.jsx)(p.x,{fontWeight:"bold",children:(0,ef.jsx)(d.cC,{id:"TKppIR"})}),(0,ef.jsx)(p.x,{children:(0,ef.jsx)(d.cC,{id:"jvL5br"})})]})}),(0,ef.jsx)(t3.m,{children:(0,ef.jsxs)(t6.h,{children:[(0,ef.jsx)(eu.z,{variant:"ghost",onClick:t,children:(0,ef.jsx)(d.cC,{id:"dEgA5A"})}),(0,ef.jsx)(eu.z,{variant:"ghost",colorScheme:"red",onClick:r,children:(0,ef.jsx)(d.cC,{id:"3EbjfR"})})]})})]})]})},sy=n(84558),sC=n(3002),sO=function(e){var t=e.heading,n=e.subheading,r=e.icon,o=e.children;return(0,ef.jsxs)(f.k,{gap:4,alignItems:"center",children:[(0,ef.jsx)(f.k,{h:"8",w:"8",bg:"gray.200",borderRadius:"full",justifyContent:"center",alignItems:"center",color:"gray.800",children:(0,ef.jsx)(x.G,{icon:r})}),(0,ef.jsxs)(ea.K,{spacing:0,children:[t,n]}),(0,ef.jsx)(iu.L,{}),o]})},sw=function(e){var t,n,r=e.doc,o=e.site,i=e.path,s=e.isPublishing,a=void 0!==s&&s,c=e.isUnpublishing,l=void 0!==c&&c,f=e.enabled,h=e.publishButtonTooltipLabel,m=e.onPublishClick,v=e.onUnpublishClick,j=null==r?void 0:r.title,y=!!(null==r?void 0:r.publishedSnapshotId),C=null==o?void 0:null===(t=o.currentDeployment)||void 0===t?void 0:t.deploymentTime,O=y&&!!C&&(null==o?void 0:o.currentDeployment)&&(null==r?void 0:r.publishedTime)&&new Date(null==o?void 0:o.currentDeployment.deploymentTime)>new Date(r.publishedTime),w=null==o?void 0:null===(n=o.domains)||void 0===n?void 0:n[0],k=(0,im.mn)({domain:w,path:i}),S=(0,b.useMemo)(function(){return{fromNow:(0,sC.Km)(C),calendar:(0,sC.p6)(C,"PPpp")}},[C]);return(0,ef.jsx)(sO,{heading:(0,ef.jsxs)(ei.U,{children:[(0,ef.jsx)(p.x,{noOfLines:1,children:j}),O&&(0,ef.jsx)(i7.C,{colorScheme:"green",children:"Live"})]}),subheading:O?(0,ef.jsxs)(ei.U,{spacing:1.5,fontSize:"sm",children:[(0,ef.jsx)(p.x,{color:"gray.500",fontSize:"sm",children:(0,ef.jsx)(d.cC,{id:"ay/UB+",values:{0:S.fromNow},components:{0:(0,ef.jsx)(g.kH,{label:S.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,ef.jsx)(p.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})}),(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.500",children:""}),(0,ef.jsx)(eu.z,{variant:"link",size:"sm",onClick:v,isDisabled:a||l,isLoading:l,children:(0,ef.jsx)(d.cC,{id:"4DLZUa"})})]}):l||a?(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.500",children:(0,ef.jsx)(nx.$,{size:"xs"})}):(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.500",children:(0,ef.jsx)(d.cC,{id:"mY40hj"})}),icon:sy.Rk,children:(0,ef.jsxs)(t6.h,{children:[(0,ef.jsx)(g.kH,{label:h,shouldWrapChildren:!0,placement:"top",children:(0,ef.jsx)(eu.z,{variant:"solid",isDisabled:!f,isLoading:a||l,loadingText:a?u.ag._({id:"Bdha5y"}):l?u.ag._({id:"JZOp0b"}):void 0,onClick:m,children:(0,ef.jsx)(d.cC,{id:"qcawwg"})})}),O&&(0,ef.jsx)(g.kH,{label:k,shouldWrapChildren:!0,placement:"top",children:(0,ef.jsx)(eu.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:k,isDisabled:!f,rightIcon:(0,ef.jsx)(x.G,{icon:nT.faArrowUpRightFromSquare}),children:(0,ef.jsx)(d.cC,{id:"Zel0o2"})})})]})})};function sk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sk(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sI={path:""},sE=function(e){var t,n=e.isOpen,r=e.onClose,o=e.doc,i=(0,eG.p)(),s=(0,b.useState)(sI),a=s[0],c=s[1],l=(0,b.useState)(sI),u=l[0],f=l[1],p=(0,b.useState)(!1),h=p[0],m=p[1],x=o.id,v=null===(t=o.organization)||void 0===t?void 0:t.id,j=(0,sn.bBo)({variables:{workspaceId:v},skip:!v}),y=j.data,C=j.refetch,O=(0,nk.M)({id:"domainSetupModal"}),w=O.isOpen,k=O.onOpen,S=O.onClose,I=(0,nk.M)({id:"publishModalWarning"}),E=I.isOpen,P=I.onOpen,D=I.onClose,A=null==y?void 0:y.sites,T=(0,im.uK)({doc:o,sites:A}),R=(0,im.D5)({site:T,docId:x}),_=(0,im.Rh)({site:T,docId:x}),L=(0,im.gT)({routes:(null==T?void 0:T.routes)||[],path:a.path,docId:x}),M=null==T?void 0:T.domains.find(function(e){return"pending"===e.status}),z=a.path!==u.path||void 0===R,N=!!o&&!!y,Z=!rk()(a,u),G=(0,b.useState)("coldStart"),F=G[0],U=G[1],W=(0,b.useState)(null),V=W[0],B=W[1],H=(0,b.useState)(!1),q=H[0],K=H[1],Y=!!q&&!L&&!1===h,J=(0,b.useState)(),X=J[0],Q=J[1],$=(0,ih.q)({doc:o,site:T,path:a.path}),ee=$.publishAndDeploy,et=$.addDomain,en=$.isAddingDomain,er=$.createSite,eo=$.isCreatingSite,ei=$.unpublishAndDeploy,es=$.updateRoutes;(0,b.useEffect)(function(){if(M){var e=setInterval(function(){C()},1e4);return function(){clearInterval(e)}}},[M,C,T]),(0,b.useEffect)(function(){N&&T&&K(!0)},[N,T,R]),(0,b.useEffect)(function(){N&&T&&U("hasDomains")},[N,T]),(0,b.useEffect)(function(){c({path:R||""}),f({path:R||""})},[R]);var el=(0,b.useCallback)(function(e){Q(e),k()},[k]),ed=(0,b.useCallback)((0,tJ.Z)(tQ().mark(function e(){return tQ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(!L){e.next=5;break}return i({description:(0,ef.jsx)(d.cC,{id:"ldkJkh",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc}}),status:"error",position:"top",duration:5e3,isClosable:!0}),e.abrupt("return");case 5:if(m("publish"),!z){e.next=9;break}return e.next=9,es();case 9:return e.next=11,ee();case 11:m(!1);case 12:case"end":return e.stop()}},e)})),[L,x,z,ee,i,es]),eu=(0,b.useCallback)((0,tJ.Z)(tQ().mark(function e(){return tQ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m("unpublish"),e.next=3,ei();case 3:m(!1);case 4:case"end":return e.stop()}},e)})),[ei]),ep=(0,b.useCallback)(function(){Z?P():r()},[Z,r,P]),eh=(0,b.useCallback)(function(e){"addDomain"===V?(et(e),S()):"createSite"===V&&(er(e),S())},[et,V,er,S]);return console.log("%cPublishWebsite debug","background-color: #cc00ff",{doc:o,sites:A,siteToUse:T,pathForPathEditor:R}),(0,ef.jsx)(g.Wk,{isDark:!1,children:(0,ef.jsxs)(sr.u_,{isOpen:n,onClose:ep,size:"4xl",closeOnOverlayClick:!1,children:[(0,ef.jsx)(t0.Z,{}),(0,ef.jsx)(so.h,{children:N?(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsxs)(ea.K,{px:6,py:4,borderBottomWidth:"1px",children:[(0,ef.jsx)(ec.X,{mb:2,children:(0,ef.jsx)(d.cC,{id:"Khu3PV"})}),"hasDomains"===F&&(0,ef.jsx)(sw,{doc:o,path:_,site:T,enabled:Y,publishButtonTooltipLabel:q?void 0===R?(0,ef.jsx)(d.cC,{id:"O7BXvp"}):void 0:(0,ef.jsx)(d.cC,{id:"XDmUdC"}),onPublishClick:ed,onUnpublishClick:eu,isPublishing:"publish"===h,isUnpublishing:"unpublish"===h})]}),(0,ef.jsx)(t2.o,{}),(0,ef.jsx)(t5.f,{children:(0,ef.jsxs)(ea.K,{spacing:6,children:["coldStart"===F&&(0,ef.jsx)(sc,{onAddDomain:function(e){B("createSite"),Q(e),k()},isAddingDomain:eo}),"hasDomains"===F&&T&&(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(sl.T,{path:_,site:T,onDomainSetupClick:el,onAddDomain:function(e){k(),Q(e),B("addDomain")},isAddingDomain:en,refetchSites:C}),(0,ef.jsx)(sv,{path:a.path,pathError:!!L,conflictingRoute:L,isPathInputDisabled:!1!==h,onPathUpdate:function(e){c(function(t){return sS(sS({},t),{},{path:e})})},onClose:r})]})]})})]}):(0,ef.jsx)(nx.$,{})}),w&&X&&(0,ef.jsx)(sd.w,{domainName:X,isOpen:w,onClose:function(){S(),B(null)},onDomainConfirmed:V?eh:null}),E&&(0,ef.jsx)(sb,{onClose:D,onConfirm:r})]})})},sP=function(e){var t,n=e.doc,r=(0,nk.M)({id:"publishModal"}),o=r.isOpen,i=r.onClose,s=r.onOpen,a=null===(t=n.organization)||void 0===t?void 0:t.id,c=(0,sn.bBo)({variables:{workspaceId:a},skip:!a}).data,l=(null==c?void 0:c.sites)||[];return(0,ef.jsxs)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:ip.A$,fixedWidth:!0}),onClick:function(){s()},children:[(0,ef.jsxs)(ei.U,{children:[l.length>0?(0,ef.jsx)(d.cC,{id:"BCIqs5"}):(0,ef.jsx)(d.cC,{id:"TMYPtj"}),(0,ef.jsx)(iu.L,{}),(0,ef.jsx)(i7.C,{colorScheme:"green",ml:2,children:(0,ef.jsx)(d.cC,{id:"YBt9YP"})})]}),n&&o&&(0,ef.jsx)(sE,{doc:n,isOpen:o,onClose:i})]})},sD=n(22103),sA=n(65903),sT=n.n(sA),sR=n(87268),s_=function(e){var t=(0,Y.CG)(J.e_),n=(0,Y.TL)(),r=(0,b.useCallback)(function(e){n((0,J.Qt)({docAttrs:{format:e}}))},[n]);return(0,ef.jsx)(t6.h,{size:"sm",isAttached:!0,my:2,children:sR.n.map(function(e){return(0,ef.jsx)(eu.z,{isActive:e.key===t.key,onClick:function(){return r(e.key)},children:sT()(e.label)},e.key)})})},sL=n(96622),sM=n(20387),sz=function(){var e;return e={},(0,I.Z)(e,tZ.q.DOC_VIEW,{buttonLabel:(0,ef.jsx)(d.cC,{id:"eZb+lw"}),shortcutIcon:sM.zc,shortcutKeys:(0,g.cE)("Mod+Enter"),shortcutLabel:(0,ef.jsx)(d.cC,{id:"9vUn+H"})}),(0,I.Z)(e,tZ.q.SLIDE_VIEW,{buttonLabel:(0,ef.jsx)(d.cC,{id:"ydzS9x"}),shortcutIcon:sL.Bg,shortcutKeys:"Esc",shortcutLabel:(0,ef.jsx)(d.cC,{id:"5Rfo7J"})}),e},sN=n(69539),sZ=n(26658),sG=(0,rF.ZP)("mod+Enter"),sF=(0,rF.ZP)("Esc"),sU=(0,rF.ZP)("mod+Esc"),sW=(0,rF.ZP)("shift+mod+Enter"),sV=function(e,t){var n=document.querySelector(t);if(n){var r=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(r.width/2,100),100)}},sB=function(e){var t=e.editorWrapperEl,n=e.scrollingParentSelector,r=(0,Y.TL)(),o=(0,b.useState)(!1),i=o[0],s=o[1],a=(0,b.useState)(!1),c=a[0],l=a[1],d=(0,tK._i)().editor,u=(0,Y.CG)(J.gh),f=(0,b.useRef)(u);(0,b.useEffect)(function(){f.current=u},[u]);var p=(0,Y.CG)(J.yq),h=(0,Y.CG)(J.JA),m=(0,Y.CG)(rK.C),x=(0,tP.z$)(),g=(0,b.useCallback)(function(e){d&&!d.isDestroyed&&(e===tZ.q.SLIDE_VIEW?((0,sZ.E0)(d.state.doc,r),(0,rX.U6)(d,!1),d.commands.spotlightCurrentCard()):(d.commands.turnOffSpotlight(!0),sV(d,n)),r(function(t){t((0,J.Qx)({attached:!1})),t((0,J.PM)({mode:e}))}))},[r,d,n]),v=(0,b.useCallback)(function(){try{var e,t,n,r;if(null!==(e=document.body)&&void 0!==e&&e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}null!==(t=document.body)&&void 0!==t&&t.webkitRequestFullscreen&&(null===(r=document.body)||void 0===r||r.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),j=(0,b.useCallback)(function(){try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),y=(0,w.ye)("realUserMetrics"),C=(0,sN.wK)(y),O=C.recordExitSlideModePerformance,k=C.recordEnterSlideModePerformance,S=(0,b.useCallback)(function(e){var t=e.fullscreen,n=void 0!==t&&t;f.current!==tZ.q.SLIDE_VIEW&&(g(tZ.q.SLIDE_VIEW),n&&v(),null==x||x.trackDocEvent(tP.AA.PRESENT_MODE_ENTERED),k({isFullscreen:n}),setTimeout(function(){document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[g,k,v,f,x]),I=(0,b.useCallback)(function(){f.current!==tZ.q.DOC_VIEW&&(g(tZ.q.DOC_VIEW),i&&j(),null==x||x.trackDocEvent(tP.AA.PRESENT_MODE_EXITED),O({isFullscreen:i}))},[g,i,j,O,f,x]);return(0,b.useEffect)(function(){var e=function(){null!==document.fullscreenElement||c||I(),null!==document.webkitCurrentFullScreenElement||c||I(),s(function(e){return!e}),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[c,I,j]),(0,rM.r)(function(){d&&!d.isDestroyed&&u===tZ.q.DOC_VIEW&&requestAnimationFrame(function(){var e=d.state.selection;e instanceof rP.c&&d.commands.command(function(t){return t.tr.setSelection(e.createSelectionNear()),!0})})},[d,u]),(0,b.useEffect)(function(){return rU.F7.on("keydown","PRESENT_BLOCK",function(e){var t,n,r,o=f.current===tZ.q.SLIDE_VIEW;if(!m){if(sG(e)){if(null!=e&&null!==(t=e.target)&&void 0!==t&&t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),S({fullscreen:!1}),!0}if(sW(e)){if(null!=e&&null!==(n=e.target)&&void 0!==n&&n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),S({fullscreen:!0}),!0}if(sU(e)&&o)return I(),!0;if(sF(e)&&o&&!p&&!h){if(null!=e&&null!==(r=e.target)&&void 0!==r&&r.closest("[data-gamma-child-tiptap-editor]"))return;return I(),!0}}})},[S,I,v,p,h,t,m]),{enterSlideView:S,exitSlideView:I,enterFullscreen:v,exitFullscreen:j,exitedFullscreenByClick:c,isFullscreen:i,setIsFullscreen:s,setExitedFullscreenByClick:l}},sH=function(e){var t=e.editorWrapperEl,n=e.scrollingParentSelector,r=(0,Y.CG)(J.gh),o=(0,w.ye)("presentFullScreen"),i=sz()[r],s=i.shortcutIcon,a=i.shortcutKeys,c=i.buttonLabel,l=sB({editorWrapperEl:t,scrollingParentSelector:n}),d=l.enterSlideView,u=l.exitSlideView;return(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:s,fixedWidth:!0}),command:a,onClick:function(){r===tZ.q.SLIDE_VIEW?u():d({fullscreen:o})},children:c})},sq=n(75156),sK=n(82757),sY=n(20466);function sJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sJ(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sQ=function(e){var t,n,r=e.doc,o=e.editorWrapperEl,i=e.scrollingParentSelector,s=(0,tV.SE)().user,a=(0,C.$gs)().isConnected,c=(0,rh.e)(),l=(0,tK._i)().editor,u=(0,sq.$)(null==r?void 0:r.title),f=(null==r?void 0:r.createdTime)&&(0,i9.Z)((0,se.Z)(r.createdTime),"PPP"),m=null==r?void 0:r.id,v=(0,nk.M)({id:"snapshotsDrawer"}),j=v.isOpen,y=v.onClose,O=v.onOpen,k=(0,nk.M)({id:"analyticsPanelDisclosure"}),S=k.isOpen,I=k.onClose,P=k.onOpen,D=(0,C.LT4)(),A=(0,E.Z)(D,1)[0],T=(0,C.iX9)(),R=(0,E.Z)(T,1)[0],_=(0,tP.z$)(),L=(0,tV.py)("view",r)&&!!s,M=(0,tV.py)("edit",r),z=(0,tV.py)("manage",r)&&!!s,N=(0,w.ye)("pageSetup")&&M,Z=!!(s&&0!==s.workspaceMemberships.length),G=(0,w.ye)("publishing"),F=(0,w.ye)("docFormats"),U=(0,Y.CG)(J.hN),W=(0,b.useCallback)(function(){null==_||_.track(tP.AA.DOC_ANALYTICS_VIEWED,{docId:m,source:"toolbar_doc_menu",type:"personal"}),P()},[_,m,P]),V=(0,b.useCallback)(function(e){return function(){if(m){var t={id:m};e?A({variables:t,optimisticResponse:{archiveDoc:sX(sX({},t),{},{archived:e,__typename:"Doc"})}}):R({variables:t,optimisticResponse:{unarchiveDoc:sX(sX({},t),{},{archived:e,__typename:"Doc"})}})}}},[A,m,R]),B=(0,b.useCallback)(function(){l&&l.commands.undo()},[l]),H=(0,nk.M)({id:"codeEditor"}),q=H.isOpen,K=H.onOpen,X=H.onClose,Q=(0,w.ye)("docCustomCode")&&M;return(0,ef.jsxs)(r7.v,{children:[(0,ef.jsx)(r9.j,{as:iy.r,borderRadius:"md",isDisabled:j,icon:(0,ef.jsx)(x.G,{icon:iS.cN}),onMouseDown:ts.br,"data-testid":"doc-toolbar-menu-button"}),(0,ef.jsx)(eE.h,{children:r&&(0,ef.jsxs)(oe.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:[(0,ef.jsxs)(h.xu,{px:4,py:2,children:[(0,ef.jsx)(p.x,{noOfLines:6,children:u}),(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,ef.jsx)(d.cC,{id:"jlWdji",values:{createdTime:f}})}),(0,ef.jsx)(g.kH,{label:null==r?void 0:null===(t=r.createdBy)||void 0===t?void 0:t.email,children:(0,ef.jsx)(p.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,ef.jsx)(d.cC,{id:"t490IT",values:{0:null==r?void 0:null===(n=r.createdBy)||void 0===n?void 0:n.displayName}})})}),F&&(0,ef.jsx)(s_,{})]}),(0,ef.jsx)(on.R,{}),(0,ef.jsx)(st.V,{label:(0,ef.jsx)(d.cC,{id:"IdcoRx"}),isConnected:a,maxWidth:"300px"}),a&&(0,ef.jsxs)(ef.Fragment,{children:[!!s&&!z&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:iv.M,fixedWidth:!0}),onClick:W,children:(0,ef.jsx)(d.cC,{id:"ZlwDi6"})}),G&&z&&(0,ef.jsx)(sP,{doc:r}),(0,ef.jsx)(sH,{editorWrapperEl:o,scrollingParentSelector:i}),Z&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:i4.kZ,fixedWidth:!0}),onClick:function(){l&&c({docId:m,initialContent:l.getJSON(),source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,nW.Q5)()})},children:(0,ef.jsx)(d.cC,{id:"euc6Ns"})}),L&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:i6.kw,fixedWidth:!0}),onClick:function(){ib.T.emit("openSharePanel",{view:"export"})},children:(0,ef.jsx)(d.cC,{id:"U8WPSi"})}),N&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:i3.gr,fixedWidth:!0}),onClick:function(){ib.T.emit("openPageSetup","cards")},children:(0,ef.jsxs)(ei.U,{children:[(0,ef.jsx)(d.cC,{id:"Kx2GmY"}),(0,ef.jsx)(iu.L,{}),(0,ef.jsx)(i7.C,{colorScheme:"green",ml:2,children:(0,ef.jsx)(d.cC,{id:"isRobC"})})]})}),Q&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:i5.dT,fixedWidth:!0}),onClick:K,children:(0,ef.jsxs)(ei.U,{children:[(0,ef.jsx)(d.cC,{id:"cnlGIm"}),(0,ef.jsx)(iu.L,{}),(0,ef.jsx)(i7.C,{colorScheme:"green",ml:2,children:(0,ef.jsx)(d.cC,{id:"YBt9YP"})})]})}),U&&(0,ef.jsx)(on.R,{}),U&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:i2.faArrowRotateLeft,fixedWidth:!0}),onClick:B,command:(0,g.cE)("Mod+Z"),children:(0,ef.jsx)(d.cC,{id:"9uI/rE"})}),M&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:i1.SZ,fixedWidth:!0}),onClick:O,children:(0,ef.jsx)(d.cC,{id:"6Z5x06"})}),z&&(0,ef.jsx)(on.R,{}),z?r.archived?(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:i0.Ze,fixedWidth:!0}),onClick:V(!1),children:(0,ef.jsx)(d.cC,{id:"yKu/3Y"})}):(0,ef.jsx)(i8.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,ef.jsx)(x.G,{icon:eM.$,fixedWidth:!0}),onClick:V(!0),children:(0,ef.jsx)(d.cC,{id:"1C/Yjq"})}):null]})]})}),r&&(0,ef.jsx)(sK.Z,{doc:r,isOpen:j,onClose:y}),r&&S&&(0,ef.jsx)(ij.r,{doc:r,isAnalyticsPanelOpen:S,onAnalyticsPanelClose:I,mode:"personal"}),Q&&(0,ef.jsx)(sD.B,{editor:l,isOpen:q,onClose:X}),N&&(0,ef.jsx)(sY.T,{editor:l})]})},s$=n(22595),s0=n(26886),s1=n(71528),s2=n(26384),s5=n(26673),s3=n(91930),s6=n(7328),s4=n(84807),s8=n(28165),s7=n(35931),s9={followOnStart:"follow_on_start",followingId:"following_id"},ae=function(e,t){var n=t.followOnStart,r=t.followingId,o=new URL(e);return r&&o.searchParams.append(s9.followingId,r),n&&o.searchParams.append(s9.followOnStart,"true"),o.toString()},at=function(e){switch(e){case"edit":return u.ag._({id:"UZN1cZ"});case"comment":return u.ag._({id:"jFTs0A"});case"view":return u.ag._({id:"Ya6CJ0"});default:return u.ag._({id:"Txd1qM"})}},an=function(e){var t,n,r=e.isOpen,o=e.onClose,i=e.accessLinkUrl,s=e.onPlayClick,a=(0,tV.SE)().user,l=(0,iR.useRouter)().replace,f={followOnStart:!0,followingId:null==a?void 0:a.id},m=(0,b.useState)(f),v=m[0];m[1];var j=ae(i,v),y=(0,tV.SE)(),C=y.user,O=y.color,w=(0,Y.CG)(tY.yx),k=null==w?void 0:null===(t=w.accessLinks)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.permission,S=(0,s8.keyframes)(c||(c=(0,s6.Z)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "])));return(0,ef.jsx)(g.Wk,{isDark:!1,children:(0,ef.jsxs)(sr.u_,{isOpen:r,onClose:o,size:"lg",children:[(0,ef.jsx)(t0.Z,{}),(0,ef.jsxs)(so.h,{children:[(0,ef.jsx)(sj.x,{children:(0,ef.jsx)(d.cC,{id:"88XnIQ"})}),(0,ef.jsx)(t2.o,{}),(0,ef.jsx)(ed.i,{}),(0,ef.jsx)(t5.f,{pt:"6",children:(0,ef.jsxs)(ea.K,{spacing:"4",children:[(0,ef.jsx)(p.x,{children:(0,ef.jsx)(d.cC,{id:"oYTLJe",values:{0:at(k),GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc},components:{0:(0,ef.jsx)(p.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,ef.jsx)(g.kH,{label:u.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,ef.jsx)(h.xu,{mb:"2",children:(0,ef.jsx)(s7.I,{url:j,variant:"solid"})}),(0,ef.jsxs)(sh.b,{children:[(0,ef.jsx)(sm.z,{}),(0,ef.jsxs)(ei.U,{flexBasis:"100%",alignItems:"top",children:[(0,ef.jsx)(p.x,{fontSize:"sm",width:"100%",children:(0,ef.jsx)(d.cC,{id:"EApNIe"})}),(0,ef.jsxs)(h.xu,{position:"relative",textShadow:"sm",children:[(0,ef.jsx)(rO.q,{animation:"".concat(S," 2s infinite ease-out"),name:null==C?void 0:C.displayName,src:null==C?void 0:C.profileImageUrl,size:"md",border:"solid 3px ".concat(O.value),shadow:"lg"}),(0,ef.jsx)(h.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,ef.jsx)(x.G,{icon:s4.q,fixedWidth:!0})})]})]})]})]})}),(0,ef.jsx)(t3.m,{children:(0,ef.jsxs)(t6.h,{children:[(0,ef.jsx)(eu.z,{variant:"ghost",colorScheme:"gray",onClick:function(){o()},children:(0,ef.jsx)(d.cC,{id:"DPfwMq"})}),(0,ef.jsx)(eu.z,{variant:"solid",onClick:function(){o(),s(),l(j,j,{shallow:!0})},leftIcon:(0,ef.jsx)(x.G,{icon:sM.zc}),children:(0,ef.jsx)(d.cC,{id:"tbDuNX"})})]})})]})]})})},ar=function(e){var t,n,r,o,i=e.doc,s=e.isStaticEditor,a=e.editorWrapperEl,c=e.scrollingParentSelector,l=(0,nk.M)({id:"meetModal"}),m=l.onOpen,v=l.onClose,j=l.isOpen,y=sB({editorWrapperEl:a,scrollingParentSelector:c}),C=y.enterSlideView,O=y.exitSlideView,k=y.setExitedFullscreenByClick,S=y.isFullscreen,I=y.enterFullscreen,E=y.exitFullscreen,P=(0,tV.SE)().user,D=(0,Y.CG)(J.gh),A=(0,b.useRef)(D);(0,b.useEffect)(function(){A.current=D},[D]);var T=sz()[D],R=T.shortcutLabel,_=T.shortcutIcon,L=T.shortcutKeys,M=T.buttonLabel,z=null==i?void 0:null===(t=i.accessLinks)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.url,N=!!(null==i?void 0:null===(r=i.accessLinks)||void 0===r?void 0:null===(o=r[0])||void 0===o?void 0:o.permission),Z=(0,tV.py)("manage",i||void 0),G=(0,w.ye)("presentFullScreen"),F="present"===(0,Y.CG)(J.e_).primaryAction?"solid":"plain";return(0,ef.jsxs)(f.k,{children:[(0,ef.jsxs)(t6.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":D===tZ.q.SLIDE_VIEW?"slide":"doc",children:[(0,ef.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:R,shortcut:L,children:(0,ef.jsx)(iy.h,{fontWeight:"normal",size:"sm",variant:F,onClick:function(){D===tZ.q.SLIDE_VIEW?O():C({fullscreen:G})},onMouseDown:ts.br,icon:(0,ef.jsx)(x.G,{icon:_}),"data-present-button":!0,children:M})}),(0,ef.jsxs)(r7.v,{children:[(0,ef.jsx)(r9.j,{variant:F,as:iy.r,icon:(0,ef.jsx)(x.G,{icon:s5.pt})}),(0,ef.jsx)(eE.h,{children:(0,ef.jsxs)(oe.q,{zIndex:"popover",children:[D===tZ.q.DOC_VIEW&&(0,ef.jsxs)(s3.k,{title:u.ag._({id:"9vUn+H"}),children:[(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:sy.Rk,fixedWidth:!0}),command:(0,g.cE)("Mod+Enter"),onClick:function(){return C({fullscreen:!1})},children:(0,ef.jsx)(d.cC,{id:"LRFe2O"})}),(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:s2.tc,fixedWidth:!0}),command:(0,g.cE)("Mod+Shift+Enter"),onClick:function(){return C({fullscreen:!0})},children:(0,ef.jsx)(d.cC,{id:"OwIqiD"})})]}),D===tZ.q.SLIDE_VIEW&&(0,ef.jsx)(i8.s,{icon:(0,ef.jsx)(x.G,{icon:sL.Bg,fixedWidth:!0}),command:"ESC",onClick:O,children:(0,ef.jsx)(d.cC,{id:"5Rfo7J"})}),!s&&P&&Z&&(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(on.R,{}),(0,ef.jsx)(g.kH,{isDisabled:N,label:(0,ef.jsx)(d.cC,{id:"zk6wKo"}),children:(0,ef.jsx)(h.xu,{children:(0,ef.jsx)(i8.s,{onClick:function(){var e;null!=i&&null!==(e=i.accessLinks)&&void 0!==e&&e[0].permission&&m()},isDisabled:!N,icon:(0,ef.jsx)(x.G,{icon:s1.AS,fixedWidth:!0}),children:(0,ef.jsx)(ea.K,{spacing:"0",children:(0,ef.jsx)(d.cC,{id:"z7gRub",components:{0:(0,ef.jsx)(p.x,{}),1:(0,ef.jsx)(p.x,{fontSize:"sm",color:"gray.600"})}})})})})})]}),!s&&P&&z&&(0,ef.jsx)(an,{isOpen:j,onClose:v,accessLinkUrl:z,onPlayClick:function(){C({fullscreen:!1})}})]})})]})]}),D===tZ.q.SLIDE_VIEW&&(0,ef.jsx)(f.k,{ml:D===tZ.q.SLIDE_VIEW?2:0,children:(0,ef.jsx)(g.kH,{label:S?"Exit full screen":"Enter full screen",children:(0,ef.jsx)(iy.r,{"aria-label":S?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,ef.jsx)(x.G,{icon:S?s0.Qj:s$.TL}),onClick:S?function(){k(!0),E()}:I})})})]})},ao=n(85844),ai=n(38621),as=function(e){var t=e.spotlightingByBlock,n=(0,tK._i)().editor,r=(0,b.useCallback)(function(){t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,ef.jsx)(f.k,{children:(0,ef.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,ef.jsxs)(p.x,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,ef.jsx)(p.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,ef.jsx)(iy.h,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:function(e){r(),e.target.blur()},icon:(0,ef.jsx)(x.G,{icon:ai.QM}),children:"Spotlight"})})})},aa=n(41697),ac=n(31997),al=n(74588),ad=[.5,.8,.9,1,1.1,1.2,1.5,2],au=function(e){return"".concat((100*e).toFixed(0),"%")},af=function(){var e=(0,w.ye)("presentZoom"),t=(0,tK._i)().editor,n=(0,tP.z$)(),r=(0,y.I0)(),o=(0,Y.CG)(J.SU),i=(0,b.useCallback)(function(e){r((0,J.Ic)({zoomLevel:e})),r((0,J.fT)({enabled:!1})),null==n||n.track(tP.AA.DOC_ZOOMED,{direction:"set",level:e})},[r,n]),s=(0,b.useCallback)(function(){r((0,J.fT)({enabled:!0}))},[r]),a=(0,b.useCallback)(function(){var e=Math.min(of.v4,o+.1);r((0,J.Ic)({zoomLevel:e})),r((0,J.fT)({enabled:!1})),null==n||n.track(tP.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,n,o]),c=(0,b.useCallback)(function(){var e=Math.max(of.Ou,o-.1);r((0,J.Ic)({zoomLevel:e})),r((0,J.fT)({enabled:!1})),null==n||n.track(tP.AA.DOC_ZOOMED,{direction:"in",level:e})},[r,n,o]),l=(0,b.useCallback)(function(){var e=of.aX;r((0,J.Ic)({zoomLevel:e})),r((0,J.fT)({enabled:!1})),null==n||n.track(tP.AA.DOC_ZOOMED,{direction:"reset",level:e})},[r,n]),f=(0,Y.CG)(rK.C),h=(0,rW.rJ)();return((0,b.useEffect)(function(){if(e)return rU.F7.on("keydown","PRESENT_BLOCK",function(e){return!(f||!t||(0,rE.KB)(t)||(0,tN.Hx)(e.target))&&((0,rF.ZP)("=")(e)?(a(),e.preventDefault(),!0):(0,rF.ZP)("-")(e)?(c(),e.preventDefault(),!0):(0,rF.ZP)("0")(e)?(l(),e.preventDefault(),!0):!!(0,rF.ZP)("9")(e)&&(s(),e.preventDefault(),!0))})},[f,e,t,a,c,l,s]),e)?(0,ef.jsxs)(t6.h,{spacing:"0",size:"sm",variant:"plain",isAttached:!0,children:[(0,ef.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:u.ag._({id:"FjkaiT"}),children:(0,ef.jsx)(R.h,{"aria-label":u.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:c,icon:(0,ef.jsx)(x.G,{icon:ac.Kl})})}),(0,ef.jsxs)(r7.v,{closeOnSelect:!0,children:[(0,ef.jsx)(g.kH,{label:u.ag._({id:"VZ3UQG"}),children:(0,ef.jsx)(r9.j,{minW:20,as:eu.z,variant:"plain",size:"sm",rightIcon:(0,ef.jsx)(x.G,{icon:al.eW}),children:h?(0,ef.jsx)(d.cC,{id:"R9Khdg"}):au(o)})}),(0,ef.jsxs)(oe.q,{maxW:"220px",children:[(0,ef.jsx)(or._,{value:h?"auto":o.toString(),type:"radio",children:(0,ef.jsx)(oo.i,{value:"auto",onClick:s,children:(0,ef.jsxs)(ei.U,{children:[(0,ef.jsxs)(p.x,{children:[(0,ef.jsx)(d.cC,{id:"R9Khdg"})," ",(0,ef.jsx)(p.x,{as:"span",color:"gray.500",children:(0,ef.jsx)(d.cC,{id:"P9Cyl9"})})]}),(0,ef.jsx)(iu.L,{}),(0,ef.jsx)(p.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,ef.jsx)(on.R,{}),(0,ef.jsx)(or._,{value:h?"auto":o.toString(),type:"radio",children:ad.map(function(e){return(0,ef.jsx)(oo.i,{value:(e/100).toString(),onClick:function(){i(e)},children:(0,ef.jsxs)(ei.U,{children:[(0,ef.jsx)(p.x,{children:au(e)}),(0,ef.jsx)(iu.L,{}),e===of.aX&&(0,ef.jsx)(p.x,{as:"span",opacity:"0.6",children:"0"})]})},e)})})]})]}),(0,ef.jsx)(g.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:u.ag._({id:"AWOSPo"}),children:(0,ef.jsx)(R.h,{fontWeight:"normal","aria-label":u.ag._({id:"AWOSPo"}),onClick:a,icon:(0,ef.jsx)(x.G,{icon:nR.r8})})})]}):null},ap=(0,eJ.E)(h.xu),ah=(0,b.memo)(function(e){var t,r,o=e.scrollingParentSelector,i=e.toggleCommentsPanel,s=e.isCommentsPanelOpen,a=e.editorWrapperEl,c=e.docEditorType,l=(0,id.a)(["(max-width: 840px)","(min-width: 841px)"]),d=(0,E.Z)(l,1)[0],u=(0,ig.i)({base:!0,lg:!1}),p=(0,nV.LQ)(window.location.href),h=(0,Y.CG)(J.gh),m=(0,Y.CG)(tY.yx),x=(0,tK._i)().editor,g=(0,tV.py)("comment",m),v=(0,rJ.g)(x).enabled,j=(0,Y.CG)(J.WI),y=(0,Y.CG)(J.yn),C=j&&y,O="SLIDE_VIEW"!==h,k=(0,Y.CG)(J.hN),S=c!==tq.Z.COLLABORATIVE,P=c===tq.Z.PUBLIC_STATIC,D=(0,Y.CG)(J.Tf),A=(0,w.ye)("aiChat");(0,w.ye)("pptExport")&&(window.exportToPptx=(t=(0,tJ.Z)(tQ().mark(function e(t){var r;return tQ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(9775),n.e(5743),n.e(9068)]).then(n.bind(n,54087));case 4:return r=e.sent.exportToPptx,e.abrupt("return",r(x,t));case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}));var T=K((0,b.useCallback)(function(e){var t=R.current;return!!t&&(!!(t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]'))||e.clientY<100)},[]),!D),R=(0,b.useRef)(null),_=!D||D&&T,L=!!(null==m?void 0:m.publishedSnapshotId),M=!(0,nW.s2)()&&!d&&!p;return(0,ef.jsxs)(f.k,{"data-editor-toolbar":!0,ref:R,bg:"linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.1) 100%)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"center",pr:6,marginTop:_?0:"-100%",pointerEvents:"none",sx:(r={},(0,I.Z)(r,"&:focus-within",{marginTop:0}),(0,I.Z)(r,"> *",{pointerEvents:"auto"}),(0,I.Z)(r,"> #toolbar-spacer",{pointerEvents:"none"}),r),transitionProperty:"margin-top",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,ef.jsx)(eX.M,{initial:!1,children:C&&(0,ef.jsx)(ap,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(null==j?void 0:j.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})}),!P&&(0,ef.jsx)(ei.U,{children:(0,ef.jsx)(iN,{doc:m})}),(0,ef.jsx)(iu.L,{pointerEvents:"none",id:"toolbar-spacer"}),(0,ef.jsxs)(ei.U,{children:[!d&&(0,ef.jsx)(iY,{}),!d&&!O&&(0,ef.jsx)(af,{}),!d&&!O&&(0,ef.jsx)(ef.Fragment,{children:(0,ef.jsx)(as,{spotlightingByBlock:v})}),!d&&!S&&k&&(0,ef.jsx)(aa.w,{}),!d&&!S&&(0,ef.jsx)(ao.S,{doc:m}),M&&!L&&(0,ef.jsx)(ar,{doc:m,isStaticEditor:S,editorWrapperEl:a,scrollingParentSelector:o}),M&&L&&(0,ef.jsx)(ix,{doc:m}),!S&&g&&(0,ef.jsx)(iQ.U,{doc:m,mode:h,isCommentsPanelOpen:s,toggleCommentsPanel:i}),!d&&u&&!S&&k&&A&&(0,ef.jsx)(i$.u,{}),!d&&!S&&(0,ef.jsx)(iO,{doc:m}),!d&&!S&&(0,ef.jsx)(sQ,{doc:m,editorWrapperEl:a,scrollingParentSelector:o}),!P&&(0,ef.jsx)(f.k,{children:(0,ef.jsx)(t7.DY,{showRing:!0})})]})]})}),am=n(25015),ax=n(18751),ag=n(95993),av=n(41202),aj=n(46069),ab=n(37701),ay=n(47403),aC=n(98765),aO=n(72314),aw=n(44934),ak=n(92455),aS=n(22681),aI=n(82875),aE=n(95201),aP=n(27846),aD=n(76041),aA=n(10004),aT=n(89641),aR=n(33807),a_=n(67639),aL=(i=(0,tJ.Z)(tQ().mark(function e(t){var n,r,o,i,s,a,c;return tQ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.editor,r=t.chain,o=t.node,i=t.imageAttrs,s=t.pos,r.updateAttributesAtPos(s,(0,aR.j6)(o,{uploadStatus:aA.D.Uploading})),a=i.tempUrl,c=i.src,(0,aD.WY)(c,n.storage.mediaUpload.orgId,{onUploadComplete:function(e){(0,aR.Ns)(n,a,e)},onUploadFailed:function(e){(0,aR.f8)(n,a,e,!0)}});case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),aM=function(e,t){console.debug("[AIStream processAIImages] for cardId: ",t);var n=e.chain(),r=(0,tL.N2)(e.state.doc,function(e){return(0,tz.KH)(e)&&e.attrs.id===t})[0];if(!r){console.error("[processAIImages] can not find card with id: ",t);return}var o=r.pos,i=o+r.node.nodeSize;e.state.doc.descendants(function(t,r){if(r<o||r>i)return!0;var s,a=t.attrs,c=t.type,l=void 0;return"image"===c.name?l=a:(0,a_.E)(t)?l=a.image:((0,tz.KH)(t)||(0,aT.pt)(t))&&(l=null===(s=a.background)||void 0===s?void 0:s.image),l&&l.uploadStatus===aA.D.Queued&&(console.debug("[AIStream processAIImages]: ".concat(t.type.name," node with AI queries at pos ").concat(r,":"),l),aL({editor:e,chain:n,node:t,imageAttrs:l,pos:r})),!0}),n.run()},az=["latency"];function aN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aN(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var aG="[CONTENT_FILTER]",aF=function(){return(0,ef.jsxs)(sh.b,{status:"error",variant:"solid",children:[(0,ef.jsx)(sm.z,{}),(0,ef.jsx)(ax.X,{children:(0,ef.jsxs)(ea.K,{children:[(0,ef.jsx)("strong",{children:(0,ef.jsx)(d.cC,{id:"7g5s/N"})}),(0,ef.jsx)(p.x,{children:(0,ef.jsx)(d.cC,{id:"Xp43Ei"})})]})})]})},aU=function(e){var t=e.editor,n=e.chunk,r=e.theme,o=e.docFormatKey,i=n.id,s=n.index,a=(0,aO.a)({chunk:n,theme:r,docFormatKey:o}),c=(0,tL.N2)(t.state.doc,function(e){return(0,aI.KH)(e)})[0],l=(0,tL.N2)(t.state.doc,function(e){return(0,aI.KH)(e)&&e.attrs.id===i})[0];if(!c)throw Error("Doc does not have a first card");var d=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===s?{from:c.pos,to:c.pos+c.node.nodeSize}:t.state.doc.nodeSize-3;try{if(t.commands.insertContentAt(d,a,{updateSelection:!1}),n.cardComplete&&0===n.index){var u=(0,o0.t)(t.state.doc.resolve(c.pos));u&&t.commands.command(function(e){return e.tr.setSelection(u),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card",a),console.warn(e)}},aW=function(e){var t=e.docId,n=e.store,r=e.generateInfo,o=e.editor;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}ab.a.trackRequestSent(n,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});var i=(0,aj.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}).stream;return(0,av.Nl)({stream:i,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,options:{imageLicense:r.imageLicense,docFormatKey:(0,aS.hx)((0,aS.VA)(o)).key,lastCompletedCardIndex:r.lastCompletedCardIndex},store:n})},aV=function(e,t){var n,r=(0,Y.qr)(),o=(0,Y.TL)(),i=(0,Y.CG)(J.KV),s=(0,w.ye)("streamResumingEnabled"),a=(0,b.useRef)(!1),c=aB({docId:e}),l=c.isStreaming,d=c.onStreamData,u=c.onStreamDone,f=c.onStreamError,p=c.onStreamStart,h=c.onAbortStream,m=aq(l),x=(0,b.useCallback)((n=(0,tJ.Z)(tQ().mark(function n(o){var i,s,c;return tQ().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:p({editor:t}),s=aH({streamResponse:o,editor:t,store:r,docId:e}).getReader(),n.prev=5;case 6:return n.next=8,s.read();case 8:if((i=n.sent).done){n.next=18;break}if(i.value){n.next=11;break}return n.abrupt("continue",6);case 11:if(!a.current){n.next=14;break}return console.log("[AIStream] has aborted -- no longer reading stream"),n.abrupt("break",18);case 14:"data"===(c=i.value).event&&(d({value:c.data,editor:t,streamResponse:o}),m()),n.next=6;break;case 18:n.next=24;break;case 20:return n.prev=20,n.t0=n.catch(5),f({err:n.t0,streamResponse:o,editor:t}),n.abrupt("return");case 24:if(!a.current){n.next=26;break}return n.abrupt("return");case 26:c&&"done"!==c.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:c}),u({editor:t,streamResponse:o});case 28:case"end":return n.stop()}},n,null,[[5,20]])})),function(e){return n.apply(this,arguments)}),[e,t,d,u,f,p,m,r]);(0,aP.v)(function(){if(t&&i&&!l){var n=(0,nZ.oH)(e)(r.getState()),o=(0,nZ.nl)(r.getState());if(n){"running"===n.status&&x(n);return}if(s&&!o){var a=(0,aS.VA)(t),c=a.generateInfo;if("streaming"===a.generateStatus){var d=aW({docId:e,generateInfo:c,editor:t,store:r});d&&x(d)}}}},[e,t,r,i,p,f,d,u,s,x,l],[t,i]),(0,b.useEffect)(function(){return function(){var n=(0,nZ.oH)(e)(r.getState());t&&n&&"running"===n.status&&(a.current=!0,h({editor:t,streamResponse:n}))}},[o,e,h,t,r])},aB=function(e){var t=e.docId,n=(0,eG.p)(),r=(0,Y.TL)(),o=(0,Y.qr)(),i=(0,w.ye)("aiWizardUploadImages"),s=(0,Y.CG)(J.Pu),a=(0,b.useState)(!1),c=a[0],l=a[1],u=(0,b.useRef)(null);(0,b.useEffect)(function(){return function(){u.current&&(n.close(u.current),u.current=null)}},[n]);var f=(0,b.useCallback)(function(){u.current||(u.current=n({id:"ai-generating-toast",isClosable:!1,render:function(){return(0,ef.jsxs)(sh.b,{variant:"light",children:[(0,ef.jsx)(nx.$,{size:"sm",mr:2}),(0,ef.jsxs)(ax.X,{children:[(0,ef.jsx)("strong",{children:(0,ef.jsx)(d.cC,{id:"n2cF1o"})})," ",(0,ef.jsx)(d.cC,{id:"BFGwQA"})]})]})},position:"top",duration:null}))},[n]),p=(0,b.useCallback)(function(e){var t=e.editor;t&&(l(!0),t.commands.setAIGenerationRunning(!0),f())},[f]),h=(0,b.useCallback)(function(e){var t=e.editor,n=e.value;if(e.streamResponse&&t){var r=(0,aS.hx)((0,aS.VA)(t)),o=n.id,a=n.cardComplete;aU({chunk:n,editor:t,theme:s,docFormatKey:r.key}),a&&i&&aM(t,o)}},[i,s]),m=(0,b.useCallback)(function(e){var t=e.editor,i=e.streamResponse;if(t&&i){var s=i.id,a=(0,aS.hx)((0,aS.VA)(t));l(!1),t.commands.setAIGenerationRunning(!1),t.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,aC.rD)(),r((0,nZ.G0)({id:s,status:"complete"})),ab.a.trackStreamComplete(o,s),(0,aw.d)("wizardCreation"),u.current&&n.update(u.current,{title:(0,ef.jsx)(d.cC,{id:"2/LpWt",values:{0:a.generationLabel||a.label}}),status:"success",position:"top",duration:3e3,isClosable:!0})}},[r,o,n]);return{isStreaming:c,onStreamStart:p,onStreamData:h,onStreamError:(0,b.useCallback)(function(e){var i=e.err,s=e.editor,a=e.streamResponse,c=a.id,f=(0,ay.uS)(i),p=f.errorMessage,h=f.errorCode;l(!1),s.commands.setAIGenerationRunning(!1),s.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,aC.rD)(),r((0,nZ.G0)({id:c,status:"error"}));var m=(0,nZ.Sn)(c)(o.getState());if(m){var x=m.latency,g=(0,eD.Z)(m,az);(0,n0.pQ)(aZ(aZ({},g),{},{errorName:"StreamError",errorMessage:p,errorCode:h,outputMessage:"",latency:x||performance.now()-g.startTime,isResuming:a.isResuming,docId:t}))}u.current&&(p===aG?n.update(u.current,{render:aF,position:"top",duration:null,isClosable:!0}):n.update(u.current,{title:(0,ef.jsx)(d.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[r,t,o,n]),onStreamDone:m,onAbortStream:(0,b.useCallback)(function(e){var t=e.editor,n=e.streamResponse.id;l(!1),t.commands.setAIGenerationRunning(!1),ab.a.trackStreamAbort(o,{interactionId:n,abortReason:"leave-editor"}),r((0,nZ.Of)({id:n}))},[r,o])}},aH=function(e){var t=e.streamResponse,n=e.editor,r=e.store,o=e.docId,i=t.id,s=t.stream,a=!0;return s.pipeThrough(new ag.GJ({transform:function(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(aG));return}t.enqueue(e)}})).pipeThrough((0,av.c1)(function(e){a&&"data"===e.event&&(ab.a.trackStreamStart(r,{interactionId:i,docId:o}),t.isResuming&&n.commands.deleteCardsAfter(t.lastCompletedCardId||null),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.data.eventId,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},aq=function(e){var t=(0,ak.As)("editor"),n=(0,b.useRef)(!0);(0,b.useEffect)(function(){if(e){var r=t.scroller;if(r){var o=function(){t.isAtBottom(40)?n.current=!0:n.current=!1},i=function(){n.current=!1};return r.addEventListener("wheel",o,{passive:!0}),r.addEventListener("touchend",o,{passive:!0}),r.addEventListener("touchstart",i,{passive:!0}),r.addEventListener("touchmove",i,{passive:!0}),function(){r.removeEventListener("wheel",o),r.removeEventListener("touchend",o),r.removeEventListener("touchstart",i),r.removeEventListener("touchmove",i)}}}},[t,e]);var r=(0,b.useCallback)(function(){if(n.current){var e;null===(e=t.scroller)||void 0===e||e.scrollTo({top:t.scroller.scrollHeight,behavior:"auto"})}},[t]);return(0,aE.Z_)(r,100)},aK=n(14198),aY=function(e){var t=e.toggleToCPanel,n=e.initializeToCPanel,r=e.isToCPanelOpen,o=(0,aK.F)().breakpoints.xl,i=(0,Y.CG)(J.gh),s=(0,b.useState)(i!==tZ.q.SLIDE_VIEW),a=s[0],c=s[1],l=(0,b.useState)(!1),d=l[0];l[1];var u=(0,y.I0)();(0,na.vm)(function(){n()},[o,t,n,u],[]),(0,na.vm)(function(){i===tZ.q.SLIDE_VIEW?(c(r),t({disableTransition:!1,override:"closed"})):d&&i===tZ.q.DOC_VIEW&&t({disableTransition:!1,override:a?"open":"closed"})},[t,r,a,i,d],[i])};function aJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aJ(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aJ(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var aQ="doc_archived_warning",a$=function(e,t){var n=(0,eG.p)(),r=(0,C.iX9)(),o=(0,E.Z)(r,1)[0];(0,b.useEffect)(function(){return function(){n.close(aQ)}},[]),(0,b.useEffect)(function(){e&&t===tq.Z.COLLABORATIVE&&(e.archived&&!n.isActive(aQ)?n({id:aQ,title:(0,ef.jsxs)(p.x,{"data-testid":"trash-confirmation-toast",children:[(0,ef.jsx)(d.cC,{id:"fkHPZu"})," ",(0,ef.jsx)(eF.r,{textDecoration:"underline",onClick:function(){var t={id:e.id};o({variables:t,optimisticResponse:{unarchiveDoc:aX(aX({},t),{},{archived:!0,__typename:"Doc"})}})},children:(0,ef.jsx)(d.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null}):!e.archived&&n.isActive(aQ)&&n.close(aQ))},[e,t,n,o])},a0=n(51587),a1=n(56675),a2=n(78985);function a5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a5(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var a6=function(e){var t=(0,a1.x)(),n=(0,Y.CG)(a2.cn);(0,b.useEffect)(function(){n&&t.cache.updateQuery({query:sn.yE1,variables:{id:e}},function(e){if(!(null!=e&&e.doc))return e;var t=e.doc;return t.titleEdited?e:{doc:a3(a3({},t),{},{title:n})}})},[n,t,e])},a4=n(83827),a8=n(48842),a7=function(e,t){var n=(0,a8._)().isUnauthorized;(0,tP.If)(function(r){!0!==n&&void 0!==n&&(r.track(tP.AA.DOC_VIEWED,{doc_id:e}),t===tq.Z.EXAMPLE_STATIC&&r.track(tP.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,a4.d)();var r=(0,w.ye)("realUserMetrics"),o=t===tq.Z.COLLABORATIVE&&r,i=(0,w.ye)("rumKeystrokeSampleRate");(0,sN.lh)(o,i)},a9=function(e){var t=(0,y.I0)(),n=(0,tP.z$)();(0,b.useEffect)(function(){var r,o=function(){var o=(0,Y.bh)().getState();r=(0,J.Q5)(o),(0,sZ.I7)(e),t((0,J.lx)({isEditingDisabled:!0})),null==n||n.trackDocEvent(tP.AA.DOC_PRINTED)},i=function(){t((0,J.lx)({isEditingDisabled:!1})),t((0,J.xn)({expandedCardsMap:r}))};return window.addEventListener("beforeprint",o),window.addEventListener("afterprint",i),function(){window.removeEventListener("beforeprint",o),window.removeEventListener("afterprint",i)}},[t,e,n])},ce="doc-root",ct=function(e){var t=e.isConnected;return(0,ef.jsx)(f.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,ef.jsx)(d.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc}}):(0,ef.jsxs)(f.k,{m:8,alignItems:"center",direction:"row",children:[(0,ef.jsx)(x.G,{icon:l.bK,size:"4x"}),(0,ef.jsx)(p.x,{ml:8,children:(0,ef.jsx)(d.cC,{id:"qercPA",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc},components:{0:(0,ef.jsx)("strong",{})}})})]})})},cn=function(e){var t=e.doc,n=e.user,r=e.docEditorType,o=(0,O.$m)(t,n),i=(0,y.v9)(J.gh),s=r===tq.Z.COLLABORATIVE&&!o,a=s&&i===tZ.q.SLIDE_VIEW;return(null==o?void 0:o.permission)=="view"?(0,ef.jsx)(rj.m,{}):a?(0,ef.jsx)(eg,{}):s?(0,ef.jsx)(S.C,{showTourReplay:!0}):null},cr=(0,tK.eT)(function(e){var t=e.docEditorType,n=void 0===t?tq.Z.COLLABORATIVE:t,r=(0,tK._i)(),o=r.docId,i=r.isUnauthorized,s=r.setCollaborativeEditorInstance,a=r.editor,c=(0,Y.CG)(tY.yx),l=(0,C.$gs)().isConnected,d=(0,tV.SE)().user;(0,k.F3)(),a$(c,n),aV(o,a),a6(o),a7(o,n),(0,a0.j)(),(0,am.P)(),(0,am.J)(),rD(a,".".concat(ce)),rG(a),(0,tB.V)(),a9(a),(0,O.DD)(c,n===tq.Z.COLLABORATIVE);var p=(0,b.useRef)(null),x=(0,Y.TL)(),v=(0,ek.Yy)(),y=(0,b.useMemo)(function(){return(0,tI.vu)(v)},[v]);console.debug("%c[DocEditorComponent] RENDER - ".concat(o),"background-color: gold");var S=(0,eb.Pp)(il.Q),I=S.togglePanel,E=S.isPanelOpen,P=S.initPanel,D=(0,eb.Pp)(nD.s),A=D.togglePanel,T=D.isPanelOpen,R=(0,eb.Pp)(nA.Rr),_=R.togglePanel,L=R.isPanelOpen;(0,nA.QK)({toggleDesignPartnerPanel:_,isDesignPartnerPanelOpen:L,editor:a}),aY({toggleToCPanel:I,isToCPanelOpen:E,initializeToCPanel:P}),(0,b.useEffect)(function(){return function(){x((0,eO.qo)())}},[x]);var M=(0,b.useCallback)(function(){return!!(a&&a.state.selection.empty)},[a]),z=(0,eb.Xy)(),N=z.leftPanelLifecycle,Z=z.rightPanelLifecycle,G=z.globalPanelLifecycle,F=(0,w.ye)("filmstrip")&&n===tq.Z.COLLABORATIVE,U=(0,ej.dU)(null==c?void 0:c.organization),W=(0,tH.U)(null==c?void 0:c.title,U),V=u.ag._({id:"X6YCwz"}),B=u.ag._({id:"abr3hR"});return(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,ef.jsx)(j(),{children:(0,ef.jsx)("title",{children:W})}),(0,ef.jsx)(nE,{doc:c,editor:a}),(0,ef.jsx)(ew.H9,{isEnabledFn:M}),i?(0,ef.jsx)(ct,{isConnected:l}):(0,ef.jsxs)(f.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:p,children:[(0,ef.jsx)(ey.Av,{panelLifecycle:N}),(0,ef.jsxs)(f.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[(0,ef.jsx)(g.Wk,{isDark:v,children:(0,ef.jsx)(ah,{scrollingParentSelector:".".concat(ce),editorWrapperEl:p.current,docEditorType:n,isToCPanelOpen:E,toggleToCPanel:I,isCommentsPanelOpen:T,toggleCommentsPanel:A})}),(0,ef.jsxs)(h.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:(0,m.cx)(ce,L&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(V,"'"),"--ai-generating-label":"'".concat(B,"'")},css:y,children:[n===tq.Z.PUBLIC_STATIC?(0,ef.jsx)(rL,{docId:o,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(ce),onCreate:s}):n===tq.Z.EXAMPLE_STATIC?(0,ef.jsx)(rC,{docId:o,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(ce),onCreate:s}):(0,ef.jsxs)(eC.Mn.Provider,{value:G,children:[(0,ef.jsx)(eS.Ge,{doc:c,docId:o,readOnly:null==c?void 0:c.archived,onCreate:s,scrollingParentSelector:".".concat(ce)}),a&&(0,ef.jsx)(tW,{editor:a})]}),(0,ef.jsx)(ru,{editor:a}),(0,ef.jsx)(oE,{editor:a})]})]}),(0,ef.jsx)(ey.U8,{panelLifecycle:Z}),(0,ef.jsx)(tE.a,{editorId:"main",children:(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(tS,{editor:a}),(0,ef.jsx)(cn,{doc:c,user:d,docEditorType:n}),F&&(0,ef.jsx)(ic,{})]})})]})]})}),co=n(56768),ci=n(93031),cs=n(59195),ca=n(92488),cc=n(38717),cl=n(42353),cd=function(e){var t=e.theme,n=e.onClick,r=e.isChecked,o=e.index,i=e.startIndex;return(0,ef.jsxs)(h.xu,{gridColumnStart:o+1-i,display:i>o?"none":"block",gridRow:1,as:cc.f,p:2,transition:"all 0.2s ease-in-out",bgColor:r?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:r?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:r?"trueblue.100":"gray.100"},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":r?"current-theme-preview":void 0,cursor:"pointer",children:[(0,ef.jsx)(cl.n,{theme:t}),(0,ef.jsxs)(ea.K,{direction:"row",spacing:1,pt:1,children:[r&&(0,ef.jsx)(nh.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,ef.jsx)(p.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:r?"trueblue.700":void 0,children:t.name})]})]})};cd.displayName="DemoDocThemePreview";var cu="linen.50",cf=function(e){var t=e.templateTheme,r=e.setTheme,o=e.currentThemeId,i=(0,y.v9)(J.gh)===tZ.q.SLIDE_VIEW,s=(0,b.useState)([]),a=s[0],c=s[1],l=(0,b.useState)(!1),u=l[0],p=l[1],h=(0,b.useState)(0),m=h[0],g=h[1],v=(0,ig.i)({base:3,md:4,lg:5})||3;(0,b.useEffect)(function(){n.e(866).then(n.bind(n,20866)).then(function(e){c(e.GLOBAL_THEMES)})},[]);var j=[].concat((0,oy.Z)(t?[t]:[]),(0,oy.Z)(a.filter(function(e){return e.id!==(null==t?void 0:t.id)}))),C=(0,b.useCallback)(function(e){1===e?g(function(e){return e+1}):g(function(e){return e-1})},[]);return i?(0,ef.jsx)(ef.Fragment,{}):(0,ef.jsx)(eE.h,{children:(0,ef.jsxs)(f.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:cu,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,ef.jsx)(f.k,{alignItems:"flex-end",justify:"flex-end",children:(0,ef.jsx)(eu.z,{variant:"ghost",size:"sm",rightIcon:(0,ef.jsx)(x.G,{icon:u?ca.gc:cs.on}),onClick:function(){return p(function(e){return!e})},children:u?(0,ef.jsx)(d.cC,{id:"yz7wBu"}):(0,ef.jsx)(d.cC,{id:"x6tIe+"})})}),(0,ef.jsx)(f.k,{justify:"flex-start",align:"flex-start",bgColor:cu,w:"100%",children:u&&(0,ef.jsxs)(ea.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,ef.jsx)(R.h,{"aria-label":"Left",onClick:function(){return C(-1)},variant:"ghost",isDisabled:0===m,icon:(0,ef.jsx)(x.G,{icon:ci.Ey})}),(0,ef.jsx)(rB.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(v,", calc(100% / ").concat(v," - 1em))")],gap:"0 1em",bgColor:cu,children:j.map(function(e,t){return(0,ef.jsx)(cd,{index:t,startIndex:m,isChecked:e.id===o,theme:e,onClick:function(){r(e)}},e.id)})}),(0,ef.jsx)(R.h,{"aria-label":"Right",variant:"ghost",isDisabled:m+v>j.length,onClick:function(){return C(1)},icon:(0,ef.jsx)(x.G,{icon:co.yO})})]})})]})})},cp=n(53589),ch=n(68690),cm=n(10344),cx=n(70091),cg=n(78357),cv=[{description:(0,ef.jsx)(d.cC,{id:"gtWy3j"}),shortcut:["",""]},{description:(0,ef.jsx)(d.cC,{id:"UCxK2S"}),shortcut:["",""]},{description:(0,ef.jsx)(d.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,ef.jsx)(d.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,ef.jsx)(d.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,ef.jsx)(d.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,ef.jsx)(d.cC,{id:"K0Oq/D"}),shortcut:"R"}],cj=function(e){var t=sB({editorWrapperEl:e.editorWrapperEl,scrollingParentSelector:e.scrollingParentSelector}),n=t.enterSlideView,r=t.exitSlideView,o=t.setExitedFullscreenByClick,i=t.isFullscreen,s=t.enterFullscreen,a=t.exitFullscreen,c=(0,Y.CG)(J.gh),l=(0,b.useRef)(c);return(0,b.useEffect)(function(){l.current=c},[c]),(0,ef.jsxs)(ei.U,{children:[(0,ef.jsxs)(t6.h,{isAttached:!0,size:"sm",children:[(0,ef.jsx)(g.kH,{label:c===tZ.q.DOC_VIEW?(0,ef.jsx)(d.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc}}):(0,ef.jsx)(d.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc}}),children:(0,ef.jsx)(eu.z,{variant:c===tZ.q.DOC_VIEW?"solid":"plain",cursor:c===tZ.q.SLIDE_VIEW?"pointer":"auto",onClick:function(){c===tZ.q.SLIDE_VIEW&&r()},leftIcon:(0,ef.jsx)(x.G,{icon:ch.cw}),children:(0,ef.jsx)(d.cC,{id:"7Zdnlq"})})}),(0,ef.jsx)(g.kH,{label:c===tZ.q.SLIDE_VIEW?(0,ef.jsx)(d.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc}}):(0,ef.jsx)(d.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.Yc}}),children:(0,ef.jsx)(eu.z,{variant:c===tZ.q.SLIDE_VIEW?"solid":"plain",cursor:c===tZ.q.DOC_VIEW?"pointer":"auto",onClick:function(){c===tZ.q.DOC_VIEW&&n({fullscreen:!1})},leftIcon:(0,ef.jsx)(x.G,{icon:cp.bg}),children:(0,ef.jsx)(d.cC,{id:"FOoDGS"})})})]}),c===tZ.q.SLIDE_VIEW&&(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(ed.i,{orientation:"vertical"}),(0,ef.jsx)(g.kH,{label:i?(0,ef.jsx)(d.cC,{id:"IkOhTI"}):(0,ef.jsx)(d.cC,{id:"q8ARHN"}),children:(0,ef.jsx)(R.h,{size:"sm","aria-label":i?u.ag._({id:"IkOhTI"}):u.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,ef.jsx)(x.G,{icon:i?s0.Qj:s$.TL}),onClick:i?function(){o(!0),a()}:s})}),(0,ef.jsxs)(A.J,{children:[(0,ef.jsx)(T.x,{children:(0,ef.jsx)(eu.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,ef.jsx)(d.cC,{id:"77Emn0"})})}),(0,ef.jsxs)(_.y,{border:"1px solid #eee !important",children:[(0,ef.jsx)(cm.Q,{}),(0,ef.jsx)(cx.u,{}),(0,ef.jsx)(L.b,{children:(0,ef.jsx)(cg.A,{list:cv})})]})]})]})]})},cb=(0,b.memo)(function(e){var t=e.scrollingParentSelector,n=e.editorWrapperEl;(0,Y.CG)(tY.yx);var r=(0,b.useRef)(null);return(0,ef.jsx)(f.k,{ref:r,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,ef.jsx)(f.k,{direction:"column",w:"100%",children:(0,ef.jsx)(cj,{editorWrapperEl:n,scrollingParentSelector:t})})})}),cy="doc-root",cC=(0,tK.eT)(function(e){var t,n=e.docEditorType,r=void 0===n?tq.Z.COLLABORATIVE:n,o=(0,tK._i)(),i=o.docId,s=o.setCollaborativeEditorInstance,a=o.editor,c=(0,Y.CG)(tY.yx);a7(i,r),(0,a0.j)(),(0,am.P)(),(0,am.J)(),rD(a,".".concat(cy)),rG(a),(0,tB.V)(),a9(a),(0,O.DD)(c,r===tq.Z.COLLABORATIVE);var l=(0,b.useRef)(null),d=null==c?void 0:c.theme,u=(0,b.useState)(function(){return d}),p=u[0],m=u[1],x=(0,Y.TL)(),g=(0,b.useRef)(!1),v=(0,C.EDv)({variables:{docId:i,snapshotId:null==c?void 0:c.currentSnapshotId},skip:!(null!=c&&c.currentSnapshotId)}).data,y=null==v?void 0:null===(t=v.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,b.useEffect)(function(){d&&!g.current&&(m(d),g.current=!0)},[d]),(0,b.useEffect)(function(){if(a){var e=null==p?void 0:p.config.accentBackgrounds;if(!e||0===e.length){y&&a.commands.setContent(y);return}a.commands.updateThemeAccentImages(e)}},[a,p,y]);var w=(0,eb.Pp)(il.Q);aY({toggleToCPanel:w.togglePanel,isToCPanelOpen:w.isPanelOpen,initializeToCPanel:w.initPanel}),(0,b.useEffect)(function(){return function(){x((0,eO.qo)())}},[x]);var k=(0,eb.Xy)(),S=k.leftPanelLifecycle;return k.globalPanelLifecycle,(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,ef.jsx)(j(),{children:(0,ef.jsxs)("title",{children:["".concat(c?(0,sq.$)(c.title)+" | ":""),"Gamma"]})}),(0,ef.jsxs)(f.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,children:[(0,ef.jsx)(ey.Av,{panelLifecycle:S}),(0,ef.jsxs)(f.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[a&&(0,ef.jsx)(cb,{scrollingParentSelector:".".concat(cy),editorWrapperEl:l.current,setTheme:m,currentThemeId:(null==p?void 0:p.id)||(null==d?void 0:d.id),templateTheme:d}),(0,ef.jsxs)(h.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:cy,children:[(0,ef.jsx)(rL,{docId:i,snapshotId:null==c?void 0:c.currentSnapshotId,scrollingParentSelector:".".concat(cy),onCreate:s,theme:p,showMadeWithGammaBadge:!1}),(0,ef.jsx)(oE,{editor:a,showNavigationControls:!0})]})]}),(0,ef.jsx)(tS,{editor:a}),(0,ef.jsx)(cf,{setTheme:m,currentThemeId:(null==p?void 0:p.id)||(null==d?void 0:d.id),templateTheme:d})]})]})}),cO=n(82779),cw=n(49725),ck="body",cS=n(56648),cI=n(60670),cE=n(27914),cP=function(e){var t=(0,ak.As)(e),n=(0,b.useState)("up"),r=n[0],o=n[1];return(0,b.useEffect)(function(){var e=document.querySelector(t.scrollSelector);if(e){var n=(null==e?void 0:e.scrollTop)||0,r=function(){var t=(null==e?void 0:e.scrollTop)||0;Math.abs(t-n)>0&&(o(!(t>n)||n>0&&0===t||t>0&&0===n?"up":"down"),n=t>0?t:0)},i=B()(function(){return window.requestAnimationFrame(r)},500,{leading:!0});return null==e||e.addEventListener("scroll",i),function(){return null==e?void 0:e.removeEventListener("scroll",i)}}},[t.scrollSelector]),r};function cD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cD(Object(n),!0).forEach(function(t){(0,I.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cT=function(e){var t,n,r,o=e.doc,i=e.onCommentFeedOpen,s=e.onTocOpen,a=e.commentsEnabled,c=(0,i_.X)(Q.H.lastHomeUrl,"/"),l=(0,E.Z)(c,1)[0],d=(0,tV.SE)().user,u=(null==o?void 0:null===(t=o.comments)||void 0===t?void 0:t.filter(function(e){return e.status===C.Ux9.Open}).length)||0,f=cP("editor"),h=(0,y.v9)(J.Pu),m=(0,cE.Jh)(h),g=null!==(n=h.config.bodyColor)&&void 0!==n?n:(0,ne.wj)(h)?"white":"gray.800",v=null!==(r=h.accentColor)&&void 0!==r?r:(0,ne.wj)(h)?"trueblue.300":"trueblue.700";return(0,ef.jsxs)(ei.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==f?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==f?1:0,zIndex:"sticky",sx:cA(cA({},(0,cE.Oj)(m,h)),{},{border:"none",filter:"none",borderRadius:0}),color:g,children:[d&&(0,ef.jsx)(nN(),{href:l,passHref:!0,legacyBehavior:!0,children:(0,ef.jsx)(R.h,{as:eF.r,"aria-label":"Home",color:g,_hover:{bg:"transparent",color:v},icon:(0,ef.jsx)(x.G,{icon:iw.J9,size:"1x"}),variant:"ghost"})}),(0,ef.jsx)(p.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:g,children:null==o?void 0:o.title}),(0,ef.jsxs)(t6.h,{variant:"ghost",children:[(void 0===a||a)&&(0,ef.jsx)(eu.z,{color:g,_hover:{bg:"transparent",color:v},fontSize:"sm",onClick:i,leftIcon:(0,ef.jsx)(x.G,{icon:cI.Mz}),children:u}),(0,ef.jsx)(R.h,{color:g,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:v},onClick:s,icon:(0,ef.jsx)(x.G,{icon:cS.xi})})]})]})},cR=function(e){var t=e.doc,n=e.docEditorType,r=e.commentsEnabled,o=void 0===r||r,i=(0,tK._i)(),s=i.docId,a=i.setCollaborativeEditorInstance,c=i.editor,l=(0,D.q)({id:"mobile-comment-feed-panel-drawer"}),d=l.isOpen,u=l.onOpen,p=l.onClose,h=(0,D.q)({id:"mobile-toc-drawer"}),m=h.isOpen,x=h.onOpen,v=h.onClose,j=(0,b.useState)(null),y=j[0],C=j[1];return console.debug("%c[MobileEditorWrapper] RENDER - ".concat(s),"background-color: gold"),(0,ef.jsxs)(f.k,{ref:(0,b.useCallback)(function(e){return C(e)},[]),direction:"column",flex:1,children:[(0,ef.jsx)(cT,{doc:t,onCommentFeedOpen:u,onTocOpen:x,commentsEnabled:o}),n===tq.Z.PUBLIC_STATIC?(0,ef.jsx)(rL,{docId:s,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:ck,onCreate:a}):n===tq.Z.EXAMPLE_STATIC?(0,ef.jsx)(rC,{docId:s,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:ck,onCreate:a}):(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsx)(eS.Ge,{doc:t,docId:s,readOnly:!0,onCreate:a,scrollingParentSelector:ck}),c&&(0,ef.jsx)(tW,{editor:c})]}),o&&d&&(0,ef.jsx)(g.Aj,{isOpen:d,onClose:p,drawerProps:{autoFocus:!1},children:(0,ef.jsx)(cO.m,{onClose:p,editor:c})}),m&&(0,ef.jsx)(g.Aj,{isOpen:m,onClose:v,children:(0,ef.jsx)(cw.o,{rootElement:y,handleClose:v})}),(0,ef.jsx)(tE.a,{children:(0,ef.jsx)(ru,{editor:c})})]})},c_=(0,tK.eT)(function(e){var t=e.docEditorType,n=void 0===t?tq.Z.COLLABORATIVE:t,r=(0,tK._i)(),o=r.docId,i=r.isUnauthorized,s=r.editor;a7(o,n),aV(o,s),(0,a0.j)();var a=(0,b.useRef)(null),c=(0,y.v9)(tY.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(o),"background-color: gold");var l=n===tq.Z.COLLABORATIVE;return(0,ef.jsxs)(ef.Fragment,{children:[(0,ef.jsxs)(j(),{children:[(0,ef.jsxs)("title",{children:["".concat(c?(0,sq.$)(c.title)+" | ":""),"Gamma"]}),(0,ef.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,ef.jsx)(s8.Global,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),i?(0,ef.jsxs)(f.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",ev.Yc,"."]}):(0,ef.jsx)(f.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:a,flex:"1",children:(0,ef.jsx)(cR,{doc:c,docEditorType:n,commentsEnabled:l})})]})})},13504:function(e,t,n){n.d(t,{V:function(){return i}});var r=n(2784),o="drag-in-progress",i=function(){(0,r.useEffect)(function(){var e=function(){document.body.classList.add(o)},t=function(){document.body.classList.remove(o)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),function(){document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])}}}]);
//# sourceMappingURL=3503-08e513a829c389b4.js.map